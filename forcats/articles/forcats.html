<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to forcats • forcats</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to forcats">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">forcats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/forcats.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tidyverse/forcats">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to forcats</h1>
                        <h4 class="author">Emily Robinson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/forcats/blob/master/../../vignettes/forcats.Rmd"><code>../../vignettes/forcats.Rmd</code></a></small>
      <div class="hidden name"><code>forcats.Rmd</code></div>

    </div>

    
    
<p>The goal of the <strong>forcats</strong> package is to provide a suite of useful tools that solve common problems with factors. Factors are useful when you have categorical data, variables that have a fixed and known set of values, and when you want to display character vectors in non-alphabetical order. If you want to learn more, the best place to start is the <a href="http://r4ds.had.co.nz/factors.html">chapter on factors</a> in R for Data Science.</p>
<div id="ordering-by-frequency" class="section level2">
<h2 class="hasAnchor">
<a href="#ordering-by-frequency" class="anchor"></a>Ordering by frequency</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(forcats)</a></code></pre></div>
<p>Let’s try answering the question, “what are the most common hair colors of star wars characters?” Let’s start off by making a bar plot:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(starwars, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> hair_color)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span>()</a></code></pre></div>
<p><img src="forcats_files/figure-html/initial-plot-1.png" width="700"></p>
<p>That’s okay, but it would be more helpful the graph was ordered by count. This is a case of an <strong>unordered</strong> categorical variable where we want it ordered by its frequency. To do so, we can use the function <code><a href="../reference/fct_inorder.html">fct_infreq()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(starwars, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> <span class="kw"><a href="../reference/fct_inorder.html">fct_infreq</a></span>(hair_color))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span>()</a></code></pre></div>
<p><img src="forcats_files/figure-html/fct-infreq-hair-1.png" width="700"></p>
<p>Note that <code><a href="../reference/fct_inorder.html">fct_infreq()</a></code> it automatically puts NA at the top, even though that doesn’t have the smallest number of entries.</p>
</div>
<div id="combining-levels" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-levels" class="anchor"></a>Combining levels</h2>
<p>Let’s take a look at skin color now:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">starwars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(skin_color, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; # A tibble: 31 x 2</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;    skin_color     n</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;  1 fair          17</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;  2 light         11</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;  3 dark           6</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;  4 green          6</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;  5 grey           6</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;  6 pale           5</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;  7 brown          4</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;  8 blue           2</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;  9 blue, grey     2</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; 10 orange         2</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; # … with 21 more rows</span></a></code></pre></div>
<p>We see that there’s 31 different skin colors - if we want to make a plot this would be way too many to display! Let’s reduce it to only be the top 5. We can use <code><a href="../reference/fct_lump.html">fct_lump()</a></code> to “lump” all the infrequent colors into one factor, “other.” The argument <code>n</code> is the number of levels we want to keep.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">starwars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">skin_color =</span> <span class="kw"><a href="../reference/fct_lump.html">fct_lump</a></span>(skin_color, <span class="dt">n =</span> <span class="dv">5</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(skin_color, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;   skin_color     n</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 1 Other         41</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 2 fair          17</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 3 light         11</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 4 dark           6</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 5 green          6</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 6 grey           6</span></a></code></pre></div>
<p>We could also have used <code>prop</code> instead, which keeps all the levels that appear at least <code>prop</code> of the time. For example, let’s keep skin colors that at least 10% of the characters have:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">starwars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">skin_color =</span> <span class="kw"><a href="../reference/fct_lump.html">fct_lump</a></span>(skin_color, <span class="dt">prop =</span> <span class="fl">.1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(skin_color, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;   skin_color     n</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 1 Other         59</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 2 fair          17</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 3 light         11</span></a></code></pre></div>
<p>Only light and fair remain; everything else is other.</p>
<p>If you wanted to call it something than “other”, you can change it with the argument <code>other_level</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">starwars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">skin_color =</span> <span class="kw"><a href="../reference/fct_lump.html">fct_lump</a></span>(skin_color, <span class="dt">prop =</span> <span class="fl">.1</span>, <span class="dt">other_level =</span> <span class="st">"extra"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(skin_color, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;   skin_color     n</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 1 extra         59</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 2 fair          17</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 3 light         11</span></a></code></pre></div>
<p>What if we wanted to see if the average mass differed by eye color? We’ll only look at the 6 most popular eye colors and remove <code>NA</code>s.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">avg_mass_eye_color &lt;-<span class="st"> </span>starwars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">eye_color =</span> <span class="kw"><a href="../reference/fct_lump.html">fct_lump</a></span>(eye_color, <span class="dt">n =</span> <span class="dv">6</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(eye_color) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">mean_mass =</span> <span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(mass, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">avg_mass_eye_color</a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; # A tibble: 7 x 2</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt;   eye_color mean_mass</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt;   &lt;fct&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; 1 black          76.3</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; 2 blue           86.5</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; 3 brown          66.1</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; 4 orange        282. </span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; 5 red            81.4</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt; 6 yellow         81.1</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt; 7 Other          68.4</span></a></code></pre></div>
</div>
<div id="ordering-by-another-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#ordering-by-another-variable" class="anchor"></a>Ordering by another variable</h2>
<p>It looks like people (or at least one person) with orange eyes are definitely heavier! If we wanted to make a graph, it would be nice if it was ordered by <code>mean_mass</code>. We can do this with <code><a href="../reference/fct_reorder.html">fct_reorder()</a></code>, which reorders one variable by another.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">avg_mass_eye_color <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">eye_color =</span> <span class="kw"><a href="../reference/fct_reorder.html">fct_reorder</a></span>(eye_color, mean_mass)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> eye_color, <span class="dt">y =</span> mean_mass)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>()</a></code></pre></div>
<p><img src="forcats_files/figure-html/fct-reorder-1.png" width="700"></p>
</div>
<div id="manually-reordering" class="section level2">
<h2 class="hasAnchor">
<a href="#manually-reordering" class="anchor"></a>Manually reordering</h2>
<p>Let’s switch to using another dataset, <code>gss_cat</code>, the general social survey. What is the income distribution among the respondents?</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">gss_cat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(rincome)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; # A tibble: 16 x 2</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;    rincome            n</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;    &lt;fct&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;  1 No answer        183</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt;  2 Don't know       267</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;  3 Refused          975</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;  4 $25000 or more  7363</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;  5 $20000 - 24999  1283</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;  6 $15000 - 19999  1048</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;  7 $10000 - 14999  1168</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;  8 $8000 to 9999    340</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt;  9 $7000 to 7999    188</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; 10 $6000 to 6999    215</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt; 11 $5000 to 5999    227</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt; 12 $4000 to 4999    226</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt; 13 $3000 to 3999    276</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt; 14 $1000 to 2999    395</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; 15 Lt $1000         286</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt; 16 Not applicable  7043</span></a></code></pre></div>
<p>Notice that the income levels are in the correct order - they start with the non-answers and then go from highest to lowest. This is the same order you’d see if you plotted it as a bar chart. This is not a coincidence. When you’re working with ordinal data, where there is an order, you can have an ordered factor. You can examine them with the base function <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code>, which prints them in order:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(gss_cat<span class="op">$</span>rincome)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt;  [1] "No answer"      "Don't know"     "Refused"        "$25000 or more"</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt;  [5] "$20000 - 24999" "$15000 - 19999" "$10000 - 14999" "$8000 to 9999" </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt;  [9] "$7000 to 7999"  "$6000 to 6999"  "$5000 to 5999"  "$4000 to 4999" </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; [13] "$3000 to 3999"  "$1000 to 2999"  "Lt $1000"       "Not applicable"</span></a></code></pre></div>
<p>But what if your factor came in the wrong order? Let’s simulate that by reordering the levels of <code>rincome</code> randomly with <code><a href="../reference/fct_shuffle.html">fct_shuffle()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">reshuffled_income &lt;-<span class="st"> </span>gss_cat<span class="op">$</span>rincome <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/fct_shuffle.html">fct_shuffle</a></span>()</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(reshuffled_income)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;  [1] "$7000 to 7999"  "Lt $1000"       "$6000 to 6999"  "$3000 to 3999" </span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt;  [5] "$4000 to 4999"  "$20000 - 24999" "$1000 to 2999"  "Refused"       </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt;  [9] "$10000 - 14999" "$15000 - 19999" "No answer"      "$5000 to 5999" </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [13] "Don't know"     "$8000 to 9999"  "Not applicable" "$25000 or more"</span></a></code></pre></div>
<p>Now if we plotted it, it would show in this order, which is all over the place! How can we fix this and put it in the right order?</p>
<p>We can use the function <code><a href="../reference/fct_relevel.html">fct_relevel()</a></code> when we need to manually reorder our factor levels. In addition to the factor, you give it a character vector of level names, and specify where you want to move them. It defaults to moving them to the front, but you can move them after another level with the argument <code>after</code>. If you want to move it to the end, you set <code>after</code> equal to <code>Inf</code>.</p>
<p>For example, let’s say we wanted to move <code>Lt $1000</code> and <code>$1000 to 2999</code> to the front. We would write:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../reference/fct_relevel.html">fct_relevel</a></span>(reshuffled_income, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Lt $1000"</span>, <span class="st">"$1000 to 2999"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>()</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt;  [1] "Lt $1000"       "$1000 to 2999"  "$7000 to 7999"  "$6000 to 6999" </span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt;  [5] "$3000 to 3999"  "$4000 to 4999"  "$20000 - 24999" "Refused"       </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt;  [9] "$10000 - 14999" "$15000 - 19999" "No answer"      "$5000 to 5999" </span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; [13] "Don't know"     "$8000 to 9999"  "Not applicable" "$25000 or more"</span></a></code></pre></div>
<p>What if we want to move them to the second and third place?</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/fct_relevel.html">fct_relevel</a></span>(reshuffled_income, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Lt $1000"</span>, <span class="st">"$1000 to 2999"</span>), <span class="dt">after =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>()</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt;  [1] "$7000 to 7999"  "Lt $1000"       "$1000 to 2999"  "$6000 to 6999" </span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt;  [5] "$3000 to 3999"  "$4000 to 4999"  "$20000 - 24999" "Refused"       </span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;  [9] "$10000 - 14999" "$15000 - 19999" "No answer"      "$5000 to 5999" </span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; [13] "Don't know"     "$8000 to 9999"  "Not applicable" "$25000 or more"</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#ordering-by-frequency">Ordering by frequency</a></li>
      <li><a href="#combining-levels">Combining levels</a></li>
      <li><a href="#ordering-by-another-variable">Ordering by another variable</a></li>
      <li><a href="#manually-reordering">Manually reordering</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
