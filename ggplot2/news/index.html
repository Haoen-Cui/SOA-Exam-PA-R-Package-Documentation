<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • ggplot2</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Changelog" />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggplot2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/extending-ggplot2.html">Extending ggplot2</a>
    </li>
    <li>
      <a href="../articles/ggplot2-specs.html">Aesthetic specifications</a>
    </li>
    <li>
      <a href="../articles/profiling.html">Profiling Performance</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tidyverse/ggplot2">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/tidyverse/ggplot2/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="ggplot2-3-2-1" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-3-2-1" class="anchor"></a>ggplot2 3.2.1<small> 2019-08-10 </small>
</h1>
<p>This is a patch release fixing a few regressions introduced in 3.2.0 as well as fixing some unit tests that broke due to upstream changes.</p>
<ul>
<li>
<code><a href="../reference/position_stack.html">position_stack()</a></code> no longer changes the order of the input data. Changes to the internal behaviour of <code><a href="../reference/geom_ribbon.html">geom_ribbon()</a></code> made this reordering problematic with ribbons that spanned <code>y = 0</code> (<a href='https://github.com/tidyverse/ggplot2/issues/3471'>#3471</a>)</li>
<li>Using <code><a href="../reference/qplot.html">qplot()</a></code> with a single positional aesthetic will no longer title the non-specified scale as <code>"NULL"</code> (<a href='https://github.com/tidyverse/ggplot2/issues/3473'>#3473</a>)</li>
<li>Fixes unit tests for sf graticule labels caused by chages to sf</li>
</ul>
</div>
    <div id="ggplot2-3-2-0" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-3-2-0" class="anchor"></a>ggplot2 3.2.0<small> 2019-06-16 </small>
</h1>
<p>This is a minor release with an emphasis on internal changes to make ggplot2 faster and more consistent. The few interface changes will only affect the aesthetics of the plot in minor ways, and will only potentially break code of extension developers if they have relied on internals that have been changed. This release also sees the addition of Hiroaki Yutani (<a href='https://github.com/yutannihilation'>@yutannihilation</a>) to the core developer team.</p>
<p>With the release of R 3.6, ggplot2 now requires the R version to be at least 3.2, as the tidyverse is committed to support 5 major versions of R.</p>
<div id="breaking-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes" class="anchor"></a>Breaking changes</h2>
<ul>
<li><p>Two patches (<a href='https://github.com/tidyverse/ggplot2/issues/2996'>#2996</a> and <a href='https://github.com/tidyverse/ggplot2/issues/3050'>#3050</a>) fixed minor rendering problems. In most cases, the visual changes are so subtle that they are difficult to see with the naked eye. However, these changes are detected by the vdiffr package, and therefore any package developers who use vdiffr to test for visual correctness of ggplot2 plots will have to regenerate all reference images.</p></li>
<li><p>In some cases, ggplot2 now produces a warning or an error for code that previously produced plot output. In all these cases, the previous plot output was accidental, and the plotting code uses the ggplot2 API in a way that would lead to undefined behavior. Examples include a missing <code>group</code> aesthetic in <code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/3316'>#3316</a>), annotations across multiple facets (<a href='https://github.com/tidyverse/ggplot2/issues/3305'>#3305</a>), and not using aesthetic mappings when drawing ribbons with <code><a href="../reference/geom_ribbon.html">geom_ribbon()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/3318'>#3318</a>).</p></li>
</ul>
</div>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor"></a>New features</h2>
<ul>
<li>
<p>This release includes a range of internal changes that speeds up plot generation. None of the changes are user facing and will not break any code, but in general ggplot2 should feel much faster. The changes includes, but are not limited to:</p>
<ul>
<li><p>Caching ascent and descent dimensions of text to avoid recalculating it for every title.</p></li>
<li><p>Using a faster data.frame constructor as well as faster indexing into data.frames</p></li>
<li><p>Removing the plyr dependency, replacing plyr functions with faster equivalents.</p></li>
</ul>
</li>
<li><p><code><a href="../reference/geom_polygon.html">geom_polygon()</a></code> can now draw polygons with holes using the new <code>subgroup</code> aesthetic. This functionality requires R 3.6.0 (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3128'>#3128</a>)</p></li>
<li>Aesthetic mappings now accept functions that return <code>NULL</code> (<a href='https://github.com/yutannihilation'>@yutannihilation</a>,
<p><a href='https://github.com/tidyverse/ggplot2/issues/2997'>#2997</a>).</p>
</li>
<li><p><code><a href="../reference/stat_function.html">stat_function()</a></code> now accepts rlang/purrr style anonymous functions for the <code>fun</code> parameter (<a href='https://github.com/dkahle'>@dkahle</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3159'>#3159</a>).</p></li>
<li><p><code><a href="../reference/geom_rug.html">geom_rug()</a></code> gains an “outside” option to allow for moving the rug tassels to outside the plot area (<a href='https://github.com/njtierney'>@njtierney</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3085'>#3085</a>) and a <code>length</code> option to allow for changing the length of the rug lines (<a href='https://github.com/daniel-wells'>@daniel-wells</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3109'>#3109</a>).</p></li>
<li><p>All geoms now take a <code>key_glyph</code> paramter that allows users to customize how legend keys are drawn (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3145'>#3145</a>). In addition, a new key glyph <code>timeseries</code> is provided to draw nice legends for time series (<a href='https://github.com/mitchelloharawild'>@mitchelloharawild</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3145'>#3145</a>).</p></li>
</ul>
</div>
<div id="extensions" class="section level2">
<h2 class="hasAnchor">
<a href="#extensions" class="anchor"></a>Extensions</h2>
<ul>
<li><p>Layers now have a new member function <code>setup_layer()</code> which is called at the very beginning of the plot building process and which has access to the original input data and the plot object being built. This function allows the creation of custom layers that autogenerate aesthetic mappings based on the input data or that filter the input data in some form. For the time being, this feature is not exported, but it has enabled the development of a new layer type, <code><a href="../reference/layer_sf.html">layer_sf()</a></code> (see next item). Other special-purpose layer types may be added in the future (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2872'>#2872</a>).</p></li>
<li><p>A new layer type <code><a href="../reference/layer_sf.html">layer_sf()</a></code> can auto-detect and auto-map sf geometry columns in the data. It should be used by extension developers who are writing new sf-based geoms or stats (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3232'>#3232</a>).</p></li>
<li><p><code>x0</code> and <code>y0</code> are now recognized positional aesthetics so they will get scaled if used in extension geoms and stats (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3168'>#3168</a>)</p></li>
<li><p>Continuous scale limits now accept functions which accept the default limits and return adjusted limits. This makes it possible to write a function that e.g. ensures the limits are always a multiple of 100, regardless of the data (<a href='https://github.com/econandrew'>@econandrew</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2307'>#2307</a>).</p></li>
</ul>
</div>
<div id="minor-improvements-and-bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-bug-fixes" class="anchor"></a>Minor improvements and bug fixes</h2>
<ul>
<li><p><code><a href="../reference/cut_interval.html">cut_width()</a></code> now accepts <code>...</code> to pass further arguments to <code><a href="https://rdrr.io/r/base/cut.html">base::cut.default()</a></code> like <code><a href="../reference/cut_interval.html">cut_number()</a></code> and <code><a href="../reference/cut_interval.html">cut_interval()</a></code> already did (<a href='https://github.com/cderv'>@cderv</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3055'>#3055</a>)</p></li>
<li><p><code><a href="../reference/coord_map.html">coord_map()</a></code> now can have axes on the top and right (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3042'>#3042</a>).</p></li>
<li><p><code><a href="../reference/coord_polar.html">coord_polar()</a></code> now correctly rescales the secondary axis (<a href='https://github.com/linzi-sg'>@linzi-sg</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3278'>#3278</a>)</p></li>
<li><p><code><a href="../reference/ggsf.html">coord_sf()</a></code>, <code><a href="../reference/coord_map.html">coord_map()</a></code>, and <code><a href="../reference/coord_polar.html">coord_polar()</a></code> now squash <code>-Inf</code> and <code>Inf</code> into the min and max of the plot (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2972'>#2972</a>).</p></li>
<li><p><code><a href="../reference/ggsf.html">coord_sf()</a></code> graticule lines are now drawn in the same thickness as panel grid lines in <code><a href="../reference/coord_cartesian.html">coord_cartesian()</a></code>, and seting panel grid lines to <code><a href="../reference/element.html">element_blank()</a></code> now also works in <code><a href="../reference/ggsf.html">coord_sf()</a></code> (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2991'>#2991</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2525'>#2525</a>).</p></li>
<li><p><code>economics</code> data has been regenerated. This leads to some changes in the values of all columns (especially in <code>psavert</code>), but more importantly, strips the grouping attributes from <code>economics_long</code>.</p></li>
<li><p><code><a href="../reference/element.html">element_line()</a></code> now fills closed arrows (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2924'>#2924</a>).</p></li>
<li><p>Facet strips on the left side of plots now have clipping turned on, preventing text from running out of the strip and borders from looking thicker than for other strips (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2772'>#2772</a> and <a href='https://github.com/tidyverse/ggplot2/issues/3061'>#3061</a>).</p></li>
<li><p>ggplot2 now works in Turkish locale (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3011'>#3011</a>).</p></li>
<li><p>Clearer error messages for inappropriate aesthetics (<a href='https://github.com/clairemcwhite'>@clairemcwhite</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3060'>#3060</a>).</p></li>
<li><p>ggplot2 no longer attaches any external packages when using functions that depend on packages that are suggested but not imported by ggplot2. The affected functions include <code><a href="../reference/geom_hex.html">geom_hex()</a></code>, <code><a href="../reference/geom_hex.html">stat_binhex()</a></code>, <code><a href="../reference/stat_summary_2d.html">stat_summary_hex()</a></code>, <code><a href="../reference/geom_quantile.html">geom_quantile()</a></code>, <code><a href="../reference/geom_quantile.html">stat_quantile()</a></code>, and <code><a href="../reference/map_data.html">map_data()</a></code> (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3126'>#3126</a>).</p></li>
<li>
<code><a href="../reference/geom_ribbon.html">geom_area()</a></code> and <code><a href="../reference/geom_ribbon.html">geom_ribbon()</a></code> now sort the data along the x-axis in the <code>setup_data()</code> method rather than as part of <code>draw_group()</code> (<a href='https://github.com/thomasp85'>@thomasp85</a>,
<p><a href='https://github.com/tidyverse/ggplot2/issues/3023'>#3023</a>)</p>
</li>
<li><p><code><a href="../reference/geom_abline.html">geom_hline()</a></code>, <code><a href="../reference/geom_abline.html">geom_vline()</a></code>, and <code><a href="../reference/geom_abline.html">geom_abline()</a></code> now throw a warning if the user supplies both an <code>xintercept</code>, <code>yintercept</code>, or <code>slope</code> value and a mapping (<a href='https://github.com/RichardJActon'>@RichardJActon</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2950'>#2950</a>).</p></li>
<li><p><code><a href="../reference/geom_rug.html">geom_rug()</a></code> now works with <code><a href="../reference/coord_flip.html">coord_flip()</a></code> (<a href='https://github.com/has2k1'>@has2k1</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2987'>#2987</a>).</p></li>
<li><p><code><a href="../reference/geom_violin.html">geom_violin()</a></code> no longer throws an error when quantile lines fall outside the violin polygon (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3254'>#3254</a>).</p></li>
<li><p><code><a href="../reference/guide_legend.html">guide_legend()</a></code> and <code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code> now use appropriate spacing between legend key glyphs and legend text even if the legend title is missing (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2943'>#2943</a>).</p></li>
<li><p>Default labels are now generated more consistently; e.g., symbols no longer get backticks, and long expressions are abbreviated with <code>...</code> (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2981'>#2981</a>).</p></li>
<li>All-<code>Inf</code> layers are now ignored for picking the scale (<a href='https://github.com/yutannihilation'>@yutannihilation</a>,
<p><a href='https://github.com/tidyverse/ggplot2/issues/3184'>#3184</a>).</p>
</li>
<li><p>Diverging Brewer colour palette now use the correct mid-point colour (<a href='https://github.com/dariyasydykova'>@dariyasydykova</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3072'>#3072</a>).</p></li>
<li>
<code><a href="../reference/scale_gradient.html">scale_color_continuous()</a></code> now points to <code><a href="../reference/scale_colour_continuous.html">scale_colour_continuous()</a></code> so that it will handle <code>type = "viridis"</code> as the documentation states (<a href='https://github.com/hlendway'>@hlendway</a>,
<p><a href='https://github.com/tidyverse/ggplot2/issues/3079'>#3079</a>).</p>
</li>
<li><p><code><a href="../reference/scale_identity.html">scale_shape_identity()</a></code> now works correctly with <code>guide = "legend"</code> (<a href='https://github.com/malcolmbarrett'>@malcolmbarrett</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3029'>#3029</a>)</p></li>
<li><p><code>scale_continuous</code> will now draw axis line even if the length of breaks is 0 (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3257'>#3257</a>)</p></li>
<li><p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> will now error when the number of bins exceeds 1e6 to avoid accidentally freezing the user session (<a href='https://github.com/thomasp85'>@thomasp85</a>).</p></li>
<li><p><code><a href="../reference/sec_axis.html">sec_axis()</a></code> now places ticks accurately when using nonlinear transformations (<a href='https://github.com/dpseidel'>@dpseidel</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2978'>#2978</a>).</p></li>
<li><p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> and <code><a href="../reference/facet_grid.html">facet_grid()</a></code> now automatically remove NULL from facet specs, and accept empty specs (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3070'>#3070</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2986'>#2986</a>).</p></li>
<li>
<code><a href="../reference/geom_histogram.html">stat_bin()</a></code> now handles data with only one unique value (<a href='https://github.com/yutannihilation'>@yutannihilation</a>
<p><a href='https://github.com/tidyverse/ggplot2/issues/3047'>#3047</a>).</p>
</li>
<li><p><code><a href="../reference/sec_axis.html">sec_axis()</a></code> now accepts functions as well as formulas (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3031'>#3031</a>).</p></li>
<li><p>New theme elements allowing different ticks lengths for each axis. For instance, this can be used to have inwards ticks on the x-axis (<code>axis.ticks.length.x</code>) and outwards ticks on the y-axis (<code>axis.ticks.length.y</code>) (<a href='https://github.com/pank'>@pank</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2935'>#2935</a>).</p></li>
<li><p>The arguments of <code>Stat*$compute_layer()</code> and <code>Position*$compute_layer()</code> are now renamed to always match the ones of <code>Stat$compute_layer()</code> and <code>Position$compute_layer()</code> (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3202'>#3202</a>).</p></li>
<li><p><code>geom_*()</code> and <code>stat_*()</code> now accepts purrr-style lambda notation (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3138'>#3138</a>).</p></li>
<li><p><code><a href="../reference/geom_tile.html">geom_tile()</a></code> and <code><a href="../reference/geom_tile.html">geom_rect()</a></code> now draw rectangles without notches at the corners. The style of the corner can be controlled by <code>linejoin</code> parameters (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/3050'>#3050</a>).</p></li>
</ul>
</div>
</div>
    <div id="ggplot2-3-1-0" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-3-1-0" class="anchor"></a>ggplot2 3.1.0<small> 2018-10-25 </small>
</h1>
<div id="breaking-changes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-1" class="anchor"></a>Breaking changes</h2>
<p>This is a minor release and breaking changes have been kept to a minimum. End users of ggplot2 are unlikely to encounter any issues. However, there are a few items that developers of ggplot2 extensions should be aware of. For additional details, see also the discussion accompanying issue <a href='https://github.com/tidyverse/ggplot2/issues/2890'>#2890</a>.</p>
<ul>
<li><p>In non-user-facing internal code (specifically in the <code><a href="../reference/aes.html">aes()</a></code> function and in the <code>aesthetics</code> argument of scale functions), ggplot2 now always uses the British spelling for aesthetics containing the word “colour”. When users specify a “color” aesthetic it is automatically renamed to “colour”. This renaming is also applied to non-standard aesthetics that contain the word “color”. For example, “point_color” is renamed to “point_colour”. This convention makes it easier to support both British and American spelling for novel, non-standard aesthetics, but it may require some adjustment for packages that have previously introduced non-standard color aesthetics using American spelling. A new function <code><a href="../reference/standardise_aes_names.html">standardise_aes_names()</a></code> is provided in case extension writers need to perform this renaming in their own code (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2649'>#2649</a>).</p></li>
<li><p>Functions that generate other functions (closures) now force the arguments that are used from the generated functions, to avoid hard-to-catch errors. This may affect some users of manual scales (such as <code><a href="../reference/scale_manual.html">scale_colour_manual()</a></code>, <code><a href="../reference/scale_manual.html">scale_fill_manual()</a></code>, etc.) who depend on incorrect behavior (<a href='https://github.com/krlmlr'>@krlmlr</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2807'>#2807</a>).</p></li>
<li><p><code>Coord</code> objects now have a function <code>backtransform_range()</code> that returns the panel range in data coordinates. This change may affect developers of custom coords, who now should implement this function. It may also affect developers of custom geoms that use the <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> function. In some applications, <code>backtransform_range()</code> may be more appropriate (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2821'>#2821</a>).</p></li>
</ul>
</div>
<div id="new-features-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-1" class="anchor"></a>New features</h2>
<ul>
<li><p><code><a href="../reference/ggsf.html">coord_sf()</a></code> has much improved customization of axis tick labels. Labels can now be set manually, and there are two new parameters, <code>label_graticule</code> and <code>label_axes</code>, that can be used to specify which graticules to label on which side of the plot (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2846'>#2846</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2857'>#2857</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2881'>#2881</a>).</p></li>
<li><p>Two new geoms <code><a href="../reference/ggsf.html">geom_sf_label()</a></code> and <code><a href="../reference/ggsf.html">geom_sf_text()</a></code> can draw labels and text on sf objects. Under the hood, a new <code><a href="../reference/stat_sf_coordinates.html">stat_sf_coordinates()</a></code> calculates the x and y coordinates from the coordinates of the sf geometries. You can customize the calculation method via <code>fun.geometry</code> argument (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2761'>#2761</a>).</p></li>
</ul>
</div>
<div id="minor-improvements-and-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-fixes" class="anchor"></a>Minor improvements and fixes</h2>
<ul>
<li><p><code><a href="../reference/benchplot.html">benchplot()</a></code> now uses tidy evaluation (<a href='https://github.com/dpseidel'>@dpseidel</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2699'>#2699</a>).</p></li>
<li>The error message in <code>compute_aesthetics()</code> now only provides the names of aesthetics with mismatched lengths, rather than all aesthetics (<a href='https://github.com/karawoo'>@karawoo</a>,
<p><a href='https://github.com/tidyverse/ggplot2/issues/2853'>#2853</a>).</p>
</li>
<li><p>For faceted plots, data is no longer internally reordered. This makes it safer to feed data columns into <code><a href="../reference/aes.html">aes()</a></code> or into parameters of geoms or stats. However, doing so remains discouraged (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2694'>#2694</a>).</p></li>
<li><p><code><a href="../reference/ggsf.html">coord_sf()</a></code> now also understands the <code>clip</code> argument, just like the other coords (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2938'>#2938</a>).</p></li>
<li><p><code><a href="../reference/fortify.html">fortify()</a></code> now displays a more informative error message for <code>grouped_df()</code> objects when dplyr is not installed (<a href='https://github.com/jimhester'>@jimhester</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2822'>#2822</a>).</p></li>
<li><p>All <code>geom_*()</code> now display an informative error message when required aesthetics are missing (<a href='https://github.com/dpseidel'>@dpseidel</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2637'>#2637</a> and <a href='https://github.com/tidyverse/ggplot2/issues/2706'>#2706</a>).</p></li>
<li><p><code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code> now understands the <code>width</code> parameter even when used with a non-standard stat, such as <code><a href="../reference/stat_identity.html">stat_identity()</a></code> (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2893'>#2893</a>).</p></li>
<li><p><code><a href="../reference/geom_hex.html">geom_hex()</a></code> now understands the <code>size</code> and <code>linetype</code> aesthetics (<a href='https://github.com/mikmart'>@mikmart</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2488'>#2488</a>).</p></li>
<li><p><code><a href="../reference/geom_abline.html">geom_hline()</a></code>, <code><a href="../reference/geom_abline.html">geom_vline()</a></code>, and <code><a href="../reference/geom_abline.html">geom_abline()</a></code> now work properly with <code><a href="../reference/coord_trans.html">coord_trans()</a></code> (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2149'>#2149</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2812'>#2812</a>).</p></li>
<li><p><code><a href="../reference/geom_text.html">geom_text(..., parse = TRUE)</a></code> now correctly renders the expected number of items instead of silently dropping items that are empty expressions, e.g. the empty string "". If an expression spans multiple lines, we take just the first line and drop the rest. This same issue is also fixed for <code><a href="../reference/geom_text.html">geom_label()</a></code> and the axis labels for <code><a href="../reference/ggsf.html">geom_sf()</a></code> (<a href='https://github.com/slowkow'>@slowkow</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2867'>#2867</a>).</p></li>
<li><p><code><a href="../reference/ggsf.html">geom_sf()</a></code> now respects <code>lineend</code>, <code>linejoin</code>, and <code>linemitre</code> parameters for lines and polygons (<a href='https://github.com/alistaire47'>@alistaire47</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2826'>#2826</a>).</p></li>
<li><p><code><a href="../reference/ggsave.html">ggsave()</a></code> now exits without creating a new graphics device if previously none was open (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2363'>#2363</a>).</p></li>
<li><p><code><a href="../reference/labs.html">labs()</a></code> now has named arguments <code>title</code>, <code>subtitle</code>, <code>caption</code>, and <code>tag</code>. Also, <code><a href="../reference/labs.html">labs()</a></code> now accepts tidyeval (<a href='https://github.com/yutannihilation'>@yutannihilation</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2669'>#2669</a>).</p></li>
<li><p><code><a href="../reference/position_nudge.html">position_nudge()</a></code> is now more robust and nudges only in the direction requested. This enables, for example, the horizontal nudging of boxplots (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2733'>#2733</a>).</p></li>
<li><p><code><a href="../reference/sec_axis.html">sec_axis()</a></code> and <code><a href="../reference/sec_axis.html">dup_axis()</a></code> now return appropriate breaks for the secondary axis when applied to log transformed scales (<a href='https://github.com/dpseidel'>@dpseidel</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2729'>#2729</a>).</p></li>
<li><p><code><a href="../reference/sec_axis.html">sec_axis()</a></code> now works as expected when used in combination with tidy eval (<a href='https://github.com/dpseidel'>@dpseidel</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2788'>#2788</a>).</p></li>
<li><p><code>scale_*_date()</code>, <code>scale_*_time()</code> and <code>scale_*_datetime()</code> can now display a secondary axis that is a <strong>one-to-one</strong> transformation of the primary axis, implemented using the <code>sec.axis</code> argument to the scale constructor (<a href='https://github.com/dpseidel'>@dpseidel</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2244'>#2244</a>).</p></li>
<li><p><code><a href="../reference/geom_contour.html">stat_contour()</a></code>, <code><a href="../reference/geom_density_2d.html">stat_density2d()</a></code>, <code><a href="../reference/geom_bin2d.html">stat_bin2d()</a></code>, <code><a href="../reference/geom_hex.html">stat_binhex()</a></code> now calculate normalized statistics including <code>nlevel</code>, <code>ndensity</code>, and <code>ncount</code>. Also, <code><a href="../reference/geom_density.html">stat_density()</a></code> now includes the calculated statistic <code>nlevel</code>, an alias for <code>scaled</code>, to better match the syntax of <code><a href="../reference/geom_histogram.html">stat_bin()</a></code> (<a href='https://github.com/bjreisman'>@bjreisman</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2679'>#2679</a>).</p></li>
</ul>
</div>
</div>
    <div id="ggplot2-3-0-0" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-3-0-0" class="anchor"></a>ggplot2 3.0.0<small> 2018-07-03 </small>
</h1>
<div id="breaking-changes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-2" class="anchor"></a>Breaking changes</h2>
<ul>
<li>
<p>ggplot2 now supports/uses tidy evaluation (as described below). This is a major change and breaks a number of packages; we made this breaking change because it is important to make ggplot2 more programmable, and to be more consistent with the rest of the tidyverse. The best general (and detailed) introduction to tidy evaluation can be found in the meta programming chapters in <a href="https://adv-r.hadley.nz">Advanced R</a>.</p>
<p>The primary developer facing change is that <code><a href="../reference/aes.html">aes()</a></code> now contains quosures (expression + environment pairs) rather than symbols, and you’ll need to take a different approach to extracting the information you need. A common symptom of this change are errors “undefined columns selected” or “invalid ‘type’ (list) of argument” (<a href='https://github.com/tidyverse/ggplot2/issues/2610'>#2610</a>). As in the previous version, constants (like <code><a href="../reference/aes.html">aes(x = 1)</a></code> or <code><a href="../reference/aes.html">aes(colour = "smoothed")</a></code>) are stored as is.</p>
<p>In this version of ggplot2, if you need to describe a mapping in a string, use <code><a href="../reference/tidyeval.html">quo_name()</a></code> (to generate single-line strings; longer expressions may be abbreviated) or <code>quo_text()</code> (to generate non-abbreviated strings that may span multiple lines). If you do need to extract the value of a variable instead use <code><a href="https://rlang.r-lib.org/reference/eval_tidy.html">rlang::eval_tidy()</a></code>. You may want to condition on <code>(packageVersion("ggplot2") &lt;= "2.2.1")</code> so that your code can work with both released and development versions of ggplot2.</p>
<p>We recognise that this is a big change and if you’re not already familiar with rlang, there’s a lot to learn. If you are stuck, or need any help, please reach out on <a href="https://community.rstudio.com" class="uri">https://community.rstudio.com</a>.</p>
</li>
<li>
<p>Error: Column <code>y</code> must be a 1d atomic vector or a list</p>
<p>Internally, ggplot2 now uses <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame(tibble::as_tibble(x))</a></code> to convert a list into a data frame. This improves ggplot2’s support for list-columns (needed for sf support), at a small cost: you can no longer use matrix-columns. Note that unlike tibble we still allow column vectors such as returned by <code><a href="https://rdrr.io/r/base/scale.html">base::scale()</a></code> because of their widespread use.</p>
</li>
<li>
<p>Error: More than one expression parsed</p>
<p>Previously <code><a href="../reference/aes_.html">aes_string(x = c("a", "b", "c"))</a></code> silently returned <code><a href="../reference/aes.html">aes(x = a)</a></code>. Now this is a clear error.</p>
</li>
<li>
<p>Error: <code>data</code> must be uniquely named but has duplicate columns</p>
<p>If layer data contains columns with identical names an error will be thrown. In earlier versions the first occuring column was chosen silently, potentially masking that the wrong data was chosen.</p>
</li>
<li>
<p>Error: Aesthetics must be either length 1 or the same as the data</p>
<p>Layers are stricter about the columns they will combine into a single data frame. Each aesthetic now must be either the same length as the data frame or a single value. This makes silent recycling errors much less likely.</p>
</li>
<li>
<p>Error: <code>coord_*</code> doesn’t support free scales</p>
<p>Free scales only work with selected coordinate systems; previously you’d get an incorrect plot.</p>
</li>
<li>
<p>Error in f(…) : unused argument (range = c(0, 1))</p>
<p>This is because the <code>oob</code> argument to scale has been set to a function that only takes a single argument; it needs to take two arguments (<code>x</code>, and <code>range</code>).</p>
</li>
<li>
<p>Error: unused argument (output)</p>
<p>The function <code><a href="../reference/guide-exts.html">guide_train()</a></code> now has an optional parameter <code>aesthetic</code> that allows you to override the <code>aesthetic</code> setting in the scale. To make your code work with the both released and development versions of ggplot2 appropriate, add <code>aesthetic = NULL</code> to the <code><a href="../reference/guide-exts.html">guide_train()</a></code> method signature.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># old</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">guide_train.legend &lt;-<span class="st"> </span><span class="cf">function</span>(guide, scale) {...}</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># new </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">guide_train.legend &lt;-<span class="st"> </span><span class="cf">function</span>(guide, scale, <span class="dt">aesthetic =</span> <span class="ot">NULL</span>) {...}</a></code></pre></div>
<p>Then, inside the function, replace <code>scale$aesthetics[1]</code>, <code>aesthetic %||% scale$aesthetics[1]</code>. (The %||% operator is defined in the rlang package).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># old</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(scale<span class="op">$</span><span class="kw">map</span>(breaks)), scale<span class="op">$</span>aesthetics[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># new</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(scale<span class="op">$</span><span class="kw">map</span>(breaks)), aesthetic <span class="op">%||%</span><span class="st"> </span>scale<span class="op">$</span>aesthetics[<span class="dv">1</span>])</a></code></pre></div>
</li>
<li><p>The long-deprecated <code>subset</code> argument to <code><a href="../reference/layer.html">layer()</a></code> has been removed.</p></li>
</ul>
</div>
<div id="tidy-evaluation" class="section level2">
<h2 class="hasAnchor">
<a href="#tidy-evaluation" class="anchor"></a>Tidy evaluation</h2>
<ul>
<li><p><code><a href="../reference/aes.html">aes()</a></code> now supports quasiquotation so that you can use <code>!!</code>, <code>!!!</code>, and <code>:=</code>. This replaces <code><a href="../reference/aes_.html">aes_()</a></code> and <code><a href="../reference/aes_.html">aes_string()</a></code> which are now soft-deprecated (but will remain around for a long time).</p></li>
<li>
<p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> and <code><a href="../reference/facet_grid.html">facet_grid()</a></code> now support <code><a href="../reference/vars.html">vars()</a></code> inputs. Like <code><a href="https://dplyr.tidyverse.org/reference/vars.html">dplyr::vars()</a></code>, this helper quotes its inputs and supports quasiquotation. For instance, you can now supply faceting variables like this: <code><a href="../reference/facet_wrap.html">facet_wrap(vars(am, cyl))</a></code> instead of <code><a href="../reference/facet_wrap.html">facet_wrap(~am + cyl)</a></code>. Note that the formula interface is not going away and will not be deprecated. <code><a href="../reference/vars.html">vars()</a></code> is simply meant to make it easier to create functions around <code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> and <code><a href="../reference/facet_grid.html">facet_grid()</a></code>.</p>
<p>The first two arguments of <code><a href="../reference/facet_grid.html">facet_grid()</a></code> become <code>rows</code> and <code>cols</code> and now support <code><a href="../reference/vars.html">vars()</a></code> inputs. Note however that we took special care to ensure complete backward compatibility. With this change <code><a href="../reference/facet_grid.html">facet_grid(vars(cyl), vars(am, vs))</a></code> is equivalent to <code><a href="../reference/facet_grid.html">facet_grid(cyl ~ am + vs)</a></code>, and <code><a href="../reference/facet_grid.html">facet_grid(cols = vars(am, vs))</a></code> is equivalent to <code><a href="../reference/facet_grid.html">facet_grid(. ~ am + vs)</a></code>.</p>
<p>One nice aspect of the new interface is that you can now easily supply names: <code><a href="../reference/facet_grid.html">facet_grid(vars(Cylinder = cyl), labeller = label_both)</a></code> will give nice label titles to the facets. Of course, those names can be unquoted with the usual tidy eval syntax.</p>
</li>
</ul>
<div id="sf" class="section level3">
<h3 class="hasAnchor">
<a href="#sf" class="anchor"></a>sf</h3>
<ul>
<li>
<p>ggplot2 now has full support for sf with <code><a href="../reference/ggsf.html">geom_sf()</a></code> and <code><a href="../reference/ggsf.html">coord_sf()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">nc &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_read</span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"shape/nc.shp"</span>, <span class="dt">package =</span> <span class="st">"sf"</span>), <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="../reference/ggplot.html">ggplot</a></span>(nc) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="../reference/aes.html">aes</a></span>(<span class="dt">fill =</span> AREA))</a></code></pre></div>
<p>It supports all simple features, automatically aligns CRS across layers, sets up the correct aspect ratio, and draws a graticule.</p>
</li>
</ul>
</div>
</div>
<div id="new-features-2" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-2" class="anchor"></a>New features</h2>
<ul>
<li><p>ggplot2 now works on R 3.1 onwards, and uses the <a href="https://github.com/lionel-/vdiffr">vdiffr</a> package for visual testing.</p></li>
<li><p>In most cases, accidentally using <code>%&gt;%</code> instead of <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> will generate an informative error (<a href='https://github.com/tidyverse/ggplot2/issues/2400'>#2400</a>).</p></li>
<li>
<p>New syntax for calculated aesthetics. Instead of using <code><a href="../reference/aes.html">aes(y = ..count..)</a></code> you can (and should!) use <code><a href="../reference/aes.html">aes(y = stat(count))</a></code>. <code><a href="../reference/stat.html">stat()</a></code> is a real function with documentation which hopefully will make this part of ggplot2 less confusing (<a href='https://github.com/tidyverse/ggplot2/issues/2059'>#2059</a>).</p>
<p><code><a href="../reference/stat.html">stat()</a></code> is particularly nice for more complex calculations because you only need to specify it once: <code><a href="../reference/aes.html">aes(y = stat(count / max(count)))</a></code>, rather than <code><a href="../reference/aes.html">aes(y = ..count.. / max(..count..))</a></code></p>
</li>
<li><p>New <code>tag</code> label for adding identification tags to plots, typically used for labelling a subplot with a letter. Add a tag with <code><a href="../reference/labs.html">labs(tag = "A")</a></code>, style it with the <code>plot.tag</code> theme element, and control position with the <code>plot.tag.position</code> theme setting (<a href='https://github.com/thomasp85'>@thomasp85</a>).</p></li>
</ul>
<div id="layers-geoms-stats-and-position-adjustments" class="section level3">
<h3 class="hasAnchor">
<a href="#layers-geoms-stats-and-position-adjustments" class="anchor"></a>Layers: geoms, stats, and position adjustments</h3>
<ul>
<li><p><code><a href="../reference/geom_segment.html">geom_segment()</a></code> and <code><a href="../reference/geom_segment.html">geom_curve()</a></code> have a new <code>arrow.fill</code> parameter which allows you to specify a separate fill colour for closed arrowheads (<a href='https://github.com/hrbrmstr'>@hrbrmstr</a> and <a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2375'>#2375</a>).</p></li>
<li><p><code><a href="../reference/geom_point.html">geom_point()</a></code> and friends can now take shapes as strings instead of integers, e.g. <code><a href="../reference/geom_point.html">geom_point(shape = "diamond")</a></code> (<a href='https://github.com/daniel-barnett'>@daniel-barnett</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2075'>#2075</a>).</p></li>
<li><p><code><a href="../reference/position_dodge.html">position_dodge()</a></code> gains a <code>preserve</code> argument that allows you to control whether the <code>total</code> width at each <code>x</code> value is preserved (the current default), or ensure that the width of a <code>single</code> element is preserved (what many people want) (<a href='https://github.com/tidyverse/ggplot2/issues/1935'>#1935</a>).</p></li>
<li>
<p>New <code><a href="../reference/position_dodge.html">position_dodge2()</a></code> provides enhanced dodging for boxplots. Compared to <code><a href="../reference/position_dodge.html">position_dodge()</a></code>, <code><a href="../reference/position_dodge.html">position_dodge2()</a></code> compares <code>xmin</code> and <code>xmax</code> values<br>
to determine which elements overlap, and spreads overlapping elements evenly within the region of overlap. <code><a href="../reference/position_dodge.html">position_dodge2()</a></code> is now the default position adjustment for <code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code>, because it handles <code>varwidth = TRUE</code>, and will be considered for other geoms in the future.</p>
<p>The <code>padding</code> parameter adds a small amount of padding between elements (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2143'>#2143</a>) and a <code>reverse</code> parameter allows you to reverse the order of placement (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2171'>#2171</a>).</p>
</li>
<li><p>New <code><a href="../reference/geom_qq.html">stat_qq_line()</a></code> makes it easy to add a simple line to a Q-Q plot, which makes it easier to judge the fit of the theoretical distribution (<a href='https://github.com/nicksolomon'>@nicksolomon</a>).</p></li>
</ul>
</div>
<div id="scales-and-guides" class="section level3">
<h3 class="hasAnchor">
<a href="#scales-and-guides" class="anchor"></a>Scales and guides</h3>
<ul>
<li><p>Improved support for mapping date/time variables to <code>alpha</code>, <code>size</code>, <code>colour</code>, and <code>fill</code> aesthetics, including <code>date_breaks</code> and <code>date_labels</code> arguments (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1526'>#1526</a>), and new <code><a href="../reference/scale_alpha.html">scale_alpha()</a></code> variants (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1526'>#1526</a>).</p></li>
<li><p>Improved support for ordered factors. Ordered factors throw a warning when mapped to shape (unordered factors do not), and do not throw warnings when mapped to size or alpha (unordered factors do). Viridis is used as the default colour and fill scale for ordered factors (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1526'>#1526</a>).</p></li>
<li>
<p>The <code>expand</code> argument of <code>scale_*_continuous()</code> and <code>scale_*_discrete()</code> now accepts separate expansion values for the lower and upper range limits. The expansion limits can be specified using the convenience function <code><a href="../reference/expand_scale.html">expand_scale()</a></code>.</p>
<p>Separate expansion limits may be useful for bar charts, e.g. if one wants the bottom of the bars to be flush with the x axis but still leave some (automatically calculated amount of) space above them:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/ggplot.html">ggplot</a></span>(mtcars) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="../reference/geom_bar.html">geom_bar</a></span>(<span class="kw"><a href="../reference/aes.html">aes</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(cyl))) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="../reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="dt">expand =</span> <span class="kw"><a href="../reference/expand_scale.html">expand_scale</a></span>(<span class="dt">mult =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="fl">.1</span>)))</a></code></pre></div>
<p>It can also be useful for line charts, e.g. for counts over time, where one wants to have a ’hard’ lower limit of y = 0 but leave the upper limit unspecified (and perhaps differing between panels), with some extra space above the highest point on the line (with symmetrical limits, the extra space above the highest point could in some cases cause the lower limit to be negative).</p>
<p>The old syntax for the <code>expand</code> argument will, of course, continue to work (<a href='https://github.com/huftis'>@huftis</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1669'>#1669</a>).</p>
</li>
<li><p><code><a href="../reference/scale_colour_continuous.html">scale_colour_continuous()</a></code> and <code><a href="../reference/scale_gradient.html">scale_colour_gradient()</a></code> are now controlled by global options <code>ggplot2.continuous.colour</code> and <code>ggplot2.continuous.fill</code>. These can be set to <code>"gradient"</code> (the default) or <code>"viridis"</code> (<a href='https://github.com/karawoo'>@karawoo</a>).</p></li>
<li><p>New <code><a href="../reference/scale_viridis.html">scale_colour_viridis_c()</a></code>/<code><a href="../reference/scale_viridis.html">scale_fill_viridis_c()</a></code> (continuous) and <code><a href="../reference/scale_viridis.html">scale_colour_viridis_d()</a></code>/<code><a href="../reference/scale_viridis.html">scale_fill_viridis_d()</a></code> (discrete) make it easy to use Viridis colour scales (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1526'>#1526</a>).</p></li>
<li><p>Guides for <code><a href="../reference/geom_text.html">geom_text()</a></code> now accept custom labels with <code><a href="../reference/guide_legend.html">guide_legend(override.aes = list(label = "foo"))</a></code> (<a href='https://github.com/brianwdavis'>@brianwdavis</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2458'>#2458</a>).</p></li>
</ul>
</div>
<div id="margins" class="section level3">
<h3 class="hasAnchor">
<a href="#margins" class="anchor"></a>Margins</h3>
<ul>
<li><p>Strips gain margins on all sides by default. This means that to fully justify text to the edge of a strip, you will need to also set the margins to 0 (<a href='https://github.com/karawoo'>@karawoo</a>).</p></li>
<li><p>Rotated strip labels now correctly understand <code>hjust</code> and <code>vjust</code> parameters at all angles (<a href='https://github.com/karawoo'>@karawoo</a>).</p></li>
<li><p>Strip labels now understand justification relative to the direction of the text, meaning that in y facets, the strip text can be placed at either end of the strip using <code>hjust</code> (<a href='https://github.com/karawoo'>@karawoo</a>).</p></li>
<li><p>Legend titles and labels get a little extra space around them, which prevents legend titles from overlapping the legend at large font sizes (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1881'>#1881</a>).</p></li>
</ul>
</div>
</div>
<div id="extension-points" class="section level2">
<h2 class="hasAnchor">
<a href="#extension-points" class="anchor"></a>Extension points</h2>
<ul>
<li><p>New <code><a href="../reference/autolayer.html">autolayer()</a></code> S3 generic (<a href='https://github.com/mitchelloharawild'>@mitchelloharawild</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1974'>#1974</a>). This is similar to <code><a href="../reference/autoplot.html">autoplot()</a></code> but produces layers rather than complete plots.</p></li>
<li><p>Custom objects can now be added using <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> if a <code>ggplot_add</code> method has been defined for the class of the object (<a href='https://github.com/thomasp85'>@thomasp85</a>).</p></li>
<li><p>Theme elements can now be subclassed. Add a <code>merge_element</code> method to control how properties are inherited from the parent element. Add an <code>element_grob</code> method to define how elements are rendered into grobs (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1981'>#1981</a>).</p></li>
<li>
<p>Coords have gained new extension mechanisms.</p>
<p>If you have an existing coord extension, you will need to revise the specification of the <code>train()</code> method. It is now called <code>setup_panel_params()</code> (better reflecting what it actually does) and now has arguments <code>scale_x</code>, and <code>scale_y</code> (the x and y scales respectively) and <code>param</code>, a list of plot specific parameters generated by <code>setup_params()</code>.</p>
<p>What was formerly called <code>scale_details</code> (in coords), <code>panel_ranges</code> (in layout) and <code>panel_scales</code> (in geoms) are now consistently called <code>panel_params</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1311'>#1311</a>). These are parameters of the coord that vary from panel to panel.</p>
</li>
<li><p><code><a href="../reference/ggplot_build.html">ggplot_build()</a></code> and <code><a href="../reference/ggplot_gtable.html">ggplot_gtable()</a></code> are now generics, so ggplot-subclasses can define additional behavior during the build stage.</p></li>
<li><p><code><a href="../reference/guide-exts.html">guide_train()</a></code>, <code><a href="../reference/guide-exts.html">guide_merge()</a></code>, <code><a href="../reference/guide-exts.html">guide_geom()</a></code>, and <code><a href="../reference/guide-exts.html">guide_gengrob()</a></code> are now exported as they are needed if you want to design your own guide. They are not currently documented; use at your own risk (<a href='https://github.com/tidyverse/ggplot2/issues/2528'>#2528</a>).</p></li>
<li><p><code><a href="../reference/scale_type.html">scale_type()</a></code> generic is now exported and documented. Use this if you want to extend ggplot2 to work with a new type of vector.</p></li>
</ul>
</div>
<div id="minor-bug-fixes-and-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-bug-fixes-and-improvements" class="anchor"></a>Minor bug fixes and improvements</h2>
<div id="faceting" class="section level3">
<h3 class="hasAnchor">
<a href="#faceting" class="anchor"></a>Faceting</h3>
<ul>
<li><p><code><a href="../reference/facet_grid.html">facet_grid()</a></code> gives a more informative error message if you try to use a variable in both rows and cols (<a href='https://github.com/tidyverse/ggplot2/issues/1928'>#1928</a>).</p></li>
<li><p><code><a href="../reference/facet_grid.html">facet_grid()</a></code> and <code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> both give better error messages if you attempt to use an unsupported coord with free scales (<a href='https://github.com/tidyverse/ggplot2/issues/2049'>#2049</a>).</p></li>
<li><p><code><a href="../reference/labellers.html">label_parsed()</a></code> works once again (<a href='https://github.com/tidyverse/ggplot2/issues/2279'>#2279</a>).</p></li>
<li><p>You can now style the background of horizontal and vertical strips independently with <code>strip.background.x</code> and <code>strip.background.y</code> theme settings (<a href='https://github.com/tidyverse/ggplot2/issues/2249'>#2249</a>).</p></li>
</ul>
</div>
<div id="scales" class="section level3">
<h3 class="hasAnchor">
<a href="#scales" class="anchor"></a>Scales</h3>
<ul>
<li><p><code><a href="../reference/discrete_scale.html">discrete_scale()</a></code> documentation now inherits shared definitions from <code><a href="../reference/continuous_scale.html">continuous_scale()</a></code> (<a href='https://github.com/alistaire47'>@alistaire47</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2052'>#2052</a>).</p></li>
<li><p><code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code> shows all colours of the scale (<a href='https://github.com/has2k1'>@has2k1</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2343'>#2343</a>).</p></li>
<li><p><code>scale_identity()</code> once again produces legends by default (<a href='https://github.com/tidyverse/ggplot2/issues/2112'>#2112</a>).</p></li>
<li><p>Tick marks for secondary axes with strong transformations are more accurately placed (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1992'>#1992</a>).</p></li>
<li><p>Missing line types now reliably generate missing lines (with standard warning) (<a href='https://github.com/tidyverse/ggplot2/issues/2206'>#2206</a>).</p></li>
<li><p>Legends now ignore set aesthetics that are not length one (<a href='https://github.com/tidyverse/ggplot2/issues/1932'>#1932</a>).</p></li>
<li><p>All colour and fill scales now have an <code>aesthetics</code> argument that can be used to set the aesthetic(s) the scale works with. This makes it possible to apply a colour scale to both colour and fill aesthetics at the same time, via <code>aesthetics = c("colour", "fill")</code> (<a href='https://github.com/clauswilke'>@clauswilke</a>).</p></li>
<li><p>Three new generic scales work with any aesthetic or set of aesthetics: <code><a href="../reference/scale_identity.html">scale_continuous_identity()</a></code>, <code><a href="../reference/scale_identity.html">scale_discrete_identity()</a></code>, and <code><a href="../reference/scale_manual.html">scale_discrete_manual()</a></code> (<a href='https://github.com/clauswilke'>@clauswilke</a>).</p></li>
<li><p><code>scale_*_gradient2()</code> now consistently omits points outside limits by rescaling after the limits are enforced (<a href='https://github.com/foo-bar-baz-qux'>@foo-bar-baz-qux</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2230'>#2230</a>).</p></li>
</ul>
</div>
<div id="layers" class="section level3">
<h3 class="hasAnchor">
<a href="#layers" class="anchor"></a>Layers</h3>
<ul>
<li><p><code><a href="../reference/geom_text.html">geom_label()</a></code> now correctly produces unbordered labels when <code>label.size</code> is 0, even when saving to PDF (<a href='https://github.com/bfgray3'>@bfgray3</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2407'>#2407</a>).</p></li>
<li><p><code><a href="../reference/layer.html">layer()</a></code> gives considerably better error messages for incorrectly specified <code>geom</code>, <code>stat</code>, or <code>position</code> (<a href='https://github.com/tidyverse/ggplot2/issues/2401'>#2401</a>).</p></li>
<li><p>In all layers that use it, <code>linemitre</code> now defaults to 10 (instead of 1) to better match base R.</p></li>
<li><p><code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code> now supplies a default value if no <code>x</code> aesthetic is present (<a href='https://github.com/foo-bar-baz-qux'>@foo-bar-baz-qux</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2110'>#2110</a>).</p></li>
<li><p><code><a href="../reference/geom_density.html">geom_density()</a></code> drops groups with fewer than two data points and throws a warning. For groups with two data points, density values are now calculated with <code><a href="https://rdrr.io/r/stats/density.html">stats::density</a></code> (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2127'>#2127</a>).</p></li>
<li><p><code><a href="../reference/geom_segment.html">geom_segment()</a></code> now also takes a <code>linejoin</code> parameter. This allows more control over the appearance of the segments, which is especially useful for plotting thick arrows (<a href='https://github.com/Ax3man'>@Ax3man</a>, <a href='https://github.com/tidyverse/ggplot2/issues/774'>#774</a>).</p></li>
<li><p><code><a href="../reference/geom_smooth.html">geom_smooth()</a></code> now reports the formula used when <code>method = "auto"</code> (<a href='https://github.com/davharris'>@davharris</a> <a href='https://github.com/tidyverse/ggplot2/issues/1951'>#1951</a>). <code><a href="../reference/geom_smooth.html">geom_smooth()</a></code> now orders by the <code>x</code> aesthetic, making it easier to pass pre-computed values without manual ordering (<a href='https://github.com/izahn'>@izahn</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2028'>#2028</a>). It also now knows it has <code>ymin</code> and <code>ymax</code> aesthetics (<a href='https://github.com/tidyverse/ggplot2/issues/1939'>#1939</a>). The legend correctly reflects the status of the <code>se</code> argument when used with stats other than the default (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1546'>#1546</a>).</p></li>
<li><p><code><a href="../reference/geom_tile.html">geom_tile()</a></code> now once again interprets <code>width</code> and <code>height</code> correctly (<a href='https://github.com/malcolmbarrett'>@malcolmbarrett</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2510'>#2510</a>).</p></li>
<li><p><code><a href="../reference/position_jitter.html">position_jitter()</a></code> and <code><a href="../reference/position_jitterdodge.html">position_jitterdodge()</a></code> gain a <code>seed</code> argument that allows the specification of a random seed for reproducible jittering (<a href='https://github.com/krlmlr'>@krlmlr</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1996'>#1996</a> and <a href='https://github.com/slowkow'>@slowkow</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2445'>#2445</a>).</p></li>
<li><p><code><a href="../reference/geom_density.html">stat_density()</a></code> has better behaviour if all groups are dropped because they are too small (<a href='https://github.com/tidyverse/ggplot2/issues/2282'>#2282</a>).</p></li>
<li><p><code><a href="../reference/stat_summary.html">stat_summary_bin()</a></code> now understands the <code>breaks</code> parameter (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2214'>#2214</a>).</p></li>
<li><p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> now accepts functions for <code>binwidth</code>. This allows better binning when faceting along variables with different ranges (<a href='https://github.com/botanize'>@botanize</a>).</p></li>
<li><p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> and <code><a href="../reference/geom_histogram.html">geom_histogram()</a></code> now sum correctly when using the <code>weight</code> aesthetic (<a href='https://github.com/jiho'>@jiho</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1921'>#1921</a>).</p></li>
<li><p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> again uses correct scaling for the computed variable <code>ndensity</code> (<a href='https://github.com/timgoodman'>@timgoodman</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2324'>#2324</a>).</p></li>
<li><p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> and <code><a href="../reference/geom_bin2d.html">stat_bin_2d()</a></code> now properly handle the <code>breaks</code> parameter when the scales are transformed (<a href='https://github.com/has2k1'>@has2k1</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2366'>#2366</a>).</p></li>
<li><p><code><a href="../reference/update_defaults.html">update_geom_defaults()</a></code> and <code><a href="../reference/update_defaults.html">update_stat_defaults()</a></code> allow American spelling of aesthetic parameters (<a href='https://github.com/foo-bar-baz-qux'>@foo-bar-baz-qux</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2299'>#2299</a>).</p></li>
<li><p>The <code>show.legend</code> parameter now accepts a named logical vector to hide/show only some aesthetics in the legend (<a href='https://github.com/tutuchan'>@tutuchan</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1798'>#1798</a>).</p></li>
<li><p>Layers now silently ignore unknown aesthetics with value <code>NULL</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1909'>#1909</a>).</p></li>
</ul>
</div>
<div id="coords" class="section level3">
<h3 class="hasAnchor">
<a href="#coords" class="anchor"></a>Coords</h3>
<ul>
<li><p>Clipping to the plot panel is now configurable, through a <code>clip</code> argument to coordinate systems, e.g. <code><a href="../reference/coord_cartesian.html">coord_cartesian(clip = "off")</a></code> (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2536'>#2536</a>).</p></li>
<li><p>Like scales, coordinate systems now give you a message when you’re replacing an existing coordinate system (<a href='https://github.com/tidyverse/ggplot2/issues/2264'>#2264</a>).</p></li>
<li><p><code><a href="../reference/coord_polar.html">coord_polar()</a></code> now draws secondary axis ticks and labels (<a href='https://github.com/dylan-stark'>@dylan-stark</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2072'>#2072</a>), and can draw the radius axis on the right (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2005'>#2005</a>).</p></li>
<li><p><code><a href="../reference/coord_trans.html">coord_trans()</a></code> now generates a warning when a transformation generates non-finite values (<a href='https://github.com/foo-bar-baz-qux'>@foo-bar-baz-qux</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2147'>#2147</a>).</p></li>
</ul>
</div>
<div id="themes" class="section level3">
<h3 class="hasAnchor">
<a href="#themes" class="anchor"></a>Themes</h3>
<ul>
<li><p>Complete themes now always override all elements of the default theme (<a href='https://github.com/has2k1'>@has2k1</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2058'>#2058</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2079'>#2079</a>).</p></li>
<li><p>Themes now set default grid colour in <code>panel.grid</code> rather than individually in <code>panel.grid.major</code> and <code>panel.grid.minor</code> individually. This makes it slightly easier to customise the theme (<a href='https://github.com/tidyverse/ggplot2/issues/2352'>#2352</a>).</p></li>
<li><p>Fixed bug when setting strips to <code><a href="../reference/element.html">element_blank()</a></code> (<a href='https://github.com/thomasp85'>@thomasp85</a>).</p></li>
<li><p>Axes positioned on the top and to the right can now customize their ticks and lines separately (<a href='https://github.com/thomasp85'>@thomasp85</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1899'>#1899</a>).</p></li>
<li><p>Built-in themes gain parameters <code>base_line_size</code> and <code>base_rect_size</code> which control the default sizes of line and rectangle elements (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2176'>#2176</a>).</p></li>
<li><p>Default themes use <code><a href="../reference/element.html">rel()</a></code> to set line widths (<a href='https://github.com/baptiste'>@baptiste</a>).</p></li>
<li><p>Themes were tweaked for visual consistency and more graceful behavior when changing the base font size. All absolute heights or widths were replaced with heights or widths that are proportional to the base font size. One relative font size was eliminated (<a href='https://github.com/clauswilke'>@clauswilke</a>).</p></li>
<li><p>The height of descenders is now calculated solely on font metrics and doesn’t change with the specific letters in the string. This fixes minor alignment issues with plot titles, subtitles, and legend titles (<a href='https://github.com/tidyverse/ggplot2/issues/2288'>#2288</a>, <a href='https://github.com/clauswilke'>@clauswilke</a>).</p></li>
</ul>
</div>
<div id="guides" class="section level3">
<h3 class="hasAnchor">
<a href="#guides" class="anchor"></a>Guides</h3>
<ul>
<li><p><code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code> is more configurable: tick marks and color bar frame can now by styled with arguments <code>ticks.colour</code>, <code>ticks.linewidth</code>, <code>frame.colour</code>, <code>frame.linewidth</code>, and <code>frame.linetype</code> (<a href='https://github.com/clauswilke'>@clauswilke</a>).</p></li>
<li><p><code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code> now uses <code>legend.spacing.x</code> and <code>legend.spacing.y</code> correctly, and it can handle multi-line titles. Minor tweaks were made to <code><a href="../reference/guide_legend.html">guide_legend()</a></code> to make sure the two legend functions behave as similarly as possible (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2397'>#2397</a> and <a href='https://github.com/tidyverse/ggplot2/issues/2398'>#2398</a>).</p></li>
<li><p>The theme elements <code>legend.title</code> and <code>legend.text</code> now respect the settings of <code>margin</code>, <code>hjust</code>, and <code>vjust</code> (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2465'>#2465</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1502'>#1502</a>).</p></li>
<li><p>Non-angle parameters of <code>label.theme</code> or <code>title.theme</code> can now be set in <code><a href="../reference/guide_legend.html">guide_legend()</a></code> and <code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code> (<a href='https://github.com/clauswilke'>@clauswilke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2544'>#2544</a>).</p></li>
</ul>
</div>
<div id="other" class="section level3">
<h3 class="hasAnchor">
<a href="#other" class="anchor"></a>Other</h3>
<ul>
<li><p><code><a href="../reference/fortify.html">fortify()</a></code> gains a method for tbls (<a href='https://github.com/karawoo'>@karawoo</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2218'>#2218</a>).</p></li>
<li><p><code>ggplot</code> gains a method for <code>grouped_df</code>s that adds a <code>.group</code> variable, which computes a unique value for each group. Use it with <code><a href="../reference/aes.html">aes(group = .group)</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/2351'>#2351</a>).</p></li>
<li><p><code><a href="../reference/ggproto.html">ggproto()</a></code> produces objects with class <code><a href="https://rdrr.io/r/base/c.html">c("ggproto", "gg")</a></code>, allowing for a more informative error message when adding layers, scales, or other ggproto objects (<a href='https://github.com/jrnold'>@jrnold</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2056'>#2056</a>).</p></li>
<li><p><code><a href="../reference/ggsave.html">ggsave()</a></code>’s DPI argument now supports 3 string options: “retina” (320 DPI), “print” (300 DPI), and “screen” (72 DPI) (<a href='https://github.com/foo-bar-baz-qux'>@foo-bar-baz-qux</a>, <a href='https://github.com/tidyverse/ggplot2/issues/2156'>#2156</a>). <code><a href="../reference/ggsave.html">ggsave()</a></code> now uses full argument names to avoid partial match warnings (<a href='https://github.com/tidyverse/ggplot2/issues/2355'>#2355</a>), and correctly restores the previous graphics device when several graphics devices are open (<a href='https://github.com/tidyverse/ggplot2/issues/2363'>#2363</a>).</p></li>
<li><p><code><a href="../reference/print.ggplot.html">print.ggplot()</a></code> now returns the original ggplot object, instead of the output from <code><a href="../reference/ggplot_build.html">ggplot_build()</a></code>. Also, the object returned from <code><a href="../reference/ggplot_build.html">ggplot_build()</a></code> now has the class <code>"ggplot_built"</code> (<a href='https://github.com/tidyverse/ggplot2/issues/2034'>#2034</a>).</p></li>
<li><p><code><a href="../reference/map_data.html">map_data()</a></code> now works even when purrr is loaded (tidyverse<a href='https://github.com/tidyverse/ggplot2/issues/66'>#66</a>).</p></li>
<li><p>New functions <code><a href="../reference/summarise_plot.html">summarise_layout()</a></code>, <code><a href="../reference/summarise_plot.html">summarise_coord()</a></code>, and <code><a href="../reference/summarise_plot.html">summarise_layers()</a></code> summarise the layout, coordinate systems, and layers of a built ggplot object (<a href='https://github.com/tidyverse/ggplot2/issues/2034'>#2034</a>, <a href='https://github.com/wch'>@wch</a>). This provides a tested API that (e.g.) shiny can depend on.</p></li>
<li><p>Updated startup messages reflect new resources (<a href='https://github.com/tidyverse/ggplot2/issues/2410'>#2410</a>, <a href='https://github.com/mine-cetinkaya-rundel'>@mine-cetinkaya-rundel</a>).</p></li>
</ul>
</div>
</div>
</div>
    <div id="ggplot2-2-2-1" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-2-2-1" class="anchor"></a>ggplot2 2.2.1<small> 2016-12-30 </small>
</h1>
<ul>
<li>Fix usage of <code><a href="https://rdrr.io/r/base/structure.html">structure(NULL)</a></code> for R-devel compatibility (<a href='https://github.com/tidyverse/ggplot2/issues/1968'>#1968</a>).</li>
</ul>
</div>
    <div id="ggplot2-2-2-0" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-2-2-0" class="anchor"></a>ggplot2 2.2.0<small> 2016-11-11 </small>
</h1>
<div id="major-new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#major-new-features" class="anchor"></a>Major new features</h2>
<div id="subtitle-and-caption" class="section level3">
<h3 class="hasAnchor">
<a href="#subtitle-and-caption" class="anchor"></a>Subtitle and caption</h3>
<p>Thanks to <a href='https://github.com/hrbrmstr'>@hrbrmstr</a> plots now have subtitles and captions, which can be set with the <code>subtitle</code> and <code>caption</code> arguments to <code><a href="../reference/labs.html">ggtitle()</a></code> and <code><a href="../reference/labs.html">labs()</a></code>. You can control their appearance with the theme settings <code>plot.caption</code> and <code>plot.subtitle</code>. The main plot title is now left-aligned to better work better with a subtitle. The caption is right-aligned (<a href='https://github.com/hrbrmstr'>@hrbrmstr</a>).</p>
</div>
<div id="stacking" class="section level3">
<h3 class="hasAnchor">
<a href="#stacking" class="anchor"></a>Stacking</h3>
<p><code><a href="../reference/position_stack.html">position_stack()</a></code> and <code><a href="../reference/position_stack.html">position_fill()</a></code> now sort the stacking order to match grouping order. This allows you to control the order through grouping, and ensures that the default legend matches the plot (<a href='https://github.com/tidyverse/ggplot2/issues/1552'>#1552</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1593'>#1593</a>). If you want the opposite order (useful if you have horizontal bars and horizontal legend), you can request reverse stacking by using <code>position = position_stack(reverse = TRUE)</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1837'>#1837</a>).</p>
<p><code><a href="../reference/position_stack.html">position_stack()</a></code> and <code><a href="../reference/position_stack.html">position_fill()</a></code> now accepts negative values which will create stacks extending below the x-axis (<a href='https://github.com/tidyverse/ggplot2/issues/1691'>#1691</a>).</p>
<p><code><a href="../reference/position_stack.html">position_stack()</a></code> and <code><a href="../reference/position_stack.html">position_fill()</a></code> gain a <code>vjust</code> argument which makes it easy to (e.g.) display labels in the middle of stacked bars (<a href='https://github.com/tidyverse/ggplot2/issues/1821'>#1821</a>).</p>
</div>
<div id="layers-1" class="section level3">
<h3 class="hasAnchor">
<a href="#layers-1" class="anchor"></a>Layers</h3>
<p><code><a href="../reference/geom_bar.html">geom_col()</a></code> was added to complement <code><a href="../reference/geom_bar.html">geom_bar()</a></code> (<a href='https://github.com/hrbrmstr'>@hrbrmstr</a>). It uses <code>stat="identity"</code> by default, making the <code>y</code> aesthetic mandatory. It does not support any other <code>stat_()</code> and does not provide fallback support for the <code>binwidth</code> parameter. Examples and references in other functions were updated to demonstrate <code><a href="../reference/geom_bar.html">geom_col()</a></code> usage.</p>
<p>When creating a layer, ggplot2 will warn if you use an unknown aesthetic or an unknown parameter. Compared to the previous version, this is stricter for aesthetics (previously there was no message), and less strict for parameters (previously this threw an error) (<a href='https://github.com/tidyverse/ggplot2/issues/1585'>#1585</a>).</p>
</div>
<div id="facetting" class="section level3">
<h3 class="hasAnchor">
<a href="#facetting" class="anchor"></a>Facetting</h3>
<p>The facet system, as well as the internal panel class, has been rewritten in ggproto. Facets are now extendable in the same manner as geoms and stats, as described in <code><a href="../articles/extending-ggplot2.html">vignette("extending-ggplot2")</a></code>.</p>
<p>We have also added the following new fatures.</p>
<ul>
<li><p><code><a href="../reference/facet_grid.html">facet_grid()</a></code> and <code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> now allow expressions in their faceting formulas (<a href='https://github.com/DanRuderman'>@DanRuderman</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1596'>#1596</a>).</p></li>
<li><p>When <code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> results in an uneven number of panels, axes will now be drawn underneath the hanging panels (fixes <a href='https://github.com/tidyverse/ggplot2/issues/1607'>#1607</a>)</p></li>
<li><p>Strips can now be freely positioned in <code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> using the <code>strip.position</code> argument (deprecates <code>switch</code>).</p></li>
<li><p>The relative order of panel, strip, and axis can now be controlled with the theme setting <code>strip.placement</code> that takes either <code>inside</code> (strip between panel and axis) or <code>outside</code> (strip after axis).</p></li>
<li><p>The theme option <code>panel.margin</code> has been deprecated in favour of <code>panel.spacing</code> to more clearly communicate intent.</p></li>
</ul>
</div>
<div id="extensions-1" class="section level3">
<h3 class="hasAnchor">
<a href="#extensions-1" class="anchor"></a>Extensions</h3>
<p>Unfortunately there was a major oversight in the construction of ggproto which lead to extensions capturing the super object at package build time, instead of at package run time (<a href='https://github.com/tidyverse/ggplot2/issues/1826'>#1826</a>). This problem has been fixed, but requires re-installation of all extension packages.</p>
</div>
</div>
<div id="scales-1" class="section level2">
<h2 class="hasAnchor">
<a href="#scales-1" class="anchor"></a>Scales</h2>
<ul>
<li>The position of x and y axes can now be changed using the <code>position</code> argument in <code>scale_x_*</code>and <code>scale_y_*</code> which can take <code>top</code> and <code>bottom</code>, and <code>left</code> and <code>right</code> respectively. The themes of top and right axes can be modified using the <code>.top</code> and <code>.right</code> modifiers to <code>axis.text.*</code> and <code>axis.title.*</code>.</li>
</ul>
<div id="continuous-scales" class="section level3">
<h3 class="hasAnchor">
<a href="#continuous-scales" class="anchor"></a>Continuous scales</h3>
<ul>
<li><p><code><a href="../reference/scale_continuous.html">scale_x_continuous()</a></code> and <code><a href="../reference/scale_continuous.html">scale_y_continuous()</a></code> can now display a secondary axis that is a <strong>one-to-one</strong> transformation of the primary axis (e.g. degrees Celcius to degrees Fahrenheit). The secondary axis will be positioned opposite to the primary axis and can be controlled with the <code>sec.axis</code> argument to the scale constructor.</p></li>
<li><p>Scales worry less about having breaks. If no breaks can be computed, the plot will work instead of throwing an uninformative error (<a href='https://github.com/tidyverse/ggplot2/issues/791'>#791</a>). This is particularly helpful when you have facets with free scales, and not all panels contain data.</p></li>
<li><p>Scales now warn when transformation introduces infinite values (<a href='https://github.com/tidyverse/ggplot2/issues/1696'>#1696</a>).</p></li>
</ul>
</div>
<div id="date-time" class="section level3">
<h3 class="hasAnchor">
<a href="#date-time" class="anchor"></a>Date time</h3>
<ul>
<li><p><code>scale_*_datetime()</code> now supports time zones. It will use the timezone attached to the varaible by default, but can be overridden with the <code>timezone</code> argument.</p></li>
<li><p>New <code><a href="../reference/scale_date.html">scale_x_time()</a></code> and <code><a href="../reference/scale_date.html">scale_y_time()</a></code> generate reasonable default breaks and labels for hms vectors (<a href='https://github.com/tidyverse/ggplot2/issues/1752'>#1752</a>).</p></li>
</ul>
</div>
<div id="discrete-scales" class="section level3">
<h3 class="hasAnchor">
<a href="#discrete-scales" class="anchor"></a>Discrete scales</h3>
<p>The treatment of missing values by discrete scales has been thoroughly overhauled (<a href='https://github.com/tidyverse/ggplot2/issues/1584'>#1584</a>). The underlying principle is that we can naturally represent missing values on discrete variables (by treating just like another level), so by default we should.</p>
<p>This principle applies to:</p>
<ul>
<li>character vectors</li>
<li>factors with implicit NA</li>
<li>factors with explicit NA</li>
</ul>
<p>And to all scales (both position and non-position.)</p>
<p>Compared to the previous version of ggplot2, there are three main changes:</p>
<ol>
<li><p><code><a href="../reference/scale_discrete.html">scale_x_discrete()</a></code> and <code><a href="../reference/scale_discrete.html">scale_y_discrete()</a></code> always show discrete NA, regardless of their source</p></li>
<li><p>If present, <code>NA</code>s are shown in discete legends.</p></li>
<li><p>All discrete scales gain a <code>na.translate</code> argument that allows you to control whether <code>NA</code>s are translated to something that can be visualised, or should be left as missing. Note that if you don’t translate (i.e. <code>na.translate = FALSE)</code> the missing values will passed on to the layer, which will warning that it’s dropping missing values. To suppress the warnings, you’ll also need to add <code>na.rm = TRUE</code> to the layer call.</p></li>
</ol>
<p>There were also a number of other smaller changes</p>
<ul>
<li>Correctly use scale expansion factors.</li>
<li>Don’t preserve space for dropped levels (<a href='https://github.com/tidyverse/ggplot2/issues/1638'>#1638</a>).</li>
<li>Only issue one warning when when asking for too many levels (<a href='https://github.com/tidyverse/ggplot2/issues/1674'>#1674</a>).</li>
<li>Unicode labels work better on Windows (<a href='https://github.com/tidyverse/ggplot2/issues/1827'>#1827</a>).</li>
<li>Warn when used with only continuous data (<a href='https://github.com/tidyverse/ggplot2/issues/1589'>#1589</a>)</li>
</ul>
</div>
</div>
<div id="themes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#themes-1" class="anchor"></a>Themes</h2>
<ul>
<li><p>The <code><a href="../reference/theme.html">theme()</a></code> constructor now has named arguments rather than ellipses. This should make autocomplete substantially more useful. The documentation (including examples) has been considerably improved.</p></li>
<li><p>Built-in themes are more visually homogeneous, and match <code>theme_grey</code> better. (<a href='https://github.com/jiho'>@jiho</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1679'>#1679</a>)</p></li>
<li><p>When computing the height of titles, ggplot2 now includes the height of the descenders (i.e. the bits of <code>g</code> and <code>y</code> that hang beneath the baseline). This improves the margins around titles, particularly the y axis label (<a href='https://github.com/tidyverse/ggplot2/issues/1712'>#1712</a>). I have also very slightly increased the inner margins of axis titles, and removed the outer margins.</p></li>
<li><p>Theme element inheritance is now easier to work with as modification now overrides default <code>element_blank</code> elements (<a href='https://github.com/tidyverse/ggplot2/issues/1555'>#1555</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1557'>#1557</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1565'>#1565</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1567'>#1567</a>)</p></li>
<li><p>Horizontal legends (i.e. legends on the top or bottom) are horizontally aligned by default (<a href='https://github.com/tidyverse/ggplot2/issues/1842'>#1842</a>). Use <code>legend.box = "vertical"</code> to switch back to the previous behaviour.</p></li>
<li><p><code><a href="../reference/element.html">element_line()</a></code> now takes an <code>arrow</code> argument to specify arrows at the end of lines (<a href='https://github.com/tidyverse/ggplot2/issues/1740'>#1740</a>)</p></li>
</ul>
<p>There were a number of tweaks to the theme elements that control legends:</p>
<ul>
<li><p><code>legend.justification</code> now controls appearance will plotting the legend outside of the plot area. For example, you can use <code><a href="../reference/theme.html">theme(legend.justification = "top")</a></code> to make the legend align with the top of the plot.</p></li>
<li><p><code>panel.margin</code> and <code>legend.margin</code> have been renamed to <code>panel.spacing</code> and <code>legend.spacing</code> respectively, to better communicate intent (they only affect spacing between legends and panels, not the margins around them)</p></li>
<li><p><code>legend.margin</code> now controls margin around individual legends.</p></li>
<li><p>New <code>legend.box.background</code>, <code>legend.box.spacing</code>, and <code>legend.box.margin</code> control the background, spacing, and margin of the legend box (the region that contains all legends).</p></li>
</ul>
</div>
<div id="bug-fixes-and-minor-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-and-minor-improvements" class="anchor"></a>Bug fixes and minor improvements</h2>
<ul>
<li><p>ggplot2 now imports tibble. This ensures that all built-in datasets print compactly even if you haven’t explicitly loaded tibble or dplyr (<a href='https://github.com/tidyverse/ggplot2/issues/1677'>#1677</a>).</p></li>
<li><p>Class of aesthetic mapping is preserved when adding <code><a href="../reference/aes.html">aes()</a></code> objects (<a href='https://github.com/tidyverse/ggplot2/issues/1624'>#1624</a>).</p></li>
<li><p><code>+.gg</code> now works for lists that include data frames.</p></li>
<li><p><code>annotation_x()</code> now works in the absense of global data (<a href='https://github.com/tidyverse/ggplot2/issues/1655'>#1655</a>)</p></li>
<li><p><code>geom_*(show.legend = FALSE)</code> now works for <code>guide_colorbar</code>.</p></li>
<li><p><code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code> gains new <code>outlier.alpha</code> (<a href='https://github.com/jonathan-g'>@jonathan-g</a>) and <code>outlier.fill</code> (<a href='https://github.com/schloerke'>@schloerke</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1787'>#1787</a>) parameters to control the alpha/fill of outlier points independently of the alpha of the boxes.</p></li>
<li><p><code><a href="../reference/position_jitter.html">position_jitter()</a></code> (and hence <code><a href="../reference/geom_jitter.html">geom_jitter()</a></code>) now correctly computes the jitter width/jitter when supplied by the user (<a href='https://github.com/tidyverse/ggplot2/issues/1775'>#1775</a>, <a href='https://github.com/has2k1'>@has2k1</a>).</p></li>
<li><p><code><a href="../reference/geom_contour.html">geom_contour()</a></code> more clearly describes what inputs it needs (<a href='https://github.com/tidyverse/ggplot2/issues/1577'>#1577</a>).</p></li>
<li><p><code><a href="../reference/geom_segment.html">geom_curve()</a></code> respects the <code>lineend</code> paramater (<a href='https://github.com/tidyverse/ggplot2/issues/1852'>#1852</a>).</p></li>
<li><p><code><a href="../reference/geom_histogram.html">geom_histogram()</a></code> and <code><a href="../reference/geom_histogram.html">stat_bin()</a></code> understand the <code>breaks</code> parameter once more. (<a href='https://github.com/tidyverse/ggplot2/issues/1665'>#1665</a>). The floating point adjustment for histogram bins is now actually used - it was previously inadvertently ignored (<a href='https://github.com/tidyverse/ggplot2/issues/1651'>#1651</a>).</p></li>
<li><p><code><a href="../reference/geom_violin.html">geom_violin()</a></code> no longer transforms quantile lines with the alpha aesthetic (<a href='https://github.com/mnbram'>@mnbram</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1714'>#1714</a>). It no longer errors when quantiles are requested but data have zero range (<a href='https://github.com/tidyverse/ggplot2/issues/1687'>#1687</a>). When <code>trim = FALSE</code> it once again has a nice range that allows the density to reach zero (by extending the range 3 bandwidths to either side of the data) (<a href='https://github.com/tidyverse/ggplot2/issues/1700'>#1700</a>).</p></li>
<li><p><code><a href="../reference/geom_dotplot.html">geom_dotplot()</a></code> works better when faceting and binning on the y-axis. (<a href='https://github.com/tidyverse/ggplot2/issues/1618'>#1618</a>, <a href='https://github.com/has2k1'>@has2k1</a>).</p></li>
<li><p><code>geom_hexbin()</code> once again supports <code>..density..</code> (<a href='https://github.com/mikebirdgeneau'>@mikebirdgeneau</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1688'>#1688</a>).</p></li>
<li><p><code><a href="../reference/geom_path.html">geom_step()</a></code> gives useful warning if only one data point in layer (<a href='https://github.com/tidyverse/ggplot2/issues/1645'>#1645</a>).</p></li>
<li><p><code><a href="../reference/layer.html">layer()</a></code> gains new <code>check.aes</code> and <code>check.param</code> arguments. These allow geom/stat authors to optional suppress checks for known aesthetics/parameters. Currently this is used only in <code><a href="../reference/geom_blank.html">geom_blank()</a></code> which powers <code><a href="../reference/expand_limits.html">expand_limits()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1795'>#1795</a>).</p></li>
<li><p>All <code>stat_*()</code> display a better error message when required aesthetics are missing.</p></li>
<li><p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> and <code><a href="../reference/stat_summary_2d.html">stat_summary_hex()</a></code> now accept length 1 <code>binwidth</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1610'>#1610</a>)</p></li>
<li><p><code><a href="../reference/geom_density.html">stat_density()</a></code> gains new argument <code>n</code>, which is passed to underlying function <code><a href="https://rdrr.io/r/stats/density.html">stats::density</a></code> (“number of equally spaced points at which the density is to be estimated”). (<a href='https://github.com/hbuschme'>@hbuschme</a>)</p></li>
<li><p><code><a href="../reference/geom_hex.html">stat_binhex()</a></code> now again returns <code>count</code> rather than <code>value</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1747'>#1747</a>)</p></li>
<li><p><code><a href="../reference/stat_ecdf.html">stat_ecdf()</a></code> respects <code>pad</code> argument (<a href='https://github.com/tidyverse/ggplot2/issues/1646'>#1646</a>).</p></li>
<li><p><code><a href="../reference/geom_smooth.html">stat_smooth()</a></code> once again informs you about the method it has chosen. It also correctly calculates the size of the largest group within facets.</p></li>
<li><p><code>x</code> and <code>y</code> scales are now symmetric regarding the list of aesthetics they accept: <code>xmin_final</code>, <code>xmax_final</code>, <code>xlower</code>, <code>xmiddle</code> and <code>xupper</code> are now valid <code>x</code> aesthetics.</p></li>
<li><p><code>Scale</code> extensions can now override the <code>make_title</code> and <code>make_sec_title</code> methods to let the scale modify the axis/legend titles.</p></li>
<li><p>The random stream is now reset after calling <code><a href="https://rdrr.io/r/base/ns-hooks.html">.onAttach()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/2409'>#2409</a>).</p></li>
</ul>
</div>
</div>
    <div id="ggplot2-2-1-0" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-2-1-0" class="anchor"></a>ggplot2 2.1.0<small> 2016-03-01 </small>
</h1>
<div id="new-features-3" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-3" class="anchor"></a>New features</h2>
<ul>
<li><p>When mapping an aesthetic to a constant (e.g. <code>geom_smooth(aes(colour = "loess")))</code>), the default guide title is the name of the aesthetic (i.e. “colour”), not the value (i.e. “loess”) (<a href='https://github.com/tidyverse/ggplot2/issues/1431'>#1431</a>).</p></li>
<li><p><code><a href="../reference/layer.html">layer()</a></code> now accepts a function as the data argument. The function will be applied to the data passed to the <code><a href="../reference/ggplot.html">ggplot()</a></code> function and must return a data.frame (<a href='https://github.com/tidyverse/ggplot2/issues/1527'>#1527</a>, <a href='https://github.com/thomasp85'>@thomasp85</a>). This is a more general version of the deprecated <code>subset</code> argument.</p></li>
<li><p><code><a href="../reference/theme_get.html">theme_update()</a></code> now uses the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator instead of <code><a href="../reference/theme_get.html">%+replace%</a></code>, so that unspecified values will no longer be <code>NULL</code>ed out. <code><a href="../reference/theme_get.html">theme_replace()</a></code> preserves the old behaviour if desired (<a href='https://github.com/oneillkza'>@oneillkza</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1519'>#1519</a>).</p></li>
<li>
<p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> has been overhauled to use the same algorithm as ggvis, which has been considerably improved thanks to the advice of Randy Prium (<a href='https://github.com/rpruim'>@rpruim</a>). This includes:</p>
<ul>
<li><p>Better arguments and a better algorithm for determining the origin. You can now specify either <code>boundary</code> or the <code>center</code> of a bin. <code>origin</code> has been deprecated in favour of these arguments.</p></li>
<li><p><code>drop</code> is deprecated in favour of <code>pad</code>, which adds extra 0-count bins at either end (needed for frequency polygons). <code><a href="../reference/geom_histogram.html">geom_histogram()</a></code> defaults to <code>pad = FALSE</code> which considerably improves the default limits for the histogram, especially when the bins are big (<a href='https://github.com/tidyverse/ggplot2/issues/1477'>#1477</a>).</p></li>
<li><p>The default algorithm does a (somewhat) better job at picking nice widths and origins across a wider range of input data.</p></li>
<li><p><code>bins = n</code> now gives a histogram with <code>n</code> bins, not <code>n + 1</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1487'>#1487</a>).</p></li>
</ul>
</li>
</ul>
</div>
<div id="bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes" class="anchor"></a>Bug fixes</h2>
<ul>
<li><p>All <code>\donttest{}</code> examples run.</p></li>
<li><p>All <code>geom_()</code> and <code>stat_()</code> functions now have consistent argument order: data + mapping, then geom/stat/position, then <code>...</code>, then specific arguments, then arguments common to all layers (<a href='https://github.com/tidyverse/ggplot2/issues/1305'>#1305</a>). This may break code if you were previously relying on partial name matching, but in the long-term should make ggplot2 easier to use. In particular, you can now set the <code>n</code> parameter in <code><a href="../reference/geom_density_2d.html">geom_density2d()</a></code> without it partially matching <code>na.rm</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1485'>#1485</a>).</p></li>
<li><p>For geoms with both <code>colour</code> and <code>fill</code>, <code>alpha</code> once again only affects fill (Reverts <a href='https://github.com/tidyverse/ggplot2/issues/1371'>#1371</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1523'>#1523</a>). This was causing problems for people.</p></li>
<li><p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code>/<code><a href="../reference/facet_grid.html">facet_grid()</a></code> works with multiple empty panels of data (<a href='https://github.com/tidyverse/ggplot2/issues/1445'>#1445</a>).</p></li>
<li><p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> correctly swaps <code>nrow</code> and <code>ncol</code> when faceting vertically (<a href='https://github.com/tidyverse/ggplot2/issues/1417'>#1417</a>).</p></li>
<li><p><code><a href="../reference/ggsave.html">ggsave("x.svg")</a></code> now uses svglite to produce the svg (<a href='https://github.com/tidyverse/ggplot2/issues/1432'>#1432</a>).</p></li>
<li><p><code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code> now understands <code>outlier.color</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1455'>#1455</a>).</p></li>
<li><p><code><a href="../reference/geom_path.html">geom_path()</a></code> knows that “solid” (not just 1) represents a solid line (<a href='https://github.com/tidyverse/ggplot2/issues/1534'>#1534</a>).</p></li>
<li><p><code><a href="../reference/geom_ribbon.html">geom_ribbon()</a></code> preserves missing values so they correctly generate a gap in the ribbon (<a href='https://github.com/tidyverse/ggplot2/issues/1549'>#1549</a>).</p></li>
<li><p><code><a href="../reference/geom_tile.html">geom_tile()</a></code> once again accepts <code>width</code> and <code>height</code> parameters (<a href='https://github.com/tidyverse/ggplot2/issues/1513'>#1513</a>). It uses <code><a href="../reference/draw_key.html">draw_key_polygon()</a></code> for better a legend, including a coloured outline (<a href='https://github.com/tidyverse/ggplot2/issues/1484'>#1484</a>).</p></li>
<li><p><code><a href="../reference/layer.html">layer()</a></code> now automatically adds a <code>na.rm</code> parameter if none is explicitly supplied.</p></li>
<li><p><code><a href="../reference/position_jitterdodge.html">position_jitterdodge()</a></code> now works on all possible dodge aesthetics, e.g. <code>color</code>, <code>linetype</code> etc. instead of only based on <code>fill</code> (<a href='https://github.com/bleutner'>@bleutner</a>)</p></li>
<li><p><code>position = "nudge"</code> now works (although it doesn’t do anything useful) (<a href='https://github.com/tidyverse/ggplot2/issues/1428'>#1428</a>).</p></li>
<li><p>The default scale for columns of class “AsIs” is now “identity” (<a href='https://github.com/tidyverse/ggplot2/issues/1518'>#1518</a>).</p></li>
<li><p><code>scale_*_discrete()</code> has better defaults when used with purely continuous data (<a href='https://github.com/tidyverse/ggplot2/issues/1542'>#1542</a>).</p></li>
<li><p><code><a href="../reference/scale_size.html">scale_size()</a></code> warns when used with categorical data.</p></li>
<li><p><code><a href="../reference/scale_size.html">scale_size()</a></code>, <code>scale_colour()</code>, and <code>scale_fill()</code> gain date and date-time variants (<a href='https://github.com/tidyverse/ggplot2/issues/1526'>#1526</a>).</p></li>
<li><p><code><a href="../reference/geom_hex.html">stat_bin_hex()</a></code> and <code>stat_bin_summary()</code> now use the same underlying algorithm so results are consistent (<a href='https://github.com/tidyverse/ggplot2/issues/1383'>#1383</a>). <code><a href="../reference/geom_hex.html">stat_bin_hex()</a></code> now accepts a <code>weight</code> aesthetic. To be consistent with related stats, the output variable from <code><a href="../reference/geom_hex.html">stat_bin_hex()</a></code> is now value instead of count.</p></li>
<li><p><code><a href="../reference/geom_density.html">stat_density()</a></code> gains a <code>bw</code> parameter which makes it easy to get consistent smoothing between facets (<a href='https://github.com/jiho'>@jiho</a>)</p></li>
<li><p><code>stat-density-2d()</code> no longer ignores the <code>h</code> parameter, and now accepts <code>bins</code> and <code>binwidth</code> parameters to control the number of contours (<a href='https://github.com/tidyverse/ggplot2/issues/1448'>#1448</a>, <a href='https://github.com/has2k1'>@has2k1</a>).</p></li>
<li><p><code><a href="../reference/stat_ecdf.html">stat_ecdf()</a></code> does a better job of adding padding to -Inf/Inf, and gains an argument <code>pad</code> to suppress the padding if not needed (<a href='https://github.com/tidyverse/ggplot2/issues/1467'>#1467</a>).</p></li>
<li><p><code><a href="../reference/stat_function.html">stat_function()</a></code> gains an <code>xlim</code> parameter (<a href='https://github.com/tidyverse/ggplot2/issues/1528'>#1528</a>). It once again works with discrete x values (<a href='https://github.com/tidyverse/ggplot2/issues/1509'>#1509</a>).</p></li>
<li><p><code><a href="../reference/stat_summary.html">stat_summary()</a></code> preserves sorted x order which avoids artefacts when display results with <code><a href="../reference/geom_smooth.html">geom_smooth()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1520'>#1520</a>).</p></li>
<li><p>All elements should now inherit correctly for all themes except <code><a href="../reference/ggtheme.html">theme_void()</a></code>. (<a href='https://github.com/Katiedaisey'>@Katiedaisey</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1555'>#1555</a>)</p></li>
<li><p><code><a href="../reference/ggtheme.html">theme_void()</a></code> was completely void of text but facets and legends still need labels. They are now visible (<a href='https://github.com/jiho'>@jiho</a>).</p></li>
<li><p>You can once again set legend key and height width to unit arithmetic objects (like <code>2 * unit(1, "cm")</code>) (<a href='https://github.com/tidyverse/ggplot2/issues/1437'>#1437</a>).</p></li>
<li><p>Eliminate spurious warning if you have a layer with no data and no aesthetics (<a href='https://github.com/tidyverse/ggplot2/issues/1451'>#1451</a>).</p></li>
<li><p>Removed a superfluous comma in <code>theme-defaults.r</code> code (<a href='https://github.com/jschoeley'>@jschoeley</a>)</p></li>
<li><p>Fixed a compatibility issue with <code>ggproto</code> and R versions prior to 3.1.2. (<a href='https://github.com/tidyverse/ggplot2/issues/1444'>#1444</a>)</p></li>
<li><p>Fixed issue where <code><a href="../reference/coord_map.html">coord_map()</a></code> fails when given an explicit <code>parameters</code> argument (<a href='https://github.com/tdmcarthur'>@tdmcarthur</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1729'>#1729</a>)</p></li>
<li><p>Fixed issue where <code><a href="../reference/geom_errorbarh.html">geom_errorbarh()</a></code> had a required <code>x</code> aesthetic (<a href='https://github.com/tidyverse/ggplot2/issues/1933'>#1933</a>)</p></li>
</ul>
</div>
</div>
    <div id="ggplot2-2-0-0" class="section level1">
<h1 class="page-header">
<a href="#ggplot2-2-0-0" class="anchor"></a>ggplot2 2.0.0<small> 2015-12-18 </small>
</h1>
<div id="major-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#major-changes" class="anchor"></a>Major changes</h2>
<ul>
<li><p>ggplot no longer throws an error if your plot has no layers. Instead it automatically adds <code><a href="../reference/geom_blank.html">geom_blank()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1246'>#1246</a>).</p></li>
<li><p>New <code><a href="../reference/cut_interval.html">cut_width()</a></code> is a convenient replacement for the verbose <code><a href="https://rdrr.io/pkg/plyr/man/round_any.html">plyr::round_any()</a></code>, with the additional benefit of offering finer control.</p></li>
<li><p>New <code><a href="../reference/geom_count.html">geom_count()</a></code> is a convenient alias to <code><a href="../reference/geom_count.html">stat_sum()</a></code>. Use it when you have overlapping points on a scatterplot. <code><a href="../reference/geom_count.html">stat_sum()</a></code> now defaults to using counts instead of proportions.</p></li>
<li><p>New <code><a href="../reference/geom_segment.html">geom_curve()</a></code> adds curved lines, with a similar specification to <code><a href="../reference/geom_segment.html">geom_segment()</a></code> (<a href='https://github.com/veraanadi'>@veraanadi</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1088'>#1088</a>).</p></li>
<li><p>Date and datetime scales now have <code>date_breaks</code>, <code>date_minor_breaks</code> and <code>date_labels</code> arguments so that you never need to use the long <code><a href="https://scales.r-lib.org//reference/date_breaks.html">scales::date_breaks()</a></code> or <code><a href="https://scales.r-lib.org//reference/label_date.html">scales::date_format()</a></code>.</p></li>
<li><p><code><a href="../reference/geom_bar.html">geom_bar()</a></code> now has it’s own stat, distinct from <code><a href="../reference/geom_histogram.html">stat_bin()</a></code> which was also used by <code><a href="../reference/geom_histogram.html">geom_histogram()</a></code>. <code><a href="../reference/geom_bar.html">geom_bar()</a></code> now uses <code><a href="../reference/geom_bar.html">stat_count()</a></code> which counts values at each distinct value of x (i.e. it does not bin the data first). This can be useful when you want to show exactly which values are used in a continuous variable.</p></li>
<li><p><code><a href="../reference/geom_point.html">geom_point()</a></code> gains a <code>stroke</code> aesthetic which controls the border width of shapes 21-25 (<a href='https://github.com/tidyverse/ggplot2/issues/1133'>#1133</a>, <a href='https://github.com/SeySayux'>@SeySayux</a>). <code>size</code> and <code>stroke</code> are additive so a point with <code>size = 5</code> and <code>stroke = 5</code> will have a diameter of 10mm. (<a href='https://github.com/tidyverse/ggplot2/issues/1142'>#1142</a>)</p></li>
<li><p>New <code><a href="../reference/position_nudge.html">position_nudge()</a></code> allows you to slightly offset labels (or other geoms) from their corresponding points (<a href='https://github.com/tidyverse/ggplot2/issues/1109'>#1109</a>).</p></li>
<li><p><code><a href="../reference/scale_size.html">scale_size()</a></code> now maps values to <em>area</em>, not radius. Use <code><a href="../reference/scale_size.html">scale_radius()</a></code> if you want the old behaviour (not recommended, except perhaps for lines).</p></li>
<li><p>New <code><a href="../reference/stat_summary.html">stat_summary_bin()</a></code> works like <code><a href="../reference/stat_summary.html">stat_summary()</a></code> but on binned data. It’s a generalisation of <code><a href="../reference/geom_histogram.html">stat_bin()</a></code> that can compute any aggregate, not just counts (<a href='https://github.com/tidyverse/ggplot2/issues/1274'>#1274</a>). Both default to <code><a href="../reference/mean_se.html">mean_se()</a></code> if no aggregation functions are supplied (<a href='https://github.com/tidyverse/ggplot2/issues/1386'>#1386</a>).</p></li>
<li>
<p>Layers are now much stricter about their arguments - you will get an error if you’ve supplied an argument that isn’t an aesthetic or a parameter. This is likely to cause some short-term pain but in the long-term it will make it much easier to spot spelling mistakes and other errors (<a href='https://github.com/tidyverse/ggplot2/issues/1293'>#1293</a>).</p>
<p>This change does break a handful of geoms/stats that used <code>...</code> to pass additional arguments on to the underlying computation. Now <code><a href="../reference/geom_smooth.html">geom_smooth()</a></code>/<code><a href="../reference/geom_smooth.html">stat_smooth()</a></code> and <code><a href="../reference/geom_quantile.html">geom_quantile()</a></code>/<code><a href="../reference/geom_quantile.html">stat_quantile()</a></code> use <code>method.args</code> instead (<a href='https://github.com/tidyverse/ggplot2/issues/1245'>#1245</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1289'>#1289</a>); and <code><a href="../reference/stat_summary.html">stat_summary()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1242'>#1242</a>), <code><a href="../reference/stat_summary_2d.html">stat_summary_hex()</a></code>, and <code><a href="../reference/stat_summary_2d.html">stat_summary2d()</a></code> use <code>fun.args</code>.</p>
</li>
</ul>
<div id="extensibility" class="section level3">
<h3 class="hasAnchor">
<a href="#extensibility" class="anchor"></a>Extensibility</h3>
<p>There is now an official mechanism for defining Stats, Geoms, and Positions in other packages. See <code><a href="../articles/extending-ggplot2.html">vignette("extending-ggplot2")</a></code> for details.</p>
<ul>
<li><p>All Geoms, Stats and Positions are now exported, so you can inherit from them when making your own objects (<a href='https://github.com/tidyverse/ggplot2/issues/989'>#989</a>).</p></li>
<li><p>ggplot2 no longer uses proto or reference classes. Instead, we now use ggproto, a new OO system designed specifically for ggplot2. Unlike proto and RC, ggproto supports clean cross-package inheritance. Creating a new OO system isn’t usually the right way to solve a problem, but I’m pretty sure it was necessary here. Read more about it in the vignette.</p></li>
<li><p><code><a href="../reference/aes_.html">aes_()</a></code> replaces <code><a href="../reference/aes_.html">aes_q()</a></code>. It also supports formulas, so the most concise SE version of <code><a href="../reference/aes.html">aes(carat, price)</a></code> is now <code><a href="../reference/aes_.html">aes_(~carat, ~price)</a></code>. You may want to use this form in packages, as it will avoid spurious <code>R CMD check</code> warnings about undefined global variables.</p></li>
</ul>
</div>
<div id="text" class="section level3">
<h3 class="hasAnchor">
<a href="#text" class="anchor"></a>Text</h3>
<ul>
<li>
<p><code><a href="../reference/geom_text.html">geom_text()</a></code> has been overhauled to make labelling your data a little easier. It:</p>
<ul>
<li><p><code>nudge_x</code> and <code>nudge_y</code> arguments let you offset labels from their corresponding points (<a href='https://github.com/tidyverse/ggplot2/issues/1120'>#1120</a>).</p></li>
<li><p><code>check_overlap = TRUE</code> provides a simple way to avoid overplotting of labels: labels that would otherwise overlap are omitted (<a href='https://github.com/tidyverse/ggplot2/issues/1039'>#1039</a>).</p></li>
<li><p><code>hjust</code> and <code>vjust</code> can now be character vectors: “left”, “center”, “right”, “bottom”, “middle”, “top”. New options include “inward” and “outward” which align text towards and away from the center of the plot respectively.</p></li>
</ul>
</li>
<li><p><code><a href="../reference/geom_text.html">geom_label()</a></code> works like <code><a href="../reference/geom_text.html">geom_text()</a></code> but draws a rounded rectangle underneath each label (<a href='https://github.com/tidyverse/ggplot2/issues/1039'>#1039</a>). This is useful when you want to label plots that are dense with data.</p></li>
</ul>
</div>
<div id="deprecated-features" class="section level3">
<h3 class="hasAnchor">
<a href="#deprecated-features" class="anchor"></a>Deprecated features</h3>
<ul>
<li><p>The little used <code><a href="../reference/aes_auto.html">aes_auto()</a></code> has been deprecated.</p></li>
<li><p><code><a href="../reference/aes_.html">aes_q()</a></code> has been replaced with <code><a href="../reference/aes_.html">aes_()</a></code> to be consistent with SE versions of NSE functions in other packages.</p></li>
<li><p>The <code>order</code> aesthetic is officially deprecated. It never really worked, and was poorly documented.</p></li>
<li><p>The <code>stat</code> and <code>position</code> arguments to <code><a href="../reference/qplot.html">qplot()</a></code> have been deprecated. <code><a href="../reference/qplot.html">qplot()</a></code> is designed for quick plots - if you need to specify position or stat, use <code><a href="../reference/ggplot.html">ggplot()</a></code> instead.</p></li>
<li><p>The theme setting <code>axis.ticks.margin</code> has been deprecated: now use the margin property of <code>axis.text</code>.</p></li>
<li><p><code>stat_abline()</code>, <code>stat_hline()</code> and <code>stat_vline()</code> have been removed: these were never suitable for use other than with <code><a href="../reference/geom_abline.html">geom_abline()</a></code> etc and were not documented.</p></li>
<li><p><code>show_guide</code> has been renamed to <code>show.legend</code>: this more accurately reflects what it does (controls appearance of layer in legend), and uses the same convention as other ggplot2 arguments (i.e. a <code>.</code> between names). (Yes, I know that’s inconsistent with function names with use <code>_</code>, but it’s too late to change now.)</p></li>
</ul>
<p>A number of geoms have been renamed to be internally consistent:</p>
<ul>
<li><p><code><a href="../reference/geom_hex.html">stat_binhex()</a></code> and <code><a href="../reference/geom_bin2d.html">stat_bin2d()</a></code> have been renamed to <code><a href="../reference/geom_hex.html">stat_bin_hex()</a></code> and <code><a href="../reference/geom_bin2d.html">stat_bin_2d()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1274'>#1274</a>). <code><a href="../reference/stat_summary_2d.html">stat_summary2d()</a></code> has been renamed to <code><a href="../reference/stat_summary_2d.html">stat_summary_2d()</a></code>, <code><a href="../reference/geom_density_2d.html">geom_density2d()</a></code>/<code><a href="../reference/geom_density_2d.html">stat_density2d()</a></code> has been renamed to <code><a href="../reference/geom_density_2d.html">geom_density_2d()</a></code>/<code><a href="../reference/geom_density_2d.html">stat_density_2d()</a></code>.</p></li>
<li><p><code><a href="../reference/geom_spoke.html">stat_spoke()</a></code> is now <code><a href="../reference/geom_spoke.html">geom_spoke()</a></code> since I realised it’s a reparameterisation of `geom_segment().</p></li>
<li><p><code>stat_bindot()</code> has been removed because it’s so tightly coupled to <code><a href="../reference/geom_dotplot.html">geom_dotplot()</a></code>. If you happened to use <code>stat_bindot()</code>, just change to <code><a href="../reference/geom_dotplot.html">geom_dotplot()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1194'>#1194</a>).</p></li>
</ul>
<p>All defunct functions have been removed.</p>
</div>
<div id="default-appearance" class="section level3">
<h3 class="hasAnchor">
<a href="#default-appearance" class="anchor"></a>Default appearance</h3>
<ul>
<li><p>The default <code><a href="../reference/ggtheme.html">theme_grey()</a></code> background colour has been changed from “grey90” to “grey92”: this makes the background a little less visually prominent.</p></li>
<li>
<p>Labels and titles have been tweaked for readability:</p>
<ul>
<li><p>Axes labels are darker.</p></li>
<li><p>Legend and axis titles are given the same visual treatment.</p></li>
<li><p>The default font size dropped from 12 to 11. You might be surprised that I’ve made the default text size smaller as it was already hard for many people to read. It turns out there was a bug in RStudio (fixed in 0.99.724), that shrunk the text of all grid based graphics. Once that was resolved the defaults seemed too big to my eyes.</p></li>
<li><p>More spacing between titles and borders.</p></li>
<li><p>Default margins scale with the theme font size, so the appearance at larger font sizes should be considerably improved (<a href='https://github.com/tidyverse/ggplot2/issues/1228'>#1228</a>).</p></li>
</ul>
</li>
<li><p><code>alpha</code> now affects both fill and colour aesthetics (<a href='https://github.com/tidyverse/ggplot2/issues/1371'>#1371</a>).</p></li>
<li><p><code><a href="../reference/element.html">element_text()</a></code> gains a margins argument which allows you to add additional padding around text elements. To help see what’s going on use <code>debug = TRUE</code> to display the text region and anchors.</p></li>
<li><p>The default font size in <code><a href="../reference/geom_text.html">geom_text()</a></code> has been decreased from 5mm (14 pts) to 3.8 mm (11 pts) to match the new default theme sizes.</p></li>
<li><p>A diagonal line is no longer drawn on bar and rectangle legends. Instead, the border has been tweaked to be more visible, and more closely match the size of line drawn on the plot.</p></li>
<li><p><code><a href="../reference/geom_linerange.html">geom_pointrange()</a></code> and <code><a href="../reference/geom_linerange.html">geom_linerange()</a></code> get vertical (not horizontal) lines in the legend (<a href='https://github.com/tidyverse/ggplot2/issues/1389'>#1389</a>).</p></li>
<li><p>The default line <code>size</code> for <code><a href="../reference/geom_smooth.html">geom_smooth()</a></code> has been increased from 0.5 to 1 to make it easier to see when overlaid on data.</p></li>
<li><p><code><a href="../reference/geom_bar.html">geom_bar()</a></code> and <code><a href="../reference/geom_tile.html">geom_rect()</a></code> use a slightly paler shade of grey so they aren’t so visually heavy.</p></li>
<li><p><code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code> now colours outliers the same way as the boxes.</p></li>
<li><p><code><a href="../reference/geom_point.html">geom_point()</a></code> now uses shape 19 instead of 16. This looks much better on the default Linux graphics device. (It’s very slightly smaller than the old point, but it shouldn’t affect any graphics significantly)</p></li>
<li><p>Sizes in ggplot2 are measured in mm. Previously they were converted to pts (for use in grid) by multiplying by 72 / 25.4. However, grid uses printer’s points, not Adobe (big pts), so sizes are now correctly multiplied by 72.27 / 25.4. This is unlikely to noticeably affect display, but it’s technically correct (<a href="https://youtu.be/hou0lU8WMgo" class="uri">https://youtu.be/hou0lU8WMgo</a>).</p></li>
<li>
<p>The default legend will now allocate multiple rows (if vertical) or columns (if horizontal) in order to make a legend that is more likely to fit on the screen. You can override with the <code>nrow</code>/<code>ncol</code> arguments to <code><a href="../reference/guide_legend.html">guide_legend()</a></code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggplot.html">ggplot</a></span>(mpg, <span class="kw"><a href="../reference/aes.html">aes</a></span>(displ,hwy, <span class="dt">colour =</span> model)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="../reference/geom_point.html">geom_point</a></span>()</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">p</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">p <span class="op">+</span><span class="st"> </span><span class="kw"><a href="../reference/theme.html">theme</a></span>(<span class="dt">legend.position =</span> <span class="st">"bottom"</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co"># Previous behaviour</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">p <span class="op">+</span><span class="st"> </span><span class="kw"><a href="../reference/guides.html">guides</a></span>(<span class="dt">colour =</span> <span class="kw"><a href="../reference/guide_legend.html">guide_legend</a></span>(<span class="dt">ncol =</span> <span class="dv">1</span>))</a></code></pre></div>
</li>
</ul>
</div>
<div id="new-and-updated-themes" class="section level3">
<h3 class="hasAnchor">
<a href="#new-and-updated-themes" class="anchor"></a>New and updated themes</h3>
<ul>
<li><p>New <code><a href="../reference/ggtheme.html">theme_void()</a></code> is completely empty. It’s useful for plots with non- standard coordinates or for drawings (<a href='https://github.com/jiho'>@jiho</a>, <a href='https://github.com/tidyverse/ggplot2/issues/976'>#976</a>).</p></li>
<li><p>New <code><a href="../reference/ggtheme.html">theme_dark()</a></code> has a dark background designed to make colours pop out (<a href='https://github.com/jiho'>@jiho</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1018'>#1018</a>)</p></li>
<li><p><code><a href="../reference/ggtheme.html">theme_minimal()</a></code> became slightly more minimal by removing the axis ticks: labels now line up directly beneath grid lines (<a href='https://github.com/tomschloss'>@tomschloss</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1084'>#1084</a>)</p></li>
<li><p>New theme setting <code>panel.ontop</code> (logical) make it possible to place background elements (i.e., gridlines) on top of data. Best used with transparent <code>panel.background</code> (<a href='https://github.com/noamross'>@noamross</a>. <a href='https://github.com/tidyverse/ggplot2/issues/551'>#551</a>).</p></li>
</ul>
</div>
<div id="labelling" class="section level3">
<h3 class="hasAnchor">
<a href="#labelling" class="anchor"></a>Labelling</h3>
<p>The facet labelling system was updated with many new features and a more flexible interface (<a href='https://github.com/lionel-'>@lionel-</a>). It now works consistently across grid and wrap facets. The most important user visible changes are:</p>
<ul>
<li><p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> gains a <code>labeller</code> option (<a href='https://github.com/tidyverse/ggplot2/issues/25'>#25</a>).</p></li>
<li><p><code><a href="../reference/facet_grid.html">facet_grid()</a></code> and <code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> gain a <code>switch</code> argument to display the facet titles near the axes. When switched, the labels become axes subtitles. <code>switch</code> can be set to “x”, “y” or “both” (the latter only for grids) to control which margin is switched.</p></li>
</ul>
<p>The labellers (such as <code><a href="../reference/labellers.html">label_value()</a></code> or <code><a href="../reference/labellers.html">label_both()</a></code>) also get some new features:</p>
<ul>
<li><p>They now offer the <code>multi_line</code> argument to control whether to display composite facets (those specified as <code>~var1 + var2</code>) on one or multiple lines.</p></li>
<li>
<p>In <code><a href="../reference/label_bquote.html">label_bquote()</a></code> you now refer directly to the names of variables. With this change, you can create math expressions that depend on more than one variable. This math expression can be specified either for the rows or the columns and you can also provide different expressions to each margin.</p>
<p>As a consequence of these changes, referring to <code>x</code> in backquoted expressions is deprecated.</p>
</li>
<li><p>Similarly to <code><a href="../reference/label_bquote.html">label_bquote()</a></code>, <code><a href="../reference/labeller.html">labeller()</a></code> now take <code>.rows</code> and <code>.cols</code> arguments. In addition, it also takes <code>.default</code>. <code><a href="../reference/labeller.html">labeller()</a></code> is useful to customise how particular variables are labelled. The three additional arguments specify how to label the variables are not specifically mentioned, respectively for rows, columns or both. This makes it especially easy to set up a project-wide labeller dispatcher that can be reused across all your plots. See the documentation for an example.</p></li>
<li><p>The new labeller <code><a href="../reference/labellers.html">label_context()</a></code> adapts to the number of factors facetted over. With a single factor, it displays only the values, just as before. But with multiple factors in a composite margin (e.g. with <code>~cyl + am</code>), the labels are passed over to <code><a href="../reference/labellers.html">label_both()</a></code>. This way the variables names are displayed with the values to help identifying them.</p></li>
</ul>
<p>On the programming side, the labeller API has been rewritten in order to offer more control when faceting over multiple factors (e.g. with formulae such as <code>~cyl + am</code>). This also means that if you have written custom labellers, you will need to update them for this version of ggplot.</p>
<ul>
<li><p>Previously, a labeller function would take <code>variable</code> and <code>value</code> arguments and return a character vector. Now, they take a data frame of character vectors and return a list. The input data frame has one column per factor facetted over and each column in the returned list becomes one line in the strip label. See documentation for more details.</p></li>
<li><p>The labels received by a labeller now contain metadata: their margin (in the “type” attribute) and whether they come from a wrap or a grid facet (in the “facet” attribute).</p></li>
<li><p>Note that the new <code><a href="../reference/as_labeller.html">as_labeller()</a></code> function operator provides an easy way to transform an existing function to a labeller function. The existing function just needs to take and return a character vector.</p></li>
</ul>
</div>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<ul>
<li><p>Improved documentation for <code><a href="../reference/aes.html">aes()</a></code>, <code><a href="../reference/layer.html">layer()</a></code> and much much more.</p></li>
<li>
<p>I’ve tried to reduce the use of <code>...</code> so that you can see all the documentation in one place rather than having to integrate multiple pages. In some cases this has involved adding additional arguments to geoms to make it more clear what you can do:</p>
<ul>
<li><p><code><a href="../reference/geom_smooth.html">geom_smooth()</a></code> gains explicit <code>method</code>, <code>se</code> and <code>formula</code> arguments.</p></li>
<li><p><code><a href="../reference/geom_histogram.html">geom_histogram()</a></code> gains <code>binwidth</code>, <code>bins</code>, origin<code>and</code>right` arguments.</p></li>
<li><p><code><a href="../reference/geom_jitter.html">geom_jitter()</a></code> gains <code>width</code> and <code>height</code> arguments to make it easier to control the amount of jittering without using the lengthy <code><a href="../reference/position_jitter.html">position_jitter()</a></code> function (<a href='https://github.com/tidyverse/ggplot2/issues/1116'>#1116</a>)</p></li>
</ul>
</li>
<li><p>Use of <code><a href="../reference/qplot.html">qplot()</a></code> in examples has been minimised (<a href='https://github.com/tidyverse/ggplot2/issues/1123'>#1123</a>, <a href='https://github.com/hrbrmstr'>@hrbrmstr</a>). This is inline with the 2nd edition of the ggplot2 box, which minimises the use of <code><a href="../reference/qplot.html">qplot()</a></code> in favour of <code><a href="../reference/ggplot.html">ggplot()</a></code>.</p></li>
<li><p>Tighly linked geoms and stats (e.g. <code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code> and <code><a href="../reference/geom_boxplot.html">stat_boxplot()</a></code>) are now documented in the same file so you can see all the arguments in one place. Variations of the same idea (e.g. <code><a href="../reference/geom_path.html">geom_path()</a></code>, <code><a href="../reference/geom_path.html">geom_line()</a></code>, and <code><a href="../reference/geom_path.html">geom_step()</a></code>) are also documented together.</p></li>
<li><p>It’s now obvious that you can set the <code>binwidth</code> parameter for <code><a href="../reference/geom_hex.html">stat_bin_hex()</a></code>, <code><a href="../reference/stat_summary_2d.html">stat_summary_hex()</a></code>, <code><a href="../reference/geom_bin2d.html">stat_bin_2d()</a></code>, and <code><a href="../reference/stat_summary_2d.html">stat_summary_2d()</a></code>.</p></li>
<li><p>The internals of positions have been cleaned up considerably. You’re unlikely to notice any external changes, although the documentation should be a little less confusing since positions now don’t list parameters they never use.</p></li>
</ul>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<ul>
<li><p>All datasets have class <code>tbl_df</code> so if you also use dplyr, you get a better print method.</p></li>
<li><p><code>economics</code> has been brought up to date to 2015-04-01.</p></li>
<li><p>New <code>economics_long</code> is the economics data in long form.</p></li>
<li><p>New <code>txhousing</code> dataset containing information about the Texas housing market. Useful for examples that need multiple time series, and for demonstrating model+vis methods.</p></li>
<li><p>New <code>luv_colours</code> dataset which contains the locations of all built-in <code><a href="https://rdrr.io/r/grDevices/colors.html">colors()</a></code> in Luv space.</p></li>
<li><p><code>movies</code> has been moved into its own package, ggplot2movies, because it was large and not terribly useful. If you’ve used the movies dataset, you’ll now need to explicitly load the package with <code><a href="https://rdrr.io/r/base/library.html">library(ggplot2movies)</a></code>.</p></li>
</ul>
</div>
<div id="bug-fixes-and-minor-improvements-1" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-and-minor-improvements-1" class="anchor"></a>Bug fixes and minor improvements</h2>
<ul>
<li><p>All partially matched arguments and <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> have been been replaced with full matches (<a href='https://github.com/jimhester'>@jimhester</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1134'>#1134</a>).</p></li>
<li><p>ggplot2 now exports <code><a href="https://scales.r-lib.org//reference/alpha.html">alpha()</a></code> from the scales package (<a href='https://github.com/tidyverse/ggplot2/issues/1107'>#1107</a>), and <code><a href="https://rdrr.io/r/grid/arrow.html">arrow()</a></code> and <code><a href="https://rdrr.io/r/grid/unit.html">unit()</a></code> from grid (<a href='https://github.com/tidyverse/ggplot2/issues/1225'>#1225</a>). This means you don’t need attach scales/grid or do <code>scales::</code>/<code>grid::</code> for these commonly used functions.</p></li>
<li><p><code><a href="../reference/aes_.html">aes_string()</a></code> now only parses character inputs. This fixes bugs when using it with numbers and non default <code>OutDec</code> settings (<a href='https://github.com/tidyverse/ggplot2/issues/1045'>#1045</a>).</p></li>
<li><p><code><a href="../reference/annotation_custom.html">annotation_custom()</a></code> automatically adds a unique id to each grob name, making it easier to plot multiple grobs with the same name (e.g. grobs of ggplot2 graphics) in the same plot (<a href='https://github.com/tidyverse/ggplot2/issues/1256'>#1256</a>).</p></li>
<li><p><code><a href="../reference/borders.html">borders()</a></code> now accepts xlim and ylim arguments for specifying the geographical region of interest (<a href='https://github.com/markpayneatwork'>@markpayneatwork</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1392'>#1392</a>).</p></li>
<li><p><code><a href="../reference/coord_cartesian.html">coord_cartesian()</a></code> applies the same expansion factor to limits as for scales. You can suppress with <code>expand = FALSE</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1207'>#1207</a>).</p></li>
<li><p><code><a href="../reference/coord_trans.html">coord_trans()</a></code> now works when breaks are suppressed (<a href='https://github.com/tidyverse/ggplot2/issues/1422'>#1422</a>).</p></li>
<li><p><code><a href="../reference/cut_interval.html">cut_number()</a></code> gives error message if the number of requested bins can be created because there are two few unique values (<a href='https://github.com/tidyverse/ggplot2/issues/1046'>#1046</a>).</p></li>
<li><p>Character labels in <code><a href="../reference/facet_grid.html">facet_grid()</a></code> are no longer (incorrectly) coerced into factors. This caused problems with custom label functions (<a href='https://github.com/tidyverse/ggplot2/issues/1070'>#1070</a>).</p></li>
<li><p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> and <code><a href="../reference/facet_grid.html">facet_grid()</a></code> now allow you to use non-standard variable names by surrounding them with backticks (<a href='https://github.com/tidyverse/ggplot2/issues/1067'>#1067</a>).</p></li>
<li><p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> more carefully checks its <code>nrow</code> and <code>ncol</code> arguments to ensure that they’re specified correctly (<a href='https://github.com/richierocks'>@richierocks</a>, <a href='https://github.com/tidyverse/ggplot2/issues/962'>#962</a>)</p></li>
<li><p><code><a href="../reference/facet_wrap.html">facet_wrap()</a></code> gains a <code>dir</code> argument to control the direction the panels are wrapped in. The default is “h” for horizontal. Use “v” for vertical layout (<a href='https://github.com/tidyverse/ggplot2/issues/1260'>#1260</a>).</p></li>
<li>
<p><code><a href="../reference/geom_abline.html">geom_abline()</a></code>, <code><a href="../reference/geom_abline.html">geom_hline()</a></code> and <code><a href="../reference/geom_abline.html">geom_vline()</a></code> have been rewritten to have simpler behaviour and be more consistent:</p>
<ul>
<li><p><code>stat_abline()</code>, <code>stat_hline()</code> and <code>stat_vline()</code> have been removed: these were never suitable for use other than with <code><a href="../reference/geom_abline.html">geom_abline()</a></code> etc and were not documented.</p></li>
<li><p><code><a href="../reference/geom_abline.html">geom_abline()</a></code>, <code><a href="../reference/geom_abline.html">geom_vline()</a></code> and <code><a href="../reference/geom_abline.html">geom_hline()</a></code> are bound to <code><a href="../reference/stat_identity.html">stat_identity()</a></code> and <code><a href="../reference/position_identity.html">position_identity()</a></code></p></li>
<li><p>Intercept parameters can no longer be set to a function.</p></li>
<li><p>They are all documented in one file, since they are so closely related.</p></li>
</ul>
</li>
<li><p><code><a href="../reference/geom_bin2d.html">geom_bin2d()</a></code> will now let you specify one dimension’s breaks exactly, without touching the other dimension’s default breaks at all (<a href='https://github.com/tidyverse/ggplot2/issues/1126'>#1126</a>).</p></li>
<li><p><code><a href="../reference/geom_linerange.html">geom_crossbar()</a></code> sets grouping correctly so you can display multiple crossbars on one plot. It also makes the default <code>fatten</code> argument a little bigger to make the middle line more obvious (<a href='https://github.com/tidyverse/ggplot2/issues/1125'>#1125</a>).</p></li>
<li><p><code><a href="../reference/geom_histogram.html">geom_histogram()</a></code> and <code><a href="../reference/geom_smooth.html">geom_smooth()</a></code> now only inform you about the default values once per layer, rather than once per panel (<a href='https://github.com/tidyverse/ggplot2/issues/1220'>#1220</a>).</p></li>
<li><p><code><a href="../reference/geom_linerange.html">geom_pointrange()</a></code> gains <code>fatten</code> argument so you can control the size of the point relative to the size of the line.</p></li>
<li><p><code><a href="../reference/geom_segment.html">geom_segment()</a></code> annotations were not transforming with scales (<a href='https://github.com/BrianDiggs'>@BrianDiggs</a>, <a href='https://github.com/tidyverse/ggplot2/issues/859'>#859</a>).</p></li>
<li><p><code><a href="../reference/geom_smooth.html">geom_smooth()</a></code> is no longer so chatty. If you want to know what the deafult smoothing method is, look it up in the documentation! (<a href='https://github.com/tidyverse/ggplot2/issues/1247'>#1247</a>)</p></li>
<li><p><code><a href="../reference/geom_violin.html">geom_violin()</a></code> now has the ability to draw quantile lines (<a href='https://github.com/DanRuderman'>@DanRuderman</a>).</p></li>
<li><p><code><a href="../reference/ggplot.html">ggplot()</a></code> now captures the parent frame to use for evaluation, rather than always defaulting to the global environment. This should make ggplot more suitable to use in more situations (e.g. with knitr)</p></li>
<li><p><code><a href="../reference/ggsave.html">ggsave()</a></code> has been simplified a little to make it easier to maintain. It no longer checks that you’re printing a ggplot2 object (so now also works with any grid grob) (<a href='https://github.com/tidyverse/ggplot2/issues/970'>#970</a>), and always requires a filename. Parameter <code>device</code> now supports character argument to specify which supported device to use (‘pdf’, ‘png’, ‘jpeg’, etc.), for when it cannot be correctly inferred from the file extension (for example when a temporary filename is supplied server side in shiny apps) (<a href='https://github.com/sebkopf'>@sebkopf</a>, <a href='https://github.com/tidyverse/ggplot2/issues/939'>#939</a>). It no longer opens a graphics device if one isn’t already open - this is annoying when you’re running from a script (<a href='https://github.com/tidyverse/ggplot2/issues/1326'>#1326</a>).</p></li>
<li><p><code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code> creates correct legend if only one color (<a href='https://github.com/krlmlr'>@krlmlr</a>, <a href='https://github.com/tidyverse/ggplot2/issues/943'>#943</a>).</p></li>
<li><p><code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code> no longer fails when the legend is empty - previously this often masked misspecifications elsewhere in the plot (<a href='https://github.com/tidyverse/ggplot2/issues/967'>#967</a>).</p></li>
<li><p>New <code><a href="../reference/ggplot_build.html">layer_data()</a></code> function extracts the data used for plotting for a given layer. It’s mostly useful for testing.</p></li>
<li><p>User supplied <code>minor_breaks</code> can now be supplied on the same scale as the data, and will be automatically transformed with by scale (<a href='https://github.com/tidyverse/ggplot2/issues/1385'>#1385</a>).</p></li>
<li><p>You can now suppress the appearance of an axis/legend title (and the space that would allocated for it) with <code>NULL</code> in the <code>scale_</code> function. To use the default lable, use <code><a href="../reference/waiver.html">waiver()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1145'>#1145</a>).</p></li>
<li><p>Position adjustments no longer warn about potentially varying ranges because the problem rarely occurs in practice and there are currently a lot of false positives since I don’t understand exactly what FP criteria I should be testing.</p></li>
<li><p><code><a href="../reference/scale_grey.html">scale_fill_grey()</a></code> now uses red for missing values. This matches <code><a href="../reference/scale_grey.html">scale_colour_grey()</a></code> and makes it obvious where missing values lie. Override with <code>na.value</code>.</p></li>
<li><p><code>scale_*_gradient2()</code> defaults to using Lab colour space.</p></li>
<li><p><code>scale_*_gradientn()</code> now allows <code>colours</code> or <code>colors</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1290'>#1290</a>)</p></li>
<li><p><code><a href="../reference/scale_continuous.html">scale_y_continuous()</a></code> now also transforms the <code>lower</code>, <code>middle</code> and <code>upper</code> aesthetics used by <code><a href="../reference/geom_boxplot.html">geom_boxplot()</a></code>: this only affects <code><a href="../reference/geom_boxplot.html">geom_boxplot(stat = "identity")</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1020'>#1020</a>).</p></li>
<li><p>Legends no longer inherit aesthetics if <code>inherit.aes</code> is FALSE (<a href='https://github.com/tidyverse/ggplot2/issues/1267'>#1267</a>).</p></li>
<li><p><code><a href="../reference/lims.html">lims()</a></code> makes it easy to set the limits of any axis (<a href='https://github.com/tidyverse/ggplot2/issues/1138'>#1138</a>).</p></li>
<li><p><code>labels = NULL</code> now works with <code><a href="../reference/guide_legend.html">guide_legend()</a></code> and <code><a href="../reference/guide_colourbar.html">guide_colorbar()</a></code>. (<a href='https://github.com/tidyverse/ggplot2/issues/1175'>#1175</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1183'>#1183</a>).</p></li>
<li><p><code>override.aes</code> now works with American aesthetic spelling, e.g. color</p></li>
<li><p>Scales no longer round data points to improve performance of colour palettes. Instead the scales package now uses a much faster colour interpolation algorithm (<a href='https://github.com/tidyverse/ggplot2/issues/1022'>#1022</a>).</p></li>
<li><p><code>scale_*_brewer()</code> and <code>scale_*_distiller()</code> add new <code>direction</code> argument of <code><a href="https://scales.r-lib.org//reference/brewer_pal.html">scales::brewer_pal</a></code>, making it easier to change the order of colours (<a href='https://github.com/jiho'>@jiho</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1139'>#1139</a>).</p></li>
<li><p><code><a href="../reference/scale_date.html">scale_x_date()</a></code> now clips dates outside the limits in the same way as <code><a href="../reference/scale_continuous.html">scale_x_continuous()</a></code> (<a href='https://github.com/tidyverse/ggplot2/issues/1090'>#1090</a>).</p></li>
<li><p><code><a href="../reference/geom_histogram.html">stat_bin()</a></code> gains <code>bins</code> arguments, which denotes the number of bins. Now you can set <code>bins=100</code> instead of <code>binwidth=0.5</code>. Note that <code>breaks</code> or <code>binwidth</code> will override it (<a href='https://github.com/tmshn'>@tmshn</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1158'>#1158</a>, <a href='https://github.com/tidyverse/ggplot2/issues/102'>#102</a>).</p></li>
<li><p><code><a href="../reference/geom_boxplot.html">stat_boxplot()</a></code> warns if a continuous variable is used for the <code>x</code> aesthetic without also supplying a <code>group</code> aesthetic (<a href='https://github.com/tidyverse/ggplot2/issues/992'>#992</a>, <a href='https://github.com/krlmlr'>@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/stat_summary_2d.html">stat_summary_2d()</a></code> and <code><a href="../reference/geom_bin2d.html">stat_bin_2d()</a></code> now share exactly the same code for determining breaks from <code>bins</code>, <code>binwidth</code>, and <code>origin</code>.</p></li>
<li><p><code><a href="../reference/stat_summary_2d.html">stat_summary_2d()</a></code> and <code><a href="../reference/geom_bin2d.html">stat_bin_2d()</a></code> now output in tile/raster compatible form instead of rect compatible form.</p></li>
<li><p>Automatically computed breaks do not lead to an error for transformations like “probit” where the inverse can map to infinity (<a href='https://github.com/tidyverse/ggplot2/issues/871'>#871</a>, <a href='https://github.com/krlmlr'>@krlmlr</a>)</p></li>
<li><p><code><a href="../reference/stat_function.html">stat_function()</a></code> now always evaluates the function on the original scale. Previously it computed the function on transformed scales, giving incorrect values (<a href='https://github.com/BrianDiggs'>@BrianDiggs</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1011'>#1011</a>).</p></li>
<li><p><code>strip_dots</code> works with anonymous functions within calculated aesthetics (e.g. <code>aes(sapply(..density.., function(x) mean(x))))</code> (<a href='https://github.com/tidyverse/ggplot2/issues/1154'>#1154</a>, <a href='https://github.com/NikNakk'>@NikNakk</a>)</p></li>
<li><p><code><a href="../reference/theme.html">theme()</a></code> gains <code>validate = FALSE</code> parameter to turn off validation, and hence store arbitrary additional data in the themes. (<a href='https://github.com/tdhock'>@tdhock</a>, <a href='https://github.com/tidyverse/ggplot2/issues/1121'>#1121</a>)</p></li>
<li><p>Improved the calculation of segments needed to draw the curve representing a line when plotted in polar coordinates. In some cases, the last segment of a multi-segment line was not drawn (<a href='https://github.com/BrianDiggs'>@BrianDiggs</a>, <a href='https://github.com/tidyverse/ggplot2/issues/952'>#952</a>)</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#ggplot2-3-2-1">3.2.1</a></li>
        <li><a href="#ggplot2-3-2-0">3.2.0</a></li>
        <li><a href="#ggplot2-3-1-0">3.1.0</a></li>
        <li><a href="#ggplot2-3-0-0">3.0.0</a></li>
        <li><a href="#ggplot2-2-2-1">2.2.1</a></li>
        <li><a href="#ggplot2-2-2-0">2.2.0</a></li>
        <li><a href="#ggplot2-2-1-0">2.1.0</a></li>
        <li><a href="#ggplot2-2-0-0">2.0.0</a></li>
      </ul>
    </div>
  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


