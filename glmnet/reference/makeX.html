<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>convert a data frame to a data matrix with one-hot encoding — makeX • glmnet</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="convert a data frame to a data matrix with one-hot encoding — makeX" />
<meta property="og:description" content="Converts a data frame to a data matrix suitable for input to glmnet.
Factors are converted to dummy matrices via &quot;one-hot&quot; encoding. Options deal
with missing values and sparsity." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">glmnet</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/glmnet.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Coxnet.html">Coxnet: Regularized Cox Regression</a>
    </li>
    <li>
      <a href="../articles/relax.html">Relaxed fits and other additions in `glmnet` 3.0</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>convert a data frame to a data matrix with one-hot encoding</h1>
    
    <div class="hidden name"><code>makeX.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Converts a data frame to a data matrix suitable for input to <code>glmnet</code>.
Factors are converted to dummy matrices via "one-hot" encoding. Options deal
with missing values and sparsity.</p>
    </div>

    <pre class="usage"><span class='fu'>makeX</span>(<span class='no'>train</span>, <span class='kw'>test</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>na.impute</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>train</th>
      <td><p>Required argument. A dataframe consisting of vectors, matrices
and factors</p></td>
    </tr>
    <tr>
      <th>test</th>
      <td><p>Optional argument. A dataframe matching 'train' for use as
testing data</p></td>
    </tr>
    <tr>
      <th>na.impute</th>
      <td><p>Logical, default <code>FALSE</code>. If <code>TRUE</code>, missing
values for any column in the resultant 'x' matrix are replaced by the means
of the nonmissing values derived from 'train'</p></td>
    </tr>
    <tr>
      <th>sparse</th>
      <td><p>Logical, default <code>FALSE</code>. If <code>TRUE</code> then the
returned matrice(s) are converted to matrices of class "CsparseMatrix".
Useful if some factors have a large number of levels, resulting in very big
matrices, mostly zero</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments, currently unused</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If only 'train' was provided, the function returns a matrix 'x'. If
missing values were imputed, this matrix has an attribute containing its
column means (before imputation). If 'test' was provided as well, a list
with two components is returned: 'x' and 'xtest'.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The main function is to convert factors to dummy matrices via "one-hot"
encoding. Having the 'train' and 'test' data present is useful if some
factor levels are missing in either. Since a factor with k levels leads to a
submatrix with 1/k entries zero, with large k the <code>sparse=TRUE</code> option
can be helpful; a large matrix will be returned, but stored in sparse matrix
format. Finally, the function can deal with missing data. The current
version has the option to replace missing observations with the mean from
the training data. For dummy submatrices, these are the mean proportions at
each level.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>glmnet</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>101</span>)
<span class='co'>### Single data frame</span>
<span class='no'>X</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>20</span>), <span class='fl'>10</span>, <span class='fl'>2</span>)
<span class='no'>X3</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>10</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>X4</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='no'>LETTERS</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>10</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>df</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='no'>X</span>, <span class='no'>X3</span>, <span class='no'>X4</span>)
<span class='fu'>makeX</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt;            X1         X2 X3a X3b X3c X4A X4B X4C
#&gt; 1  -0.3260365  0.5264481   0   1   0   0   0   1
#&gt; 2   0.5524619 -0.7948444   0   0   1   0   1   0
#&gt; 3  -0.6749438  1.4277555   1   0   0   0   1   0
#&gt; 4   0.2143595 -1.4668197   1   0   0   1   0   0
#&gt; 5   0.3107692 -0.2366834   1   0   0   0   1   0
#&gt; 6   1.1739663 -0.1933380   0   1   0   1   0   0
#&gt; 7   0.6187899 -0.8497547   1   0   0   1   0   0
#&gt; 8  -0.1127343  0.0584655   0   1   0   1   0   0
#&gt; 9   0.9170283 -0.8176704   0   1   0   0   0   1
#&gt; 10 -0.2232594 -2.0503078   0   0   1   0   0   1</div><div class='input'><span class='fu'>makeX</span>(<span class='no'>df</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; 10 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2 X3a X3b X3c X4A X4B X4C
#&gt; 1  -0.3260365  0.5264481   .   1   .   .   .   1
#&gt; 2   0.5524619 -0.7948444   .   .   1   .   1   .
#&gt; 3  -0.6749438  1.4277555   1   .   .   .   1   .
#&gt; 4   0.2143595 -1.4668197   1   .   .   1   .   .
#&gt; 5   0.3107692 -0.2366834   1   .   .   .   1   .
#&gt; 6   1.1739663 -0.1933380   .   1   .   1   .   .
#&gt; 7   0.6187899 -0.8497547   1   .   .   1   .   .
#&gt; 8  -0.1127343  0.0584655   .   1   .   1   .   .
#&gt; 9   0.9170283 -0.8176704   .   1   .   .   .   1
#&gt; 10 -0.2232594 -2.0503078   .   .   1   .   .   1</div><div class='input'>
<span class='co'>### Single data freame with missing values</span>
<span class='no'>Xn</span> <span class='kw'>=</span> <span class='no'>X</span>
<span class='no'>Xn</span>[<span class='fl'>3</span>, <span class='fl'>1</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>Xn</span>[<span class='fl'>5</span>, <span class='fl'>2</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>X3n</span> <span class='kw'>=</span> <span class='no'>X3</span>
<span class='no'>X3n</span>[<span class='fl'>6</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>X4n</span> <span class='kw'>=</span> <span class='no'>X4</span>
<span class='no'>X4n</span>[<span class='fl'>9</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>dfn</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='no'>Xn</span>, <span class='no'>X3n</span>, <span class='no'>X4n</span>)

<span class='fu'>makeX</span>(<span class='no'>dfn</span>)</div><div class='output co'>#&gt;            X1         X2 X3na X3nb X3nc X4nA X4nB X4nC
#&gt; 1  -0.3260365  0.5264481    0    1    0    0    0    1
#&gt; 2   0.5524619 -0.7948444    0    0    1    0    1    0
#&gt; 3          NA  1.4277555    1    0    0    0    1    0
#&gt; 4   0.2143595 -1.4668197    1    0    0    1    0    0
#&gt; 5   0.3107692         NA    1    0    0    0    1    0
#&gt; 6   1.1739663 -0.1933380   NA   NA   NA    1    0    0
#&gt; 7   0.6187899 -0.8497547    1    0    0    1    0    0
#&gt; 8  -0.1127343  0.0584655    0    1    0    1    0    0
#&gt; 9   0.9170283 -0.8176704    0    1    0   NA   NA   NA
#&gt; 10 -0.2232594 -2.0503078    0    0    1    0    0    1</div><div class='input'><span class='fu'>makeX</span>(<span class='no'>dfn</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; 10 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2 X3na X3nb X3nc X4nA X4nB X4nC
#&gt; 1  -0.3260365  0.5264481    .    1    .    .    .    1
#&gt; 2   0.5524619 -0.7948444    .    .    1    .    1    .
#&gt; 3          NA  1.4277555    1    .    .    .    1    .
#&gt; 4   0.2143595 -1.4668197    1    .    .    1    .    .
#&gt; 5   0.3107692         NA    1    .    .    .    1    .
#&gt; 6   1.1739663 -0.1933380   NA   NA   NA    1    .    .
#&gt; 7   0.6187899 -0.8497547    1    .    .    1    .    .
#&gt; 8  -0.1127343  0.0584655    .    1    .    1    .    .
#&gt; 9   0.9170283 -0.8176704    .    1    .   NA   NA   NA
#&gt; 10 -0.2232594 -2.0503078    .    .    1    .    .    1</div><div class='input'><span class='fu'>makeX</span>(<span class='no'>dfn</span>, <span class='kw'>na.impute</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;            X1         X2      X3na      X3nb      X3nc      X4nA      X4nB
#&gt; 1  -0.3260365  0.5264481 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000
#&gt; 2   0.5524619 -0.7948444 0.0000000 0.0000000 1.0000000 0.0000000 1.0000000
#&gt; 3   0.3472605  1.4277555 1.0000000 0.0000000 0.0000000 0.0000000 1.0000000
#&gt; 4   0.2143595 -1.4668197 1.0000000 0.0000000 0.0000000 1.0000000 0.0000000
#&gt; 5   0.3107692 -0.4622295 1.0000000 0.0000000 0.0000000 0.0000000 1.0000000
#&gt; 6   1.1739663 -0.1933380 0.4444444 0.3333333 0.2222222 1.0000000 0.0000000
#&gt; 7   0.6187899 -0.8497547 1.0000000 0.0000000 0.0000000 1.0000000 0.0000000
#&gt; 8  -0.1127343  0.0584655 0.0000000 1.0000000 0.0000000 1.0000000 0.0000000
#&gt; 9   0.9170283 -0.8176704 0.0000000 1.0000000 0.0000000 0.4444444 0.3333333
#&gt; 10 -0.2232594 -2.0503078 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000
#&gt;         X4nC
#&gt; 1  1.0000000
#&gt; 2  0.0000000
#&gt; 3  0.0000000
#&gt; 4  0.0000000
#&gt; 5  0.0000000
#&gt; 6  0.0000000
#&gt; 7  0.0000000
#&gt; 8  0.0000000
#&gt; 9  0.2222222
#&gt; 10 1.0000000
#&gt; attr(,"means")
#&gt;         X1         X2       X3na       X3nb       X3nc       X4nA       X4nB 
#&gt;  0.3472605 -0.4622295  0.4444444  0.3333333  0.2222222  0.4444444  0.3333333 
#&gt;       X4nC 
#&gt;  0.2222222 </div><div class='input'><span class='fu'>makeX</span>(<span class='no'>dfn</span>, <span class='kw'>na.impute</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; 10 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2      X3na      X3nb      X3nc      X4nA      X4nB
#&gt; 1  -0.3260365  0.5264481 .         1.0000000 .         .         .        
#&gt; 2   0.5524619 -0.7948444 .         .         1.0000000 .         1.0000000
#&gt; 3   0.3472605  1.4277555 1.0000000 .         .         .         1.0000000
#&gt; 4   0.2143595 -1.4668197 1.0000000 .         .         1.0000000 .        
#&gt; 5   0.3107692 -0.4622295 1.0000000 .         .         .         1.0000000
#&gt; 6   1.1739663 -0.1933380 0.4444444 0.3333333 0.2222222 1.0000000 .        
#&gt; 7   0.6187899 -0.8497547 1.0000000 .         .         1.0000000 .        
#&gt; 8  -0.1127343  0.0584655 .         1.0000000 .         1.0000000 .        
#&gt; 9   0.9170283 -0.8176704 .         1.0000000 .         0.4444444 0.3333333
#&gt; 10 -0.2232594 -2.0503078 .         .         1.0000000 .         .        
#&gt;         X4nC
#&gt; 1  1.0000000
#&gt; 2  .        
#&gt; 3  .        
#&gt; 4  .        
#&gt; 5  .        
#&gt; 6  .        
#&gt; 7  .        
#&gt; 8  .        
#&gt; 9  0.2222222
#&gt; 10 1.0000000</div><div class='input'>
<span class='co'>### Test data as well</span>
<span class='no'>X</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>10</span>), <span class='fl'>5</span>, <span class='fl'>2</span>)
<span class='no'>X3</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>5</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>X4</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='no'>LETTERS</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>5</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>dft</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='no'>X</span>, <span class='no'>X3</span>, <span class='no'>X4</span>)

<span class='fu'>makeX</span>(<span class='no'>df</span>, <span class='no'>dft</span>)</div><div class='output co'>#&gt; $x
#&gt;            X1         X2 X3a X3b X3c X4A X4B X4C
#&gt; 1  -0.3260365  0.5264481   0   1   0   0   0   1
#&gt; 2   0.5524619 -0.7948444   0   0   1   0   1   0
#&gt; 3  -0.6749438  1.4277555   1   0   0   0   1   0
#&gt; 4   0.2143595 -1.4668197   1   0   0   1   0   0
#&gt; 5   0.3107692 -0.2366834   1   0   0   0   1   0
#&gt; 6   1.1739663 -0.1933380   0   1   0   1   0   0
#&gt; 7   0.6187899 -0.8497547   1   0   0   1   0   0
#&gt; 8  -0.1127343  0.0584655   0   1   0   1   0   0
#&gt; 9   0.9170283 -0.8176704   0   1   0   0   0   1
#&gt; 10 -0.2232594 -2.0503078   0   0   1   0   0   1
#&gt; 
#&gt; $xtest
#&gt;            X1         X2 X3a X3b X3c X4A X4B X4C
#&gt; 11 -0.5098443 -0.7556130   0   1   0   0   1   0
#&gt; 12  1.5661805  1.7384118   0   0   1   0   1   0
#&gt; 13  1.5273728  0.7580952   0   1   0   0   1   0
#&gt; 14  1.0059925  2.1152294   1   0   0   1   0   0
#&gt; 15 -0.5829222  1.6704604   0   1   0   0   1   0
#&gt; </div><div class='input'><span class='fu'>makeX</span>(<span class='no'>df</span>, <span class='no'>dft</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; $x
#&gt; 10 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2 X3a X3b X3c X4A X4B X4C
#&gt; 1  -0.3260365  0.5264481   .   1   .   .   .   1
#&gt; 2   0.5524619 -0.7948444   .   .   1   .   1   .
#&gt; 3  -0.6749438  1.4277555   1   .   .   .   1   .
#&gt; 4   0.2143595 -1.4668197   1   .   .   1   .   .
#&gt; 5   0.3107692 -0.2366834   1   .   .   .   1   .
#&gt; 6   1.1739663 -0.1933380   .   1   .   1   .   .
#&gt; 7   0.6187899 -0.8497547   1   .   .   1   .   .
#&gt; 8  -0.1127343  0.0584655   .   1   .   1   .   .
#&gt; 9   0.9170283 -0.8176704   .   1   .   .   .   1
#&gt; 10 -0.2232594 -2.0503078   .   .   1   .   .   1
#&gt; 
#&gt; $xtest
#&gt; 5 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2 X3a X3b X3c X4A X4B X4C
#&gt; 11 -0.5098443 -0.7556130   .   1   .   .   1   .
#&gt; 12  1.5661805  1.7384118   .   .   1   .   1   .
#&gt; 13  1.5273728  0.7580952   .   1   .   .   1   .
#&gt; 14  1.0059925  2.1152294   1   .   .   1   .   .
#&gt; 15 -0.5829222  1.6704604   .   1   .   .   1   .
#&gt; </div><div class='input'>
<span class='co'>### Missing data in test as well</span>
<span class='no'>Xn</span> <span class='kw'>=</span> <span class='no'>X</span>
<span class='no'>Xn</span>[<span class='fl'>3</span>, <span class='fl'>1</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>Xn</span>[<span class='fl'>5</span>, <span class='fl'>2</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>X3n</span> <span class='kw'>=</span> <span class='no'>X3</span>
<span class='no'>X3n</span>[<span class='fl'>1</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>X4n</span> <span class='kw'>=</span> <span class='no'>X4</span>
<span class='no'>X4n</span>[<span class='fl'>2</span>] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>dftn</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='no'>Xn</span>, <span class='no'>X3n</span>, <span class='no'>X4n</span>)

<span class='fu'>makeX</span>(<span class='no'>dfn</span>, <span class='no'>dftn</span>)</div><div class='output co'>#&gt; $x
#&gt;            X1         X2 X3na X3nb X3nc X4nA X4nB X4nC
#&gt; 1  -0.3260365  0.5264481    0    1    0    0    0    1
#&gt; 2   0.5524619 -0.7948444    0    0    1    0    1    0
#&gt; 3          NA  1.4277555    1    0    0    0    1    0
#&gt; 4   0.2143595 -1.4668197    1    0    0    1    0    0
#&gt; 5   0.3107692         NA    1    0    0    0    1    0
#&gt; 6   1.1739663 -0.1933380   NA   NA   NA    1    0    0
#&gt; 7   0.6187899 -0.8497547    1    0    0    1    0    0
#&gt; 8  -0.1127343  0.0584655    0    1    0    1    0    0
#&gt; 9   0.9170283 -0.8176704    0    1    0   NA   NA   NA
#&gt; 10 -0.2232594 -2.0503078    0    0    1    0    0    1
#&gt; 
#&gt; $xtest
#&gt;            X1         X2 X3na X3nb X3nc X4nA X4nB X4nC
#&gt; 11 -0.5098443 -0.7556130   NA   NA   NA    0    1    0
#&gt; 12  1.5661805  1.7384118    0    0    1   NA   NA   NA
#&gt; 13         NA  0.7580952    0    1    0    0    1    0
#&gt; 14  1.0059925  2.1152294    1    0    0    1    0    0
#&gt; 15 -0.5829222         NA    0    1    0    0    1    0
#&gt; </div><div class='input'><span class='fu'>makeX</span>(<span class='no'>dfn</span>, <span class='no'>dftn</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; $x
#&gt; 10 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2 X3na X3nb X3nc X4nA X4nB X4nC
#&gt; 1  -0.3260365  0.5264481    .    1    .    .    .    1
#&gt; 2   0.5524619 -0.7948444    .    .    1    .    1    .
#&gt; 3          NA  1.4277555    1    .    .    .    1    .
#&gt; 4   0.2143595 -1.4668197    1    .    .    1    .    .
#&gt; 5   0.3107692         NA    1    .    .    .    1    .
#&gt; 6   1.1739663 -0.1933380   NA   NA   NA    1    .    .
#&gt; 7   0.6187899 -0.8497547    1    .    .    1    .    .
#&gt; 8  -0.1127343  0.0584655    .    1    .    1    .    .
#&gt; 9   0.9170283 -0.8176704    .    1    .   NA   NA   NA
#&gt; 10 -0.2232594 -2.0503078    .    .    1    .    .    1
#&gt; 
#&gt; $xtest
#&gt; 5 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2 X3na X3nb X3nc X4nA X4nB X4nC
#&gt; 11 -0.5098443 -0.7556130   NA   NA   NA    .    1    .
#&gt; 12  1.5661805  1.7384118    .    .    1   NA   NA   NA
#&gt; 13         NA  0.7580952    .    1    .    .    1    .
#&gt; 14  1.0059925  2.1152294    1    .    .    1    .    .
#&gt; 15 -0.5829222         NA    .    1    .    .    1    .
#&gt; </div><div class='input'><span class='fu'>makeX</span>(<span class='no'>dfn</span>, <span class='no'>dftn</span>, <span class='kw'>na.impute</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; $x
#&gt;            X1         X2      X3na      X3nb      X3nc      X4nA      X4nB
#&gt; 1  -0.3260365  0.5264481 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000
#&gt; 2   0.5524619 -0.7948444 0.0000000 0.0000000 1.0000000 0.0000000 1.0000000
#&gt; 3   0.3472605  1.4277555 1.0000000 0.0000000 0.0000000 0.0000000 1.0000000
#&gt; 4   0.2143595 -1.4668197 1.0000000 0.0000000 0.0000000 1.0000000 0.0000000
#&gt; 5   0.3107692 -0.4622295 1.0000000 0.0000000 0.0000000 0.0000000 1.0000000
#&gt; 6   1.1739663 -0.1933380 0.4444444 0.3333333 0.2222222 1.0000000 0.0000000
#&gt; 7   0.6187899 -0.8497547 1.0000000 0.0000000 0.0000000 1.0000000 0.0000000
#&gt; 8  -0.1127343  0.0584655 0.0000000 1.0000000 0.0000000 1.0000000 0.0000000
#&gt; 9   0.9170283 -0.8176704 0.0000000 1.0000000 0.0000000 0.4444444 0.3333333
#&gt; 10 -0.2232594 -2.0503078 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000
#&gt;         X4nC
#&gt; 1  1.0000000
#&gt; 2  0.0000000
#&gt; 3  0.0000000
#&gt; 4  0.0000000
#&gt; 5  0.0000000
#&gt; 6  0.0000000
#&gt; 7  0.0000000
#&gt; 8  0.0000000
#&gt; 9  0.2222222
#&gt; 10 1.0000000
#&gt; attr(,"means")
#&gt;         X1         X2       X3na       X3nb       X3nc       X4nA       X4nB 
#&gt;  0.3472605 -0.4622295  0.4444444  0.3333333  0.2222222  0.4444444  0.3333333 
#&gt;       X4nC 
#&gt;  0.2222222 
#&gt; 
#&gt; $xtest
#&gt;            X1         X2      X3na      X3nb      X3nc      X4nA      X4nB
#&gt; 11 -0.5098443 -0.7556130 0.4444444 0.3333333 0.2222222 0.0000000 1.0000000
#&gt; 12  1.5661805  1.7384118 0.0000000 0.0000000 1.0000000 0.4444444 0.3333333
#&gt; 13  0.3472605  0.7580952 0.0000000 1.0000000 0.0000000 0.0000000 1.0000000
#&gt; 14  1.0059925  2.1152294 1.0000000 0.0000000 0.0000000 1.0000000 0.0000000
#&gt; 15 -0.5829222 -0.4622295 0.0000000 1.0000000 0.0000000 0.0000000 1.0000000
#&gt;         X4nC
#&gt; 11 0.0000000
#&gt; 12 0.2222222
#&gt; 13 0.0000000
#&gt; 14 0.0000000
#&gt; 15 0.0000000
#&gt; </div><div class='input'><span class='fu'>makeX</span>(<span class='no'>dfn</span>, <span class='no'>dftn</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>na.impute</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; $x
#&gt; 10 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2      X3na      X3nb      X3nc      X4nA      X4nB
#&gt; 1  -0.3260365  0.5264481 .         1.0000000 .         .         .        
#&gt; 2   0.5524619 -0.7948444 .         .         1.0000000 .         1.0000000
#&gt; 3   0.3472605  1.4277555 1.0000000 .         .         .         1.0000000
#&gt; 4   0.2143595 -1.4668197 1.0000000 .         .         1.0000000 .        
#&gt; 5   0.3107692 -0.4622295 1.0000000 .         .         .         1.0000000
#&gt; 6   1.1739663 -0.1933380 0.4444444 0.3333333 0.2222222 1.0000000 .        
#&gt; 7   0.6187899 -0.8497547 1.0000000 .         .         1.0000000 .        
#&gt; 8  -0.1127343  0.0584655 .         1.0000000 .         1.0000000 .        
#&gt; 9   0.9170283 -0.8176704 .         1.0000000 .         0.4444444 0.3333333
#&gt; 10 -0.2232594 -2.0503078 .         .         1.0000000 .         .        
#&gt;         X4nC
#&gt; 1  1.0000000
#&gt; 2  .        
#&gt; 3  .        
#&gt; 4  .        
#&gt; 5  .        
#&gt; 6  .        
#&gt; 7  .        
#&gt; 8  .        
#&gt; 9  0.2222222
#&gt; 10 1.0000000
#&gt; 
#&gt; $xtest
#&gt; 5 x 8 sparse Matrix of class "dgCMatrix"
#&gt;            X1         X2      X3na      X3nb      X3nc      X4nA      X4nB
#&gt; 11 -0.5098443 -0.7556130 0.4444444 0.3333333 0.2222222 .         1.0000000
#&gt; 12  1.5661805  1.7384118 .         .         1.0000000 0.4444444 0.3333333
#&gt; 13  0.3472605  0.7580952 .         1.0000000 .         .         1.0000000
#&gt; 14  1.0059925  2.1152294 1.0000000 .         .         1.0000000 .        
#&gt; 15 -0.5829222 -0.4622295 .         1.0000000 .         .         1.0000000
#&gt;         X4nC
#&gt; 11 .        
#&gt; 12 0.2222222
#&gt; 13 .        
#&gt; 14 .        
#&gt; 15 .        
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Trevor Hastie<br /> Maintainer: Trevor Hastie <a href='mailto:hastie@stanford.edu'>hastie@stanford.edu</a></p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jerome Friedman, Trevor Hastie, Rob Tibshirani, Balasubramanian Narasimhan, Noah Simon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


