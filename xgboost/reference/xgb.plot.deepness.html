<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot model trees deepness — xgb.ggplot.deepness • xgboost</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Plot model trees deepness — xgb.ggplot.deepness" />
<meta property="og:description" content="Visualizes distributions related to depth of tree leafs.
xgb.plot.deepness uses base R graphics, while xgb.ggplot.deepness uses the ggplot backend." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xgboost</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.90.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/discoverYourData.html">Understand your dataset with Xgboost</a>
    </li>
    <li>
      <a href="../articles/xgboostPresentation.html">Xgboost presentation</a>
    </li>
    <li>
      <a href="../articles/xgboostfromJSON.html">XGBoost from JSON</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dmlc/xgboost">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot model trees deepness</h1>
    <small class="dont-index">Source: <a href='https://github.com/dmlc/xgboost/blob/master/R/xgb.ggplot.R'><code>R/xgb.ggplot.R</code></a>, <a href='https://github.com/dmlc/xgboost/blob/master/R/xgb.plot.deepness.R'><code>R/xgb.plot.deepness.R</code></a></small>
    <div class="hidden name"><code>xgb.plot.deepness.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Visualizes distributions related to depth of tree leafs.
<code>xgb.plot.deepness</code> uses base R graphics, while <code>xgb.ggplot.deepness</code> uses the ggplot backend.</p>
    </div>

    <pre class="usage"><span class='fu'>xgb.ggplot.deepness</span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>which</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"2x1"</span>, <span class='st'>"max.depth"</span>, <span class='st'>"med.depth"</span>,
  <span class='st'>"med.weight"</span>))

<span class='fu'>xgb.plot.deepness</span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>which</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"2x1"</span>, <span class='st'>"max.depth"</span>, <span class='st'>"med.depth"</span>,
  <span class='st'>"med.weight"</span>), <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>either an <code>xgb.Booster</code> model generated by the <code>xgb.train</code> function
or a data.table result of the <code>xgb.model.dt.tree</code> function.</p></td>
    </tr>
    <tr>
      <th>which</th>
      <td><p>which distribution to plot (see details).</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>(base R barplot) whether a barplot should be produced. 
If FALSE, only a data.table is returned.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other parameters passed to <code>barplot</code> or <code>plot</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Other than producing plots (when <code>plot=TRUE</code>), the <code>xgb.plot.deepness</code> function
silently returns a processed data.table where each row corresponds to a terminal leaf in a tree model,
and contains information about leaf's depth, cover, and weight (which is used in calculating predictions).</p>
<p>The <code>xgb.ggplot.deepness</code> silently returns either a list of two ggplot graphs when <code>which="2x1"</code>
or a single ggplot graph for the other <code>which</code> options.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When <code>which="2x1"</code>, two distributions with respect to the leaf depth
are plotted on top of each other:</p><ul>
<li><p>the distribution of the number of leafs in a tree model at a certain depth;</p></li>
<li><p>the distribution of average weighted number of observations ("cover") 
       ending up in leafs at certain depth.</p></li>
</ul><p>Those could be helpful in determining sensible ranges of the <code>max_depth</code> 
and <code>min_child_weight</code> parameters.</p>
<p>When <code>which="max.depth"</code> or <code>which="med.depth"</code>, plots of either maximum or median depth
per tree with respect to tree number are created. And <code>which="med.weight"</code> allows to see how
a tree's median absolute leaf weight changes through the iterations.</p>
<p>This function was inspired by the blog post
<a href='https://github.com/aysent/random-forest-leaf-visualization'>https://github.com/aysent/random-forest-leaf-visualization</a>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='xgb.train.html'>xgb.train</a></code>, <code><a href='xgb.model.dt.tree.html'>xgb.model.dt.tree</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>agaricus.train</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>'xgboost'</span>)

<span class='co'># Change max_depth to a higher number to get a more significant result</span>
<span class='no'>bst</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='xgb.train.html'>xgboost</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>agaricus.train</span>$<span class='no'>data</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='no'>agaricus.train</span>$<span class='no'>label</span>, <span class='kw'>max_depth</span> <span class='kw'>=</span> <span class='fl'>6</span>,
               <span class='kw'>eta</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>nthread</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>nrounds</span> <span class='kw'>=</span> <span class='fl'>50</span>, <span class='kw'>objective</span> <span class='kw'>=</span> <span class='st'>"binary:logistic"</span>,
               <span class='kw'>subsample</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>min_child_weight</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; [1]	train-error:0.001996 
#&gt; [2]	train-error:0.002764 
#&gt; [3]	train-error:0.002764 
#&gt; [4]	train-error:0.003071 
#&gt; [5]	train-error:0.003071 
#&gt; [6]	train-error:0.001996 
#&gt; [7]	train-error:0.001228 
#&gt; [8]	train-error:0.001228 
#&gt; [9]	train-error:0.001228 
#&gt; [10]	train-error:0.001228 
#&gt; [11]	train-error:0.001228 
#&gt; [12]	train-error:0.001228 
#&gt; [13]	train-error:0.001228 
#&gt; [14]	train-error:0.001228 
#&gt; [15]	train-error:0.001228 
#&gt; [16]	train-error:0.001228 
#&gt; [17]	train-error:0.001228 
#&gt; [18]	train-error:0.001228 
#&gt; [19]	train-error:0.001228 
#&gt; [20]	train-error:0.001228 
#&gt; [21]	train-error:0.001228 
#&gt; [22]	train-error:0.001228 
#&gt; [23]	train-error:0.001228 
#&gt; [24]	train-error:0.001228 
#&gt; [25]	train-error:0.001228 
#&gt; [26]	train-error:0.001228 
#&gt; [27]	train-error:0.001228 
#&gt; [28]	train-error:0.001228 
#&gt; [29]	train-error:0.001228 
#&gt; [30]	train-error:0.001228 
#&gt; [31]	train-error:0.001228 
#&gt; [32]	train-error:0.001228 
#&gt; [33]	train-error:0.001228 
#&gt; [34]	train-error:0.001228 
#&gt; [35]	train-error:0.001228 
#&gt; [36]	train-error:0.001228 
#&gt; [37]	train-error:0.001228 
#&gt; [38]	train-error:0.001228 
#&gt; [39]	train-error:0.001228 
#&gt; [40]	train-error:0.000614 
#&gt; [41]	train-error:0.000000 
#&gt; [42]	train-error:0.000000 
#&gt; [43]	train-error:0.000000 
#&gt; [44]	train-error:0.000000 
#&gt; [45]	train-error:0.000000 
#&gt; [46]	train-error:0.000000 
#&gt; [47]	train-error:0.000000 
#&gt; [48]	train-error:0.000000 
#&gt; [49]	train-error:0.000000 
#&gt; [50]	train-error:0.000000 </div><div class='input'>
<span class='fu'>xgb.plot.deepness</span>(<span class='no'>bst</span>)</div><div class='output co'>#&gt; <span class='error'>Error: igraph package is required for plotting the graph deepness.</span></div><div class='input'><span class='fu'>xgb.ggplot.deepness</span>(<span class='no'>bst</span>)</div><div class='output co'>#&gt; <span class='error'>Error: igraph package is required for plotting the graph deepness.</span></div><div class='input'>
<span class='fu'>xgb.plot.deepness</span>(<span class='no'>bst</span>, <span class='kw'>which</span><span class='kw'>=</span><span class='st'>'max.depth'</span>, <span class='kw'>pch</span><span class='kw'>=</span><span class='fl'>16</span>, <span class='kw'>col</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/grDevices/rgb.html'>rgb</a></span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0.3</span>), <span class='kw'>cex</span><span class='kw'>=</span><span class='fl'>2</span>)</div><div class='output co'>#&gt; <span class='error'>Error: igraph package is required for plotting the graph deepness.</span></div><div class='input'>
<span class='fu'>xgb.plot.deepness</span>(<span class='no'>bst</span>, <span class='kw'>which</span><span class='kw'>=</span><span class='st'>'med.weight'</span>, <span class='kw'>pch</span><span class='kw'>=</span><span class='fl'>16</span>, <span class='kw'>col</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/grDevices/rgb.html'>rgb</a></span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0.3</span>), <span class='kw'>cex</span><span class='kw'>=</span><span class='fl'>2</span>)</div><div class='output co'>#&gt; <span class='error'>Error: igraph package is required for plotting the graph deepness.</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tianqi Chen, Tong He, Michael Benesty, Vadim Khotilovich, Yuan Tang, Hyunsu Cho, Kailong Chen, Rory Mitchell, Ignacio Cano, Tianyi Zhou, Mu Li, Junyuan Xie, Min Lin, Yifeng Geng, Yutian Li.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


