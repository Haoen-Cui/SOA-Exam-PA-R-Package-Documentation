<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cross Validation — xgb.cv • xgboost</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Cross Validation — xgb.cv" />
<meta property="og:description" content="The cross validation function of xgboost" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xgboost</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.90.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/discoverYourData.html">Understand your dataset with Xgboost</a>
    </li>
    <li>
      <a href="../articles/xgboostPresentation.html">Xgboost presentation</a>
    </li>
    <li>
      <a href="../articles/xgboostfromJSON.html">XGBoost from JSON</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dmlc/xgboost">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cross Validation</h1>
    <small class="dont-index">Source: <a href='https://github.com/dmlc/xgboost/blob/master/R/xgb.cv.R'><code>R/xgb.cv.R</code></a></small>
    <div class="hidden name"><code>xgb.cv.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The cross validation function of xgboost</p>
    </div>

    <pre class="usage"><span class='fu'>xgb.cv</span>(<span class='kw'>params</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(), <span class='no'>data</span>, <span class='no'>nrounds</span>, <span class='no'>nfold</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>missing</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>prediction</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>showsd</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>metrics</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(), <span class='kw'>obj</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>feval</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>stratified</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>folds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>print_every_n</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>early_stopping_rounds</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>maximize</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>callbacks</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(), <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>params</th>
      <td><p>the list of parameters. Commonly used ones are:</p><ul>
<li><p><code>objective</code> objective function, common ones are</p><ul>
<li><p><code>reg:squarederror</code> Regression with squared loss</p></li>
<li><p><code>binary:logistic</code> logistic regression for classification</p></li>
</ul></li>
<li><p><code>eta</code> step size of each boosting step</p></li>
<li><p><code>max_depth</code> maximum depth of the tree</p></li>
<li><p><code>nthread</code> number of thread used in training, if not set, all threads are used</p></li>
</ul>

<p>See <code><a href='xgb.train.html'>xgb.train</a></code> for further details.
  See also demo/ for walkthrough example in R.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>takes an <code>xgb.DMatrix</code>, <code>matrix</code>, or <code>dgCMatrix</code> as the input.</p></td>
    </tr>
    <tr>
      <th>nrounds</th>
      <td><p>the max number of iterations</p></td>
    </tr>
    <tr>
      <th>nfold</th>
      <td><p>the original dataset is randomly partitioned into <code>nfold</code> equal size subsamples.</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>vector of response values. Should be provided only when data is an R-matrix.</p></td>
    </tr>
    <tr>
      <th>missing</th>
      <td><p>is only used when input is a dense matrix. By default is set to NA, which means
that NA values should be considered as 'missing' by the algorithm.
Sometimes, 0 or other extreme value might be used to represent missing values.</p></td>
    </tr>
    <tr>
      <th>prediction</th>
      <td><p>A logical value indicating whether to return the test fold predictions
from each CV model. This parameter engages the <code><a href='cb.cv.predict.html'>cb.cv.predict</a></code> callback.</p></td>
    </tr>
    <tr>
      <th>showsd</th>
      <td><p><code>boolean</code>, whether to show standard deviation of cross validation</p></td>
    </tr>
    <tr>
      <th>metrics, </th>
      <td><p>list of evaluation metrics to be used in cross validation,
  when it is not specified, the evaluation metric is chosen according to objective function.
  Possible options are:</p><ul>
<li><p><code>error</code> binary classification error rate</p></li>
<li><p><code>rmse</code> Rooted mean square error</p></li>
<li><p><code>logloss</code> negative log-likelihood function</p></li>
<li><p><code>auc</code> Area under curve</p></li>
<li><p><code>aucpr</code> Area under PR curve</p></li>
<li><p><code>merror</code> Exact matching error, used to evaluate multi-class classification</p></li>
</ul></td>
    </tr>
    <tr>
      <th>obj</th>
      <td><p>customized objective function. Returns gradient and second order
gradient with given prediction and dtrain.</p></td>
    </tr>
    <tr>
      <th>feval</th>
      <td><p>customized evaluation function. Returns
<code><a href='https://rdrr.io/r/base/list.html'>list(metric='metric-name', value='metric-value')</a></code> with given
prediction and dtrain.</p></td>
    </tr>
    <tr>
      <th>stratified</th>
      <td><p>a <code>boolean</code> indicating whether sampling of folds should be stratified
by the values of outcome labels.</p></td>
    </tr>
    <tr>
      <th>folds</th>
      <td><p><code>list</code> provides a possibility to use a list of pre-defined CV folds
(each element must be a vector of test fold's indices). When folds are supplied,
the <code>nfold</code> and <code>stratified</code> parameters are ignored.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>boolean</code>, print the statistics during the process</p></td>
    </tr>
    <tr>
      <th>print_every_n</th>
      <td><p>Print each n-th iteration evaluation messages when <code>verbose&gt;0</code>.
Default is 1 which means all messages are printed. This parameter is passed to the
<code><a href='cb.print.evaluation.html'>cb.print.evaluation</a></code> callback.</p></td>
    </tr>
    <tr>
      <th>early_stopping_rounds</th>
      <td><p>If <code>NULL</code>, the early stopping function is not triggered.
If set to an integer <code>k</code>, training with a validation set will stop if the performance
doesn't improve for <code>k</code> rounds.
Setting this parameter engages the <code><a href='cb.early.stop.html'>cb.early.stop</a></code> callback.</p></td>
    </tr>
    <tr>
      <th>maximize</th>
      <td><p>If <code>feval</code> and <code>early_stopping_rounds</code> are set,
then this parameter must be set as well.
When it is <code>TRUE</code>, it means the larger the evaluation score the better.
This parameter is passed to the <code><a href='cb.early.stop.html'>cb.early.stop</a></code> callback.</p></td>
    </tr>
    <tr>
      <th>callbacks</th>
      <td><p>a list of callback functions to perform various task during boosting.
See <code><a href='callbacks.html'>callbacks</a></code>. Some of the callbacks are automatically created depending on the
parameters' values. User can provide either existing or their own callback methods in order
to customize the training process.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other parameters to pass to <code>params</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>xgb.cv.synchronous</code> with the following elements:</p><ul>
<li><p><code>call</code> a function call.</p></li>
<li><p><code>params</code> parameters that were passed to the xgboost library. Note that it does not
        capture parameters changed by the <code><a href='cb.reset.parameters.html'>cb.reset.parameters</a></code> callback.</p></li>
<li><p><code>callbacks</code> callback functions that were either automatically assigned or
        explicitly passed.</p></li>
<li><p><code>evaluation_log</code> evaluation history stored as a <code>data.table</code> with the
        first column corresponding to iteration number and the rest corresponding to the
        CV-based evaluation means and standard deviations for the training and test CV-sets.
        It is created by the <code><a href='cb.evaluation.log.html'>cb.evaluation.log</a></code> callback.</p></li>
<li><p><code>niter</code> number of boosting iterations.</p></li>
<li><p><code>nfeatures</code> number of features in training data.</p></li>
<li><p><code>folds</code> the list of CV folds' indices - either those passed through the <code>folds</code>
        parameter or randomly generated.</p></li>
<li><p><code>best_iteration</code> iteration number with the best evaluation metric value
        (only available with early stopping).</p></li>
<li><p><code>best_ntreelimit</code> the <code>ntreelimit</code> value corresponding to the best iteration,
        which could further be used in <code>predict</code> method
        (only available with early stopping).</p></li>
<li><p><code>pred</code> CV prediction values available when <code>prediction</code> is set.
        It is either vector or matrix (see <code><a href='cb.cv.predict.html'>cb.cv.predict</a></code>).</p></li>
<li><p><code>models</code> a liost of the CV folds' models. It is only available with the explicit
        setting of the <code><a href='cb.cv.predict.html'>cb.cv.predict(save_models = TRUE)</a></code> callback.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The original sample is randomly partitioned into <code>nfold</code> equal size subsamples.</p>
<p>Of the <code>nfold</code> subsamples, a single subsample is retained as the validation data for testing the model, and the remaining <code>nfold - 1</code> subsamples are used as training data.</p>
<p>The cross-validation process is then repeated <code>nrounds</code> times, with each of the <code>nfold</code> subsamples used exactly once as the validation data.</p>
<p>All observations are used for both training and validation.</p>
<p>Adapted from <a href='http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29#k-fold_cross-validation'>http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29#k-fold_cross-validation</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>agaricus.train</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>'xgboost'</span>)
<span class='no'>dtrain</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='xgb.DMatrix.html'>xgb.DMatrix</a></span>(<span class='no'>agaricus.train</span>$<span class='no'>data</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='no'>agaricus.train</span>$<span class='no'>label</span>)
<span class='no'>cv</span> <span class='kw'>&lt;-</span> <span class='fu'>xgb.cv</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>dtrain</span>, <span class='kw'>nrounds</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>nthread</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>nfold</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>metrics</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='st'>"rmse"</span>,<span class='st'>"auc"</span>),
                  <span class='kw'>max_depth</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>eta</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>objective</span> <span class='kw'>=</span> <span class='st'>"binary:logistic"</span>)</div><div class='output co'>#&gt; [1]	train-rmse:0.162410+0.001690	train-auc:0.987113+0.000597	test-rmse:0.162529+0.005671	test-auc:0.987127+0.002355 
#&gt; [2]	train-rmse:0.077843+0.001069	train-auc:0.999913+0.000044	test-rmse:0.078115+0.004131	test-auc:0.999904+0.000078 
#&gt; [3]	train-rmse:0.044191+0.004786	train-auc:0.999961+0.000028	test-rmse:0.048266+0.007876	test-auc:0.999945+0.000055 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>cv</span>)</div><div class='output co'>#&gt; ##### xgb.cv 5-folds
#&gt;  iter train_rmse_mean train_rmse_std train_auc_mean train_auc_std
#&gt;     1       0.1624096    0.001689528      0.9871128  5.969219e-04
#&gt;     2       0.0778430    0.001069471      0.9999132  4.370538e-05
#&gt;     3       0.0441912    0.004785576      0.9999614  2.755068e-05
#&gt;  test_rmse_mean test_rmse_std test_auc_mean test_auc_std
#&gt;       0.1625292   0.005670582     0.9871266 2.355142e-03
#&gt;       0.0781154   0.004131304     0.9999042 7.821355e-05
#&gt;       0.0482658   0.007876465     0.9999446 5.451825e-05</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>cv</span>, <span class='kw'>verbose</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; ##### xgb.cv 5-folds
#&gt; call:
#&gt;   xgb.cv(data = dtrain, nrounds = 3, nfold = 5, metrics = list("rmse", 
#&gt;     "auc"), nthread = 2, max_depth = 3, eta = 1, objective = "binary:logistic")
#&gt; params (as set within xgb.cv):
#&gt;   nthread = "2", max_depth = "3", eta = "1", objective = "binary:logistic", eval_metric = "rmse", eval_metric = "auc", silent = "1"
#&gt; callbacks:
#&gt;   cb.print.evaluation(period = print_every_n, showsd = showsd)
#&gt;   cb.evaluation.log()
#&gt; niter: 3
#&gt; evaluation_log:
#&gt;  iter train_rmse_mean train_rmse_std train_auc_mean train_auc_std
#&gt;     1       0.1624096    0.001689528      0.9871128  5.969219e-04
#&gt;     2       0.0778430    0.001069471      0.9999132  4.370538e-05
#&gt;     3       0.0441912    0.004785576      0.9999614  2.755068e-05
#&gt;  test_rmse_mean test_rmse_std test_auc_mean test_auc_std
#&gt;       0.1625292   0.005670582     0.9871266 2.355142e-03
#&gt;       0.0781154   0.004131304     0.9999042 7.821355e-05
#&gt;       0.0482658   0.007876465     0.9999446 5.451825e-05</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tianqi Chen, Tong He, Michael Benesty, Vadim Khotilovich, Yuan Tang, Hyunsu Cho, Kailong Chen, Rory Mitchell, Ignacio Cano, Tianyi Zhou, Mu Li, Junyuan Xie, Min Lin, Yifeng Geng, Yutian Li.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


