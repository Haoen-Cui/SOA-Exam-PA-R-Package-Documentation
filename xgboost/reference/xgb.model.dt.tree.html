<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Parse a boosted tree model text dump — xgb.model.dt.tree • xgboost</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Parse a boosted tree model text dump — xgb.model.dt.tree" />
<meta property="og:description" content="Parse a boosted tree model text dump into a data.table structure." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xgboost</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.90.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/discoverYourData.html">Understand your dataset with Xgboost</a>
    </li>
    <li>
      <a href="../articles/xgboostPresentation.html">Xgboost presentation</a>
    </li>
    <li>
      <a href="../articles/xgboostfromJSON.html">XGBoost from JSON</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dmlc/xgboost">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Parse a boosted tree model text dump</h1>
    <small class="dont-index">Source: <a href='https://github.com/dmlc/xgboost/blob/master/R/xgb.model.dt.tree.R'><code>R/xgb.model.dt.tree.R</code></a></small>
    <div class="hidden name"><code>xgb.model.dt.tree.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Parse a boosted tree model text dump into a <code>data.table</code> structure.</p>
    </div>

    <pre class="usage"><span class='fu'>xgb.model.dt.tree</span>(<span class='kw'>feature_names</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>text</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>trees</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>use_int_id</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>feature_names</th>
      <td><p>character vector of feature names. If the model already
contains feature names, those would be used when <code>feature_names=NULL</code> (default value).
Non-null <code>feature_names</code> could be provided to override those in the model.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>object of class <code>xgb.Booster</code></p></td>
    </tr>
    <tr>
      <th>text</th>
      <td><p><code>character</code> vector previously generated by the <code>xgb.dump</code> 
function  (where parameter <code>with_stats = TRUE</code> should have been set).
<code>text</code> takes precedence over <code>model</code>.</p></td>
    </tr>
    <tr>
      <th>trees</th>
      <td><p>an integer vector of tree indices that should be parsed.
If set to <code>NULL</code>, all trees of the model are parsed.
It could be useful, e.g., in multiclass classification to get only
the trees of one certain class. IMPORTANT: the tree index in xgboost models
is zero-based (e.g., use <code>trees = 0:4</code> for first 5 trees).</p></td>
    </tr>
    <tr>
      <th>use_int_id</th>
      <td><p>a logical flag indicating whether nodes in columns "Yes", "No", "Missing" should be
represented as integers (when FALSE) or as "Tree-Node" character strings (when FALSE).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>currently not used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>data.table</code> with detailed information about model trees' nodes.</p>
<p>The columns of the <code>data.table</code> are:</p>
<ul>
<li><p><code>Tree</code>: integer ID of a tree in a model (zero-based index)</p></li>
<li><p><code>Node</code>: integer ID of a node in a tree (zero-based index)</p></li>
<li><p><code>ID</code>: character identifier of a node in a model (only when <code>use_int_id=FALSE</code>)</p></li>
<li><p><code>Feature</code>: for a branch node, it's a feature id or name (when available);
             for a leaf note, it simply labels it as <code>'Leaf'</code></p></li>
<li><p><code>Split</code>: location of the split for a branch node (split condition is always "less than")</p></li>
<li><p><code>Yes</code>: ID of the next node when the split condition is met</p></li>
<li><p><code>No</code>: ID of the next node when the split condition is not met</p></li>
<li><p><code>Missing</code>: ID of the next node when branch value is missing</p></li>
<li><p><code>Quality</code>: either the split gain (change in loss) or the leaf value</p></li>
<li><p><code>Cover</code>: metric related to the number of observation either seen by a split
                     or collected by a leaf during training.</p></li>
</ul> 

<p>When <code>use_int_id=FALSE</code>, columns "Yes", "No", and "Missing" point to model-wide node identifiers
in the "ID" column. When <code>use_int_id=TRUE</code>, those columns point to node identifiers from 
the corresponding trees in the "Node" column.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Basic use:</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>agaricus.train</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>'xgboost'</span>)

<span class='no'>bst</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='xgb.train.html'>xgboost</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>agaricus.train</span>$<span class='no'>data</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='no'>agaricus.train</span>$<span class='no'>label</span>, <span class='kw'>max_depth</span> <span class='kw'>=</span> <span class='fl'>2</span>,
               <span class='kw'>eta</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>nthread</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>nrounds</span> <span class='kw'>=</span> <span class='fl'>2</span>,<span class='kw'>objective</span> <span class='kw'>=</span> <span class='st'>"binary:logistic"</span>)</div><div class='output co'>#&gt; [1]	train-error:0.046522 
#&gt; [2]	train-error:0.022263 </div><div class='input'>
(<span class='no'>dt</span> <span class='kw'>&lt;-</span> <span class='fu'>xgb.model.dt.tree</span>(<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>agaricus.train</span>$<span class='no'>data</span>), <span class='no'>bst</span>))</div><div class='output co'>#&gt;     Tree Node  ID                 Feature         Split  Yes   No Missing
#&gt;  1:    0    0 0-0               odor=none -9.536743e-07  0-1  0-2     0-1
#&gt;  2:    0    1 0-1         stalk-root=club -9.536743e-07  0-3  0-4     0-3
#&gt;  3:    0    2 0-2 spore-print-color=green -9.536743e-07  0-5  0-6     0-5
#&gt;  4:    0    3 0-3                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  5:    0    4 0-4                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  6:    0    5 0-5                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  7:    0    6 0-6                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  8:    1    0 1-0       stalk-root=rooted -9.536743e-07  1-1  1-2     1-1
#&gt;  9:    1    1 1-1               odor=none -9.536743e-07  1-3  1-4     1-3
#&gt; 10:    1    2 1-2                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt; 11:    1    3 1-3                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt; 12:    1    4 1-4                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;          Quality      Cover
#&gt;  1: 4000.5310100 1628.25000
#&gt;  2: 1158.2120400  924.50000
#&gt;  3:  198.1738280  703.75000
#&gt;  4:    1.7121772  812.00000
#&gt;  5:   -1.7004405  112.50000
#&gt;  6:   -1.9407086  690.50000
#&gt;  7:    1.8596492   13.25000
#&gt;  8:  832.5450440  788.85205
#&gt;  9:  569.7250980  768.38971
#&gt; 10:   -6.2362447   20.46239
#&gt; 11:    0.7847176  458.93686
#&gt; 12:   -0.9685304  309.45282</div><div class='input'>
<span class='co'># This bst model already has feature_names stored with it, so those would be used when </span>
<span class='co'># feature_names is not set:</span>
(<span class='no'>dt</span> <span class='kw'>&lt;-</span> <span class='fu'>xgb.model.dt.tree</span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>bst</span>))</div><div class='output co'>#&gt;     Tree Node  ID                 Feature         Split  Yes   No Missing
#&gt;  1:    0    0 0-0               odor=none -9.536743e-07  0-1  0-2     0-1
#&gt;  2:    0    1 0-1         stalk-root=club -9.536743e-07  0-3  0-4     0-3
#&gt;  3:    0    2 0-2 spore-print-color=green -9.536743e-07  0-5  0-6     0-5
#&gt;  4:    0    3 0-3                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  5:    0    4 0-4                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  6:    0    5 0-5                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  7:    0    6 0-6                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;  8:    1    0 1-0       stalk-root=rooted -9.536743e-07  1-1  1-2     1-1
#&gt;  9:    1    1 1-1               odor=none -9.536743e-07  1-3  1-4     1-3
#&gt; 10:    1    2 1-2                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt; 11:    1    3 1-3                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt; 12:    1    4 1-4                    Leaf            NA &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
#&gt;          Quality      Cover
#&gt;  1: 4000.5310100 1628.25000
#&gt;  2: 1158.2120400  924.50000
#&gt;  3:  198.1738280  703.75000
#&gt;  4:    1.7121772  812.00000
#&gt;  5:   -1.7004405  112.50000
#&gt;  6:   -1.9407086  690.50000
#&gt;  7:    1.8596492   13.25000
#&gt;  8:  832.5450440  788.85205
#&gt;  9:  569.7250980  768.38971
#&gt; 10:   -6.2362447   20.46239
#&gt; 11:    0.7847176  458.93686
#&gt; 12:   -0.9685304  309.45282</div><div class='input'>
<span class='co'># How to match feature names of splits that are following a current 'Yes' branch:</span>

<span class='fu'><a href='https://rdrr.io/r/base/merge.html'>merge</a></span>(<span class='no'>dt</span>, <span class='no'>dt</span>[, <span class='fu'>.</span>(<span class='no'>ID</span>, <span class='kw'>Y.Feature</span><span class='kw'>=</span><span class='no'>Feature</span>)], <span class='kw'>by.x</span><span class='kw'>=</span><span class='st'>'Yes'</span>, <span class='kw'>by.y</span><span class='kw'>=</span><span class='st'>'ID'</span>, <span class='kw'>all.x</span><span class='kw'>=</span><span class='fl'>TRUE</span>)[<span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span>(<span class='no'>Tree</span>,<span class='no'>Node</span>)]</div><div class='output co'>#&gt;      Yes Tree Node  ID                 Feature         Split   No Missing
#&gt;  1:  0-1    0    0 0-0               odor=none -9.536743e-07  0-2     0-1
#&gt;  2:  0-3    0    1 0-1         stalk-root=club -9.536743e-07  0-4     0-3
#&gt;  3:  0-5    0    2 0-2 spore-print-color=green -9.536743e-07  0-6     0-5
#&gt;  4: &lt;NA&gt;    0    3 0-3                    Leaf            NA &lt;NA&gt;    &lt;NA&gt;
#&gt;  5: &lt;NA&gt;    0    4 0-4                    Leaf            NA &lt;NA&gt;    &lt;NA&gt;
#&gt;  6: &lt;NA&gt;    0    5 0-5                    Leaf            NA &lt;NA&gt;    &lt;NA&gt;
#&gt;  7: &lt;NA&gt;    0    6 0-6                    Leaf            NA &lt;NA&gt;    &lt;NA&gt;
#&gt;  8:  1-1    1    0 1-0       stalk-root=rooted -9.536743e-07  1-2     1-1
#&gt;  9:  1-3    1    1 1-1               odor=none -9.536743e-07  1-4     1-3
#&gt; 10: &lt;NA&gt;    1    2 1-2                    Leaf            NA &lt;NA&gt;    &lt;NA&gt;
#&gt; 11: &lt;NA&gt;    1    3 1-3                    Leaf            NA &lt;NA&gt;    &lt;NA&gt;
#&gt; 12: &lt;NA&gt;    1    4 1-4                    Leaf            NA &lt;NA&gt;    &lt;NA&gt;
#&gt;          Quality      Cover       Y.Feature
#&gt;  1: 4000.5310100 1628.25000 stalk-root=club
#&gt;  2: 1158.2120400  924.50000            Leaf
#&gt;  3:  198.1738280  703.75000            Leaf
#&gt;  4:    1.7121772  812.00000            &lt;NA&gt;
#&gt;  5:   -1.7004405  112.50000            &lt;NA&gt;
#&gt;  6:   -1.9407086  690.50000            &lt;NA&gt;
#&gt;  7:    1.8596492   13.25000            &lt;NA&gt;
#&gt;  8:  832.5450440  788.85205       odor=none
#&gt;  9:  569.7250980  768.38971            Leaf
#&gt; 10:   -6.2362447   20.46239            &lt;NA&gt;
#&gt; 11:    0.7847176  458.93686            &lt;NA&gt;
#&gt; 12:   -0.9685304  309.45282            &lt;NA&gt;</div><div class='input'> 
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tianqi Chen, Tong He, Michael Benesty, Vadim Khotilovich, Yuan Tang, Hyunsu Cho, Kailong Chen, Rory Mitchell, Ignacio Cano, Tianyi Zhou, Mu Li, Junyuan Xie, Min Lin, Yifeng Geng, Yutian Li.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


