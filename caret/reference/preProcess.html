<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Pre-Processing of Predictors — preProcess • caret</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Pre-Processing of Predictors — preProcess" />
<meta property="og:description" content="Pre-processing transformation (centering, scaling etc.) can be estimated
from the training data and applied to any data set with the same variables." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">caret</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">6.0.84</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/caret.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topepo/caret">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pre-Processing of Predictors</h1>
    <small class="dont-index">Source: <a href='https://github.com/topepo/caret/blob/master/R/preProcess.R'><code>R/preProcess.R</code></a></small>
    <div class="hidden name"><code>preProcess.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Pre-processing transformation (centering, scaling etc.) can be estimated
from the training data and applied to any data set with the same variables.</p>
    </div>

    <pre class="usage"><span class='fu'>preProcess</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>preProcess</span>(<span class='no'>x</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"center"</span>, <span class='st'>"scale"</span>),
  <span class='kw'>thresh</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>pcaComp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>na.remove</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>5</span>,
  <span class='kw'>knnSummary</span> <span class='kw'>=</span> <span class='no'>mean</span>, <span class='kw'>outcome</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>fudge</span> <span class='kw'>=</span> <span class='fl'>0.2</span>, <span class='kw'>numUnique</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>freqCut</span> <span class='kw'>=</span> <span class='fl'>95</span>/<span class='fl'>5</span>, <span class='kw'>uniqueCut</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>cutoff</span> <span class='kw'>=</span> <span class='fl'>0.9</span>,
  <span class='kw'>rangeBounds</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>), <span class='no'>...</span>)

<span class='co'># S3 method for preProcess</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>object</span>, <span class='no'>newdata</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a matrix or data frame. Non-numeric predictors are allowed but will
be ignored.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments to pass to <code>fastICA</code>,
such as <code>n.comp</code></p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>a character vector specifying the type of processing. Possible
values are "BoxCox", "YeoJohnson", "expoTrans", "center", "scale", "range",
"knnImpute", "bagImpute", "medianImpute", "pca", "ica", "spatialSign", "corr", "zv",
"nzv", and "conditionalX" (see Details below)</p></td>
    </tr>
    <tr>
      <th>thresh</th>
      <td><p>a cutoff for the cumulative percent of variance to be retained
by PCA</p></td>
    </tr>
    <tr>
      <th>pcaComp</th>
      <td><p>the specific number of PCA components to keep. If specified,
this over-rides <code>thresh</code></p></td>
    </tr>
    <tr>
      <th>na.remove</th>
      <td><p>a logical; should missing values be removed from the
calculations?</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>the number of nearest neighbors from the training set to use for
imputation</p></td>
    </tr>
    <tr>
      <th>knnSummary</th>
      <td><p>function to average the neighbor values per column during
imputation</p></td>
    </tr>
    <tr>
      <th>outcome</th>
      <td><p>a numeric or factor vector for the training set outcomes.
This can be used to help estimate the Box-Cox transformation of the
predictor variables (see Details below)</p></td>
    </tr>
    <tr>
      <th>fudge</th>
      <td><p>a tolerance value: Box-Cox transformation lambda values within
+/-fudge will be coerced to 0 and within 1+/-fudge will be coerced to 1.</p></td>
    </tr>
    <tr>
      <th>numUnique</th>
      <td><p>how many unique values should <code>y</code> have to estimate the
Box-Cox transformation?</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>a logical: prints a log as the computations proceed</p></td>
    </tr>
    <tr>
      <th>freqCut</th>
      <td><p>the cutoff for the ratio of the most common value to the
second most common value. See <code><a href='nearZeroVar.html'>nearZeroVar</a></code>.</p></td>
    </tr>
    <tr>
      <th>uniqueCut</th>
      <td><p>the cutoff for the percentage of distinct values out of
the number of total samples. See <code><a href='nearZeroVar.html'>nearZeroVar</a></code>.</p></td>
    </tr>
    <tr>
      <th>cutoff</th>
      <td><p>a numeric value for the pair-wise absolute correlation cutoff.
See <code><a href='findCorrelation.html'>findCorrelation</a></code>.</p></td>
    </tr>
    <tr>
      <th>rangeBounds</th>
      <td><p>a two-element numeric vector specifying closed interval
for range transformation</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>an object of class <code>preProcess</code></p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>a matrix or data frame of new data to be pre-processed</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>preProcess</code> results in a list with elements</p>
<dt>call</dt><dd><p>the
function call</p></dd> <dt>method</dt><dd><p>a named list of operations and the variables
used for each</p></dd> <dt>dim</dt><dd><p>the dimensions of <code>x</code></p></dd> <dt>bc</dt><dd><p>Box-Cox
transformation values, see <code><a href='BoxCoxTrans.html'>BoxCoxTrans</a></code></p></dd> <dt>mean</dt><dd><p>a vector
of means (if centering was requested)</p></dd> <dt>std</dt><dd><p>a vector of standard
deviations (if scaling or PCA was requested)</p></dd> <dt>rotation</dt><dd><p>a matrix of
eigenvectors if PCA was requested</p></dd> <dt>method</dt><dd><p>the value of <code>method</code></p></dd>
<dt>thresh</dt><dd><p>the value of <code>thresh</code></p></dd> <dt>ranges</dt><dd><p>a matrix of min and
max values for each predictor when <code>method</code> includes "range" (and
<code>NULL</code> otherwise)</p></dd> <dt>numComp</dt><dd><p>the number of principal components
required of capture the specified amount of variance</p></dd> <dt>ica</dt><dd><p>contains
values for the <code>W</code> and <code>K</code> matrix of the decomposition</p></dd>
<dt>median</dt><dd><p>a vector of medians (if median imputation was requested)</p></dd>

predict.preProcess will produce a data frame.

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In all cases, transformations and operations are estimated using the data in
<code>x</code> and these operations are applied to new data using these values;
nothing is recomputed when using the <code>predict</code> function.</p>
<p>The Box-Cox (<code>method = "BoxCox"</code>), Yeo-Johnson (<code>method =
"YeoJohnson"</code>), and exponential transformations (<code>method =
"expoTrans"</code>)have been "repurposed" here: they are being used to transform
the predictor variables. The Box-Cox transformation was developed for
transforming the response variable while another method, the Box-Tidwell
transformation, was created to estimate transformations of predictor data.
However, the Box-Cox method is simpler, more computationally efficient and
is equally effective for estimating power transformations. The Yeo-Johnson
transformation is similar to the Box-Cox model but can accommodate
predictors with zero and/or negative values (while the predictors values for
the Box-Cox transformation must be strictly positive.) The exponential
transformation of Manly (1976) can also be used for positive or negative
data.</p>
<p><code>method = "center"</code> subtracts the mean of the predictor's data (again
from the data in <code>x</code>) from the predictor values while <code>method =
"scale"</code> divides by the standard deviation.</p>
<p>The "range" transformation scales the data to be within <code>rangeBounds</code>. If new
samples have values larger or smaller than those in the training set, values
will be outside of this range.</p>
<p>Predictors that are not numeric are ignored in the calculations.</p>
<p><code>method = "zv"</code> identifies numeric predictor columns with a single
value (i.e. having zero variance) and excludes them from further
calculations. Similarly, <code>method = "nzv"</code> does the same by applying
<code><a href='nearZeroVar.html'>nearZeroVar</a></code> exclude "near zero-variance" predictors. The options
<code>freqCut</code> and <code>uniqueCut</code> can be used to modify the filter.</p>
<p><code>method = "corr"</code> seeks to filter out highly correlated predictors. See
<code><a href='findCorrelation.html'>findCorrelation</a></code>.</p>
<p>For classification, <code>method = "conditionalX"</code> examines the distribution
of each predictor conditional on the outcome. If there is only one unique
value within any class, the predictor is excluded from further calculations
(see <code><a href='nearZeroVar.html'>checkConditionalX</a></code> for an example). When <code>outcome</code> is
not a factor, this calculation is not executed. This operation can be time
consuming when used within resampling via <code><a href='train.html'>train</a></code>.</p>
<p>The operations are applied in this order: zero-variance filter, near-zero
variance filter, correlation filter, Box-Cox/Yeo-Johnson/exponential transformation, centering,
scaling, range, imputation, PCA, ICA then spatial sign. This is a departure
from versions of <span class="pkg">caret</span> prior to version 4.76 (where imputation was
done first) and is not backwards compatible if bagging was used for
imputation.</p>
<p>If PCA is requested but centering and scaling are not, the values will still
be centered and scaled. Similarly, when ICA is requested, the data are
automatically centered and scaled.</p>
<p>k-nearest neighbor imputation is carried out by finding the k closest
samples (Euclidian distance) in the training set. Imputation via bagging
fits a bagged tree model for each predictor (as a function of all the
others). This method is simple, accurate and accepts missing values, but it
has much higher computational cost. Imputation via medians takes the median
of each predictor in the training set, and uses them to fill missing values.
This method is simple, fast, and accepts missing values, but treats each
predictor independently, and may be inaccurate.</p>
<p>A warning is thrown if both PCA and ICA are requested. ICA, as implemented
by the <code>fastICA</code> package automatically does a PCA
decomposition prior to finding the ICA scores.</p>
<p>The function will throw an error of any numeric variables in <code>x</code> has
less than two unique values unless either <code>method = "zv"</code> or
<code>method = "nzv"</code> are invoked.</p>
<p>Non-numeric data will not be pre-processed and there values will be in the
data frame produced by the <code>predict</code> function. Note that when PCA or
ICA is used, the non-numeric columns may be in different positions when
predicted.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='http://topepo.github.io/caret/pre-processing.html'>http://topepo.github.io/caret/pre-processing.html</a></p>
<p>Kuhn and Johnson (2013), Applied Predictive Modeling, Springer, New York
(chapter 4)</p>
<p>Kuhn (2008), Building predictive models in R using the caret
(<a href='http://www.jstatsoft.org/article/view/v028i05/v28i05.pdf'>http://www.jstatsoft.org/article/view/v028i05/v28i05.pdf</a>)</p>
<p>Box, G. E. P. and Cox, D. R. (1964) An analysis of transformations (with
discussion). Journal of the Royal Statistical Society B, 26, 211-252.</p>
<p>Box, G. E. P. and Tidwell, P. W. (1962) Transformation of the independent
variables. Technometrics 4, 531-550.</p>
<p>Manly, B. L. (1976) Exponential data transformations. The Statistician, 25,
37 - 42.</p>
<p>Yeo, I-K. and Johnson, R. (2000). A new family of power transformations to
improve normality or symmetry. Biometrika, 87, 954-959.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='BoxCoxTrans.html'>BoxCoxTrans</a></code>, <code><a href='BoxCoxTrans.html'>expoTrans</a></code>
<code><a href='https://rdrr.io/pkg/MASS/man/boxcox.html'>boxcox</a></code>, <code><a href='https://rdrr.io/r/stats/prcomp.html'>prcomp</a></code>,
<code>fastICA</code>, <code><a href='spatialSign.html'>spatialSign</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>BloodBrain</span>)
<span class='co'># one variable has one unique value</span>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>preProc</span> <span class='kw'>&lt;-</span> <span class='fu'>preProcess</span>(<span class='no'>bbbDescr</span>)

<span class='no'>preProc</span>  <span class='kw'>&lt;-</span> <span class='fu'>preProcess</span>(<span class='no'>bbbDescr</span>[<span class='fl'>1</span>:<span class='fl'>100</span>,-<span class='fl'>3</span>])
<span class='no'>training</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>preProc</span>, <span class='no'>bbbDescr</span>[<span class='fl'>1</span>:<span class='fl'>100</span>,-<span class='fl'>3</span>])
<span class='no'>test</span>     <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>preProc</span>, <span class='no'>bbbDescr</span>[<span class='fl'>101</span>:<span class='fl'>208</span>,-<span class='fl'>3</span>])
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Max Kuhn, median imputation by Zachary Mayer</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


