<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Controlling the Feature Selection Algorithms — rfeControl • caret</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Controlling the Feature Selection Algorithms — rfeControl" />
<meta property="og:description" content="This function generates a control object that can be used to specify the
details of the feature selection algorithms used in this package." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">caret</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">6.0.84</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/caret.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topepo/caret">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Controlling the Feature Selection Algorithms</h1>
    <small class="dont-index">Source: <a href='https://github.com/topepo/caret/blob/master/R/rfe.R'><code>R/rfe.R</code></a></small>
    <div class="hidden name"><code>rfeControl.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function generates a control object that can be used to specify the
details of the feature selection algorithms used in this package.</p>
    </div>

    <pre class="usage"><span class='fu'>rfeControl</span>(<span class='kw'>functions</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>rerank</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"boot"</span>,
  <span class='kw'>saveDetails</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>number</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span>(<span class='no'>method</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"cv"</span>,
  <span class='st'>"repeatedcv"</span>), <span class='fl'>10</span>, <span class='fl'>25</span>), <span class='kw'>repeats</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span>(<span class='no'>method</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"cv"</span>,
  <span class='st'>"repeatedcv"</span>), <span class='fl'>1</span>, <span class='no'>number</span>), <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>returnResamp</span> <span class='kw'>=</span> <span class='st'>"final"</span>,
  <span class='kw'>p</span> <span class='kw'>=</span> <span class='fl'>0.75</span>, <span class='kw'>index</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>indexOut</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>timingSamps</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>seeds</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>allowParallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>functions</th>
      <td><p>a list of functions for model fitting, prediction and
variable importance (see Details below)</p></td>
    </tr>
    <tr>
      <th>rerank</th>
      <td><p>a logical: should variable importance be re-calculated each
time features are removed?</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>The external resampling method: <code>boot</code>, <code>cv</code>,
<code>LOOCV</code> or <code>LGOCV</code> (for repeated training/test splits</p></td>
    </tr>
    <tr>
      <th>saveDetails</th>
      <td><p>a logical to save the predictions and variable
importances from the selection process</p></td>
    </tr>
    <tr>
      <th>number</th>
      <td><p>Either the number of folds or number of resampling iterations</p></td>
    </tr>
    <tr>
      <th>repeats</th>
      <td><p>For repeated k-fold cross-validation only: the number of
complete sets of folds to compute</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>a logical to print a log for each external resampling
iteration</p></td>
    </tr>
    <tr>
      <th>returnResamp</th>
      <td><p>A character string indicating how much of the resampled
summary metrics should be saved. Values can be ``final'', ``all'' or
``none''</p></td>
    </tr>
    <tr>
      <th>p</th>
      <td><p>For leave-group out cross-validation: the training percentage</p></td>
    </tr>
    <tr>
      <th>index</th>
      <td><p>a list with elements for each external resampling iteration.
Each list element is the sample rows used for training at that iteration.</p></td>
    </tr>
    <tr>
      <th>indexOut</th>
      <td><p>a list (the same length as <code>index</code>) that dictates which
sample are held-out for each resample. If <code>NULL</code>, then the unique set
of samples not contained in <code>index</code> is used.</p></td>
    </tr>
    <tr>
      <th>timingSamps</th>
      <td><p>the number of training set samples that will be used to
measure the time for predicting samples (zero indicates that the prediction
time should not be estimated).</p></td>
    </tr>
    <tr>
      <th>seeds</th>
      <td><p>an optional set of integers that will be used to set the seed
at each resampling iteration. This is useful when the models are run in
parallel. A value of <code>NA</code> will stop the seed from being set within the
worker processes while a value of <code>NULL</code> will set the seeds using a
random set of integers. Alternatively, a list can be used. The list should
have <code>B+1</code> elements where <code>B</code> is the number of resamples. The
first <code>B</code> elements of the list should be vectors of integers of length
<code>P</code> where <code>P</code> is the number of subsets being evaluated (including
the full set). The last element of the list only needs to be a single
integer (for the final model). See the Examples section below.</p></td>
    </tr>
    <tr>
      <th>allowParallel</th>
      <td><p>if a parallel backend is loaded and available, should
the function use it?</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>More details on this function can be found at
<a href='http://topepo.github.io/caret/recursive-feature-elimination.html#rfe'>http://topepo.github.io/caret/recursive-feature-elimination.html#rfe</a>.</p>
<p>Backwards selection requires function to be specified for some operations.</p>
<p>The <code>fit</code> function builds the model based on the current data set. The
arguments for the function must be:</p><ul>
<li><p><code>x</code> the current
training set of predictor data with the appropriate subset of variables</p></li>
<li><p><code>y</code> the current outcome data (either a numeric or factor vector)</p></li>
<li><p><code>first</code> a single logical value for whether the current predictor
set has all possible variables</p></li>
<li><p><code>last</code> similar to <code>first</code>, but
<code>TRUE</code> when the last model is fit with the final subset size and
predictors.</p></li>
<li><p><code>...</code>optional arguments to pass to the fit function
in the call to <code>rfe</code></p></li>
</ul><p>The function should return a model object that
can be used to generate predictions.</p>
<p>The <code>pred</code> function returns a vector of predictions (numeric or
factors) from the current model. The arguments are:</p><ul>
<li><p><code>object</code> the model generated by the <code>fit</code> function</p></li>
<li><p><code>x</code> the current set of predictor set for the held-back samples</p></li>
</ul>

<p>The <code>rank</code> function is used to return the predictors in the order of
the most important to the least important. Inputs are:</p><ul>
<li><p><code>object</code> the model generated by the <code>fit</code> function</p></li>
<li><p><code>x</code> the current set of predictor set for the training samples</p></li>
<li><p><code>y</code> the current training outcomes</p></li>
</ul><p>The function should return a
data frame with a column called <code>var</code> that has the current variable
names. The first row should be the most important predictor etc. Other
columns can be included in the output and will be returned in the final
<code>rfe</code> object.</p>
<p>The <code>selectSize</code> function determines the optimal number of predictors
based on the resampling output. Inputs for the function are:</p><ul>
<li><p><code>x</code>a matrix with columns for the performance metrics and the
number of variables, called "<code>Variables</code>"</p></li>
<li><p><code>metric</code>a character
string of the performance measure to optimize (e.g. "RMSE", "Rsquared",
"Accuracy" or "Kappa")</p></li>
<li><p><code>maximize</code>a single logical for whether the
metric should be maximized</p></li>
</ul><p>This function should return an integer
corresponding to the optimal subset size. <span class="pkg">caret</span> comes with two
examples functions for this purpose: <code><a href='caretFuncs.html'>pickSizeBest</a></code> and
<code><a href='caretFuncs.html'>pickSizeTolerance</a></code>.</p>
<p>After the optimal subset size is determined, the <code>selectVar</code> function
will be used to calculate the best rankings for each variable across all the
resampling iterations. Inputs for the function are:</p><ul>
<li><p><code>y</code>
a list of variables importance for each resampling iteration and each subset
size (generated by the user-defined <code>rank</code> function). In the example,
each each of the cross-validation groups the output of the <code>rank</code>
function is saved for each of the subset sizes (including the original
subset). If the rankings are not recomputed at each iteration, the values
will be the same within each cross-validation iteration.</p></li>
<li><p><code>size</code>
the integer returned by the <code>selectSize</code> function</p></li>
</ul><p>This function
should return a character string of predictor names (of length <code>size</code>)
in the order of most important to least important</p>
<p>Examples of these functions are included in the package:
<code><a href='caretFuncs.html'>lmFuncs</a></code>, <code><a href='caretFuncs.html'>rfFuncs</a></code>, <code><a href='caretFuncs.html'>treebagFuncs</a></code> and
<code><a href='caretFuncs.html'>nbFuncs</a></code>.</p>
<p>Model details about these functions, including examples, are at
<a href='http://topepo.github.io/caret/recursive-feature-elimination.html'>http://topepo.github.io/caret/recursive-feature-elimination.html</a>. .</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='rfe.html'>rfe</a></code>, <code><a href='caretFuncs.html'>lmFuncs</a></code>, <code><a href='caretFuncs.html'>rfFuncs</a></code>,
<code><a href='caretFuncs.html'>treebagFuncs</a></code>, <code><a href='caretFuncs.html'>nbFuncs</a></code>,
<code><a href='caretFuncs.html'>pickSizeBest</a></code>, <code><a href='caretFuncs.html'>pickSizeTolerance</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
  <span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>subsetSizes</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>4</span>, <span class='fl'>6</span>, <span class='fl'>8</span>)
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>123</span>)
<span class='no'>seeds</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/vector.html'>vector</a></span>(<span class='kw'>mode</span> <span class='kw'>=</span> <span class='st'>"list"</span>, <span class='kw'>length</span> <span class='kw'>=</span> <span class='fl'>51</span>)
<span class='kw'>for</span>(<span class='no'>i</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>50</span>) <span class='no'>seeds</span><span class='kw'>[[</span><span class='no'>i</span>]] <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample.int</a></span>(<span class='fl'>1000</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>subsetSizes</span>) + <span class='fl'>1</span>)
<span class='no'>seeds</span><span class='kw'>[[</span><span class='fl'>51</span>]] <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample.int</a></span>(<span class='fl'>1000</span>, <span class='fl'>1</span>)

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>1</span>)
<span class='no'>rfMod</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='rfe.html'>rfe</a></span>(<span class='no'>bbbDescr</span>, <span class='no'>logBBB</span>,
             <span class='kw'>sizes</span> <span class='kw'>=</span> <span class='no'>subsetSizes</span>,
             <span class='kw'>rfeControl</span> <span class='kw'>=</span> <span class='fu'>rfeControl</span>(<span class='kw'>functions</span> <span class='kw'>=</span> <span class='no'>rfFuncs</span>,
                                     <span class='kw'>seeds</span> <span class='kw'>=</span> <span class='no'>seeds</span>,
                                     <span class='kw'>number</span> <span class='kw'>=</span> <span class='fl'>50</span>))
  }</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Max Kuhn</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


