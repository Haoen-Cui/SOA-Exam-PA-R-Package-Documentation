<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Simulation Functions — SLC14_1 • caret</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Simulation Functions — SLC14_1" />
<meta property="og:description" content="This function simulates regression and classification data with truly
important predictors and irrelevant predictions." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">caret</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">6.0.84</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/caret.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topepo/caret">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulation Functions</h1>
    <small class="dont-index">Source: <a href='https://github.com/topepo/caret/blob/master/R/reg_sims.R'><code>R/reg_sims.R</code></a>, <a href='https://github.com/topepo/caret/blob/master/R/twoClassSim.R'><code>R/twoClassSim.R</code></a></small>
    <div class="hidden name"><code>twoClassSim.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function simulates regression and classification data with truly
important predictors and irrelevant predictions.</p>
    </div>

    <pre class="usage"><span class='fu'>SLC14_1</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>noiseVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrType</span> <span class='kw'>=</span> <span class='st'>"AR1"</span>,
  <span class='kw'>corrValue</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>SLC14_2</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>noiseVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrType</span> <span class='kw'>=</span> <span class='st'>"AR1"</span>,
  <span class='kw'>corrValue</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>LPH07_1</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>noiseVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrType</span> <span class='kw'>=</span> <span class='st'>"AR1"</span>,
  <span class='kw'>corrValue</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>factors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>class</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>LPH07_2</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>noiseVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrType</span> <span class='kw'>=</span> <span class='st'>"AR1"</span>,
  <span class='kw'>corrValue</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>twoClassSim</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>intercept</span> <span class='kw'>=</span> -<span class='fl'>5</span>, <span class='kw'>linearVars</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>noiseVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrVars</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>corrType</span> <span class='kw'>=</span> <span class='st'>"AR1"</span>, <span class='kw'>corrValue</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>mislabel</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>ordinal</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>The number of simulated data points</p></td>
    </tr>
    <tr>
      <th>noiseVars</th>
      <td><p>The number of uncorrelated irrelevant predictors to be
included.</p></td>
    </tr>
    <tr>
      <th>corrVars</th>
      <td><p>The number of correlated irrelevant predictors to be
included.</p></td>
    </tr>
    <tr>
      <th>corrType</th>
      <td><p>The correlation structure of the correlated irrelevant
predictors. Values of "AR1" and "exch" are available (see Details below)</p></td>
    </tr>
    <tr>
      <th>corrValue</th>
      <td><p>The correlation value.</p></td>
    </tr>
    <tr>
      <th>factors</th>
      <td><p>Should the binary predictors be converted to factors?</p></td>
    </tr>
    <tr>
      <th>class</th>
      <td><p>Should the simulation produce class labels instead of numbers?</p></td>
    </tr>
    <tr>
      <th>intercept</th>
      <td><p>The intercept, which controls the class balance. The
default value produces a roughly balanced data set when the other defaults
are used.</p></td>
    </tr>
    <tr>
      <th>linearVars</th>
      <td><p>The number of linearly important effects. See Details
below.</p></td>
    </tr>
    <tr>
      <th>mislabel</th>
      <td><p>The proportion of data that is possibly mislabeled. Only
used when <code>ordinal = FALSE</code>. See Details below.</p></td>
    </tr>
    <tr>
      <th>ordinal</th>
      <td><p>Should an ordered factor be returned? See Details below.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data frame with columns:</p>
<dt>Class </dt><dd><p>A factor with levels
"Class1" and "Class2"</p></dd> <dt>TwoFactor1, TwoFactor2 </dt><dd><p>Correlated
multivariate normal predictors (denoted as <code>A</code> and <code>B</code> above)</p></dd>
<dt>Nonlinear1, Nonlinear2, Nonlinear3</dt><dd><p>Uncorrelated random uniform
predictors (<code>J</code>, <code>K</code> and <code>L</code> above).</p></dd> <dt>Linear1,
</dt><dd><p>Optional uncorrelated standard normal predictors (<code>C</code> through
<code>H</code> above)</p></dd><dt>list()</dt><dd><p>Optional uncorrelated standard normal
predictors (<code>C</code> through <code>H</code> above)</p></dd> <dt>Noise1, </dt><dd><p>Optional
uncorrelated standard normal predictions</p></dd><dt>list()</dt><dd><p>Optional uncorrelated
standard normal predictions</p></dd> <dt>Corr1, </dt><dd><p>Optional correlated multivariate
normal predictors (each with unit variances)</p></dd><dt>list()</dt><dd><p>Optional
correlated multivariate normal predictors (each with unit variances)</p></dd>.

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The first function (<code>twoClassSim</code>) generates two class data. The data
are simulated in different sets. First, two multivariate normal predictors
(denoted here as <code>A</code> and <code>B</code>) are created with a correlation our
about 0.65. They change the log-odds using main effects and an interaction:</p>
<pre> intercept - 4A + 4B + 2AB </pre>

<p>The intercept is a parameter for the simulation and can be used to control
the amount of class imbalance.</p>
<p>The second set of effects are linear with coefficients that alternate signs
and have values between 2.5 and 0.025. For example, if there were six
predictors in this set, their contribution to the log-odds would be</p>
<pre> -2.50C + 2.05D -1.60E + 1.15F -0.70G + 0.25H </pre>

<p>The third set is a nonlinear function of a single predictor ranging between
[0, 1] called <code>J</code> here:</p>
<pre> (J^3) + 2exp(-6(J-0.3)^2) </pre>

<p>The fourth set of informative predictors are copied from one of Friedman's
systems and use two more predictors (<code>K</code> and <code>L</code>):</p>
<pre> 2sin(KL) </pre>

<p>All of these effects are added up to model the log-odds.</p>
<p>When <code>ordinal = FALSE</code>, this is used to calculate the probability of a
sample being in the first class and a random uniform number is used to
actually make the assignment of the actual class. To mislabel the data, the
probability is reversed (i.e. <code>p = 1 - p</code>) before the random number
generation.</p>
<p>For <code>ordinal = TRUE</code>, random normal errors are added to the linear
predictor (i.e. prior to computing the probability) and cut points (0.00,
0.20, 0.75, and 1.00) are used to bin the probabilities into classes
<code>"low"</code>, <code>"med"</code>, and <code>"high"</code> (despite the function's name).</p>
<p>The remaining functions simulate regression data sets. <code>LPH07_1</code> and
<code>LPH07_2</code> are from van der Laan et al. (2007). The first function uses
random Bernoulli variables that have a 40% probability of being a value of
1. The true regression equation is:</p>
<pre> 2*w_1*w_10 + 4*w_2*w_7 + 3*w_4*w_5 - 5*w_6*w_10 + 3*w_8*w_9 +
w_1*w_2*w_4 - 2*w_7*(1-w_6)*w_2*w_9 - 4*(1 - w_10)*w_1*(1-w_4) </pre>

<p>The simulated error term is a standard normal (i.e. Gaussian). The noise
variables are simulated in the same manner as described above but are made
binary based on whether the normal random variable is above or below 0. If
<code>factors = TRUE</code>, each of the predictors is coerced into a factor.
This simulation can also be adapted for classification using the option
<code>class = TRUE</code>. In this case, the outcome is converted to be a factor
by first computing the logit transformation of the equation above and using
uniform random numbers to assign the observed class.</p>
<p>A second function (<code>LPH07_2</code>) uses 20 independent Gaussians with mean
zero and variance 16. The functional form here is:</p>
<pre> x_1*x_2 + x_10^2 - x_3*x_17 - x_15*x_4 + x_9*x_5 + x_19 -
x_20^2 + x_9*x_8 </pre>

<p>The error term is also Gaussian with mean zero and variance 16.</p>
<p>The function <code>SLC14_1</code> simulates a system from Sapp et al. (2014). All
informative predictors are independent Gaussian random variables with mean
zero and a variance of 9. The prediction equation is:</p>
<pre> x_1 + sin(x_2) + log(abs(x_3)) + x_4^2 + x_5*x_6 +
I(x_7*x_8*x_9 &lt; 0) + I(x_10 &gt; 0) + x_11*I(x_11 &gt; 0) + sqrt(abs(x_12)) +
cos(x_13) + 2*x_14 + abs(x_15) + I(x_16 &lt; -1) + x_17*I(x_17 &lt; -1) - 2 * x_18
- x_19*x_20 </pre>

<p>The random error here is also Gaussian with mean zero and a variance of 9.</p>
<p><code>SLC14_2</code> is also from Sapp et al. (2014). Two hundred independent
Gaussian variables are generated, each having mean zero and variance 16. The
functional form is</p>
<pre> -1 + log(abs(x_1)) + ... + log(abs(x_200)) </pre>

<p>and the error term is Gaussian with mean zero and a variance of 25.</p>
<p>For each simulation, the user can also add non-informative predictors to the
data. These are random standard normal predictors and can be optionally
added to the data in two ways: a specified number of independent predictors
or a set number of predictors that follow a particular correlation
structure. The only two correlation structure that have been implemented are</p>
<ul>
<li><p>compound-symmetry (aka exchangeable) where there is a
constant correlation between all the predictors</p></li>
<li><p>auto-regressive 1 [AR(1)]. While there is no time component to these
data, this structure can be used to add predictors of varying levels of
correlation. For example, if there were 4 predictors and <code>r</code> was the
correlation parameter, the between predictor correlation matrix would be</p></li>
</ul>

<pre> | 1 sym | | r 1 | | r^2 r 1 | | r^3 r^2 r 1 | | r^4 r^3 r^2 r
1 | </pre>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>van der Laan, M. J., &amp; Polley Eric, C. (2007). Super learner.
Statistical Applications in Genetics and Molecular Biology, 6(1), 1-23.</p>
<p>Sapp, S., van der Laan, M. J., &amp; Canny, J. (2014). Subsemble: an ensemble
method for combining subset-specific algorithm fits. Journal of Applied
Statistics, 41(6), 1247-1259.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>example</span> <span class='kw'>&lt;-</span> <span class='fu'>twoClassSim</span>(<span class='fl'>100</span>, <span class='kw'>linearVars</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='fu'>splom</span>(~<span class='no'>example</span>[, <span class='fl'>1</span>:<span class='fl'>6</span>], <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>example</span>$<span class='no'>Class</span>)</div><div class='img'><img src='twoClassSim-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Max Kuhn</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


