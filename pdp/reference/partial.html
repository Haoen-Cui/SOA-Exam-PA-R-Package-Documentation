<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Partial Dependence Functions — partial • pdp</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Partial Dependence Functions — partial" />
<meta property="og:description" content="Compute partial dependence functions (i.e., marginal effects) for various
model fitting objects." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pdp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bgreenwell/pdp">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Partial Dependence Functions</h1>
    <small class="dont-index">Source: <a href='https://github.com/bgreenwell/pdp/blob/master/R/partial.R'><code>R/partial.R</code></a></small>
    <div class="hidden name"><code>partial.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Compute partial dependence functions (i.e., marginal effects) for various
model fitting objects.</p>
    </div>

    <pre class="usage"><span class='fu'>partial</span>(<span class='no'>object</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>partial</span>(<span class='no'>object</span>, <span class='no'>pred.var</span>, <span class='no'>pred.grid</span>, <span class='kw'>pred.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>grid.resolution</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ice</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>center</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>quantiles</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>probs</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>9</span>/<span class='fl'>10</span>, <span class='kw'>trim.outliers</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"auto"</span>, <span class='st'>"regression"</span>, <span class='st'>"classification"</span>), <span class='kw'>inv.link</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>which.class</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>plot.engine</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"lattice"</span>, <span class='st'>"ggplot2"</span>), <span class='kw'>smooth</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>chull</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>levelplot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>contour</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>contour.color</span> <span class='kw'>=</span> <span class='st'>"white"</span>, <span class='kw'>palette</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"viridis"</span>, <span class='st'>"magma"</span>, <span class='st'>"inferno"</span>,
  <span class='st'>"plasma"</span>, <span class='st'>"cividis"</span>), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='no'>train</span>, <span class='kw'>cats</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>check.class</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>progress</span> <span class='kw'>=</span> <span class='st'>"none"</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>paropts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A fitted model object of appropriate class (e.g., <code>"gbm"</code>,
<code>"lm"</code>, <code>"randomForest"</code>, <code>"train"</code>, etc.).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional optional arguments to be passed onto
<code><a href='https://rdrr.io/r/stats/predict.html'>predict</a></code>.</p></td>
    </tr>
    <tr>
      <th>pred.var</th>
      <td><p>Character string giving the names of the predictor variables
of interest. For reasons of computation/interpretation, this should include
no more than three variables.</p></td>
    </tr>
    <tr>
      <th>pred.grid</th>
      <td><p>Data frame containing the joint values of interest for the
variables listed in <code>pred.var</code>.</p></td>
    </tr>
    <tr>
      <th>pred.fun</th>
      <td><p>Optional prediction function that requires two arguments:
<code>object</code> and <code>newdata</code>. If specified, then the function must return
a single prediction or a vector of predictions (i.e., not a matrix or data
frame). Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>grid.resolution</th>
      <td><p>Integer giving the number of equally spaced points to
use for the continuous variables listed in <code>pred.var</code> when
<code>pred.grid</code> is not supplied. If left <code>NULL</code>, it will default to
the minimum between <code>51</code> and the number of unique data points for each
of the continuous independent variables listed in <code>pred.var</code>.</p></td>
    </tr>
    <tr>
      <th>ice</th>
      <td><p>Logical indicating whether or not to compute individual
conditional expectation (ICE) curves. Default is <code>FALSE</code>. See
Goldstein et al. (2014) for details.</p></td>
    </tr>
    <tr>
      <th>center</th>
      <td><p>Logical indicating whether or not to produce centered ICE
curves (c-ICE curves). Only used when <code>ice = TRUE</code>. Default is
<code>FALSE</code>. See Goldstein et al. (2014) for details.</p></td>
    </tr>
    <tr>
      <th>quantiles</th>
      <td><p>Logical indicating whether or not to use the sample
quantiles of the continuous predictors listed in <code>pred.var</code>. If
<code>quantiles = TRUE</code> and <code>grid.resolution = NULL</code> the sample
quantiles will be used to generate the grid of joint values for which the
partial dependence is computed.</p></td>
    </tr>
    <tr>
      <th>probs</th>
      <td><p>Numeric vector of probabilities with values in [0,1]. (Values up
to 2e-14 outside that range are accepted and moved to the nearby endpoint.)
Default is <code>1:9/10</code> which corresponds to the deciles of the predictor
variables. These specify which quantiles to use for the continuous predictors
listed in <code>pred.var</code> when <code>quantiles = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>trim.outliers</th>
      <td><p>Logical indicating whether or not to trim off outliers
from the continuous predictors listed in <code>pred.var</code> (using the simple
boxplot method) before generating the grid of joint values for which the
partial dependence is computed. Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Character string specifying the type of supervised learning.
Current options are <code>"auto"</code>, <code>"regression"</code> or
<code>"classification"</code>. If <code>type = "auto"</code> then <code>partial</code> will try
to extract the necessary information from <code>object</code>.</p></td>
    </tr>
    <tr>
      <th>inv.link</th>
      <td><p>Function specifying the transformation to be applied to the
predictions before the partial dependence function is computed
(experimental). Default is <code>NULL</code> (i.e., no transformation). This option
is intended to be used for models that allow for non-Gaussian response
variables (e.g., counts). For these models, predictions are not typically
returned on the original response scale by default. For example, Poisson GBMs
typically return predictions on the log scale. In this case setting
<code>inv.link = exp</code> will return the partial dependence function on the
response (i.e., raw count) scale.</p></td>
    </tr>
    <tr>
      <th>which.class</th>
      <td><p>Integer specifying which column of the matrix of predicted
probabilities to use as the "focus" class. Default is to use the first class.
Only used for classification problems (i.e., when
<code>type = "classification"</code>).</p></td>
    </tr>
    <tr>
      <th>prob</th>
      <td><p>Logical indicating whether or not partial dependence for
classification problems should be returned on the probability scale, rather
than the centered logit. If <code>FALSE</code>, the partial dependence function is
on a scale similar to the logit. Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>recursive</th>
      <td><p>Logical indicating whether or not to use the weighted tree
traversal method described in Friedman (2001). This only applies to objects
that inherit from class <code>"gbm"</code>. Default is <code>TRUE</code> which is much
faster than the exact brute force approach used for all other models. (Based
on the C++ code behind <code><a href='https://rdrr.io/pkg/gbm/man/plot.gbm.html'>plot.gbm</a></code>.)</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>Logical indicating whether to return a data frame containing the
partial dependence values (<code>FALSE</code>) or plot the partial dependence
function directly (<code>TRUE</code>). Default is <code>FALSE</code>. See
<code><a href='plotPartial.html'>plotPartial</a></code> for plotting details.</p></td>
    </tr>
    <tr>
      <th>plot.engine</th>
      <td><p>Character string specifying which plotting engine to use
whenever <code>plot = TRUE</code>. Options include <code>"lattice"</code> (default) or
<code>"ggplot2"</code>.</p></td>
    </tr>
    <tr>
      <th>smooth</th>
      <td><p>Logical indicating whether or not to overlay a LOESS smooth.
Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>rug</th>
      <td><p>Logical indicating whether or not to include a rug display on the
predictor axes. The tick marks indicate the min/max and deciles of the
predictor distributions. This helps reduce the risk of interpreting the
partial dependence plot outside the region of the data (i.e., extrapolating).
Only used when <code>plot = TRUE</code>. Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>chull</th>
      <td><p>Logical indicating whether or not to restrict the values of the
first two variables in <code>pred.var</code> to lie within the convex hull of their
training values; this affects <code>pred.grid</code>. This helps reduce the risk of
interpreting the partial dependence plot outside the region of the data
(i.e., extrapolating).Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>levelplot</th>
      <td><p>Logical indicating whether or not to use a false color level
plot (<code>TRUE</code>) or a 3-D surface (<code>FALSE</code>). Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>contour</th>
      <td><p>Logical indicating whether or not to add contour lines to the
level plot. Only used when <code>levelplot = TRUE</code>. Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>contour.color</th>
      <td><p>Character string specifying the color to use for the
contour lines when <code>contour = TRUE</code>. Default is <code>"white"</code>.</p></td>
    </tr>
    <tr>
      <th>palette</th>
      <td><p>Character string indicating the colormap option to use. Five
options are available: "viridis" (the default), "magma", "inferno", "plasma",
and "cividis".</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>Numeric value in <code>[0, 1]</code> specifying the opacity alpha (
most useful when plotting ICE/c-ICE curves). Default is 1 (i.e., no
transparency). In fact, this option only affects ICE/c-ICE curves and level
plots.</p></td>
    </tr>
    <tr>
      <th>train</th>
      <td><p>An optional data frame, matrix, or sparse matrix containing the
original training data. This may be required depending on the class of
<code>object</code>. For objects that do not store a copy of the original training
data, this argument is required. For reasons discussed below, it is good
practice to always specify this argument.</p></td>
    </tr>
    <tr>
      <th>cats</th>
      <td><p>Character string indicating which columns of <code>train</code> should
be treated as categorical variables. Only used when <code>train</code> inherits
from class <code>"matrix"</code> or <code>"dgCMatrix"</code>.</p></td>
    </tr>
    <tr>
      <th>check.class</th>
      <td><p>Logical indicating whether or not to make sure each column
in <code>pred.grid</code> has the correct class, levels, etc. Default is
<code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>progress</th>
      <td><p>Character string giving the name of the progress bar to use
while constructing the partial dependence function. See
<code><a href='https://rdrr.io/pkg/plyr/man/create_progress_bar.html'>create_progress_bar</a></code> for details. Default is
<code>"none"</code>.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Logical indicating whether or not to run <code>partial</code> in
parallel using a backend provided by the <code>foreach</code> package. Default is
<code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>paropts</th>
      <td><p>List containing additional options to be passed onto
<code><a href='https://rdrr.io/pkg/foreach/man/foreach.html'>foreach</a></code> when <code>parallel = TRUE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>By default, <code>partial</code> returns an object of class
<code><a href='https://rdrr.io/r/base/c.html'>c("data.frame", "partial")</a></code>. If <code>ice = TRUE</code> and
<code>center = FALSE</code> then an object of class <code><a href='https://rdrr.io/r/base/c.html'>c("data.frame", "ice")</a></code>
is returned. If <code>ice = TRUE</code> and <code>center = TRUE</code> then an object of
class <code><a href='https://rdrr.io/r/base/c.html'>c("data.frame", "cice")</a></code> is returned. These three classes
determine the behavior of the <code>plotPartial</code> function which is
automatically called whenever <code>plot = TRUE</code>. Specifically, when
<code>plot = TRUE</code>, a <code>"trellis"</code> object is returned (see
<code><a href='https://rdrr.io/pkg/lattice/man/Lattice.html'>lattice</a></code> for details); the <code>"trellis"</code> object will
also include an additional attribute, <code>"partial.data"</code>, containing the
data displayed in the plot.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>In some cases it is difficult for <code>partial</code> to extract the original
training data from <code>object</code>. In these cases an error message is
displayed requesting the user to supply the training data via the
<code>train</code> argument in the call to <code>partial</code>. In most cases where
<code>partial</code> can extract the required training data from <code>object</code>,
it is taken from the same environment in which <code>partial</code> is called.
Therefore, it is important to not change the training data used to construct
<code>object</code> before calling <code>partial</code>. This problem is completely
avoided when the training data are passed to the <code>train</code> argument in the
call to <code>partial</code>.</p>
<p>It is recommended to call <code>partial</code> with <code>plot = FALSE</code> and store
the results. This allows for more flexible plotting, and the user will not
have to waste time calling <code>partial</code> again if the default plot is not
sufficient.</p>
<p>It is possible to retrieve the last printed <code>"trellis"</code> object, such as
those produced by <code>plotPartial</code>, using <code><a href='trellis.last.object.html'>trellis.last.object()</a></code>.</p>
<p>If <code>ice = TRUE</code> or the prediction function given to <code>pred.fun</code>
returns a prediction for each observation in <code>newdata</code>, then the result
will be a curve for each observation. These are called individual conditional
expectation (ICE) curves; see Goldstein et al. (2015) and
<code>ice</code> for details.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>J. H. Friedman. Greedy function approximation: A gradient boosting machine.
<em>Annals of Statistics</em>, <b>29</b>: 1189-1232, 2001.</p>
<p>Goldstein, A., Kapelner, A., Bleich, J., and Pitkin, E., Peeking Inside the
Black Box: Visualizing Statistical Learning With Plots of Individual
Conditional Expectation. (2014) <em>Journal of Computational and Graphical
Statistics</em>, <b>24</b>(1): 44-65, 2015.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'>#</span>
<span class='co'># Regression example (requires randomForest package to run)</span>
<span class='co'>#</span>

<span class='co'># Fit a random forest to the boston housing data</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>randomForest</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span> (<span class='no'>boston</span>)  <span class='co'># load the boston housing data</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>101</span>)  <span class='co'># for reproducibility</span>
<span class='no'>boston.rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/randomForest/man/randomForest.html'>randomForest</a></span>(<span class='no'>cmedv</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>boston</span>)

<span class='co'># Using randomForest's partialPlot function</span>
<span class='fu'><a href='https://rdrr.io/pkg/randomForest/man/partialPlot.html'>partialPlot</a></span>(<span class='no'>boston.rf</span>, <span class='kw'>pred.data</span> <span class='kw'>=</span> <span class='no'>boston</span>, <span class='kw'>x.var</span> <span class='kw'>=</span> <span class='st'>"lstat"</span>)

<span class='co'># Using pdp's partial function</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>partial</span>(<span class='no'>boston.rf</span>, <span class='kw'>pred.var</span> <span class='kw'>=</span> <span class='st'>"lstat"</span>))  <span class='co'># returns a data frame</span>
<span class='fu'>partial</span>(<span class='no'>boston.rf</span>, <span class='kw'>pred.var</span> <span class='kw'>=</span> <span class='st'>"lstat"</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># The partial function allows for multiple predictors</span>
<span class='fu'>partial</span>(<span class='no'>boston.rf</span>, <span class='kw'>pred.var</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"lstat"</span>, <span class='st'>"rm"</span>), <span class='kw'>grid.resolution</span> <span class='kw'>=</span> <span class='fl'>40</span>,
        <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>chull</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>progress</span> <span class='kw'>=</span> <span class='st'>"text"</span>)

<span class='co'># The plotPartial function offers more flexible plotting</span>
<span class='no'>pd</span> <span class='kw'>&lt;-</span> <span class='fu'>partial</span>(<span class='no'>boston.rf</span>, <span class='kw'>pred.var</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"lstat"</span>, <span class='st'>"rm"</span>), <span class='kw'>grid.resolution</span> <span class='kw'>=</span> <span class='fl'>40</span>)
<span class='fu'><a href='plotPartial.html'>plotPartial</a></span>(<span class='no'>pd</span>, <span class='kw'>levelplot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>zlab</span> <span class='kw'>=</span> <span class='st'>"cmedv"</span>, <span class='kw'>drape</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
            <span class='kw'>colorkey</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>screen</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>z</span> <span class='kw'>=</span> -<span class='fl'>20</span>, <span class='kw'>x</span> <span class='kw'>=</span> -<span class='fl'>60</span>))

<span class='co'># The autplot function can be used to produce graphics based on ggplot2</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>ggplot2</span>)
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/autoplot.html'>autoplot</a></span>(<span class='no'>pd</span>, <span class='kw'>contour</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>legend.title</span> <span class='kw'>=</span> <span class='st'>"Partial\ndependence"</span>)

<span class='co'>#</span>
<span class='co'># Individual conditional expectation (ICE) curves</span>
<span class='co'>#</span>

<span class='co'># Use partial to obtain ICE/c-ICE curves</span>
<span class='no'>rm.ice</span> <span class='kw'>&lt;-</span> <span class='fu'>partial</span>(<span class='no'>boston.rf</span>, <span class='kw'>pred.var</span> <span class='kw'>=</span> <span class='st'>"rm"</span>, <span class='kw'>ice</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='plotPartial.html'>plotPartial</a></span>(<span class='no'>rm.ice</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>train</span> <span class='kw'>=</span> <span class='no'>boston</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.2</span>)
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/autoplot.html'>autoplot</a></span>(<span class='no'>rm.ice</span>, <span class='kw'>center</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.2</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>train</span> <span class='kw'>=</span> <span class='no'>boston</span>)

<span class='co'>#</span>
<span class='co'># Classification example (requires randomForest package to run)</span>
<span class='co'>#</span>

<span class='co'># Fit a random forest to the Pima Indians diabetes data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span> (<span class='no'>pima</span>)  <span class='co'># load the boston housing data</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>102</span>)  <span class='co'># for reproducibility</span>
<span class='no'>pima.rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/randomForest/man/randomForest.html'>randomForest</a></span>(<span class='no'>diabetes</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>pima</span>, <span class='kw'>na.action</span> <span class='kw'>=</span> <span class='no'>na.omit</span>)

<span class='co'># Partial dependence of positive test result on glucose (default logit scale)</span>
<span class='fu'>partial</span>(<span class='no'>pima.rf</span>, <span class='kw'>pred.var</span> <span class='kw'>=</span> <span class='st'>"glucose"</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>chull</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
        <span class='kw'>progress</span> <span class='kw'>=</span> <span class='st'>"text"</span>)

<span class='co'># Partial dependence of positive test result on glucose (probability scale)</span>
<span class='fu'>partial</span>(<span class='no'>pima.rf</span>, <span class='kw'>pred.var</span> <span class='kw'>=</span> <span class='st'>"glucose"</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
        <span class='kw'>chull</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>progress</span> <span class='kw'>=</span> <span class='st'>"text"</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Brandon Greenwell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


