<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Return rows with matching conditions — filter • dplyr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Return rows with matching conditions — filter" />
<meta property="og:description" content="Use filter() to choose rows/cases where conditions are true. Unlike
base subsetting with [, rows where the condition evaluates to NA are
dropped." />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/dplyr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/compatibility.html">dplyr compatibility</a>
    </li>
    <li>
      <a href="../articles/future/dplyr_0.8.0.html">dplyr 0.8.0</a>
    </li>
    <li>
      <a href="../articles/future/dplyr_0.8.0_new_hybrid.html">New hybrid</a>
    </li>
    <li>
      <a href="../articles/programming.html">Programming with dplyr</a>
    </li>
    <li>
      <a href="../articles/two-table.html">Two-table verbs</a>
    </li>
    <li>
      <a href="../articles/window-functions.html">Window functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tidyverse/dplyr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Return rows with matching conditions</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/dplyr/blob/master/R/manip.r'><code>R/manip.r</code></a></small>
    <div class="hidden name"><code>filter.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use <code>filter()</code> to choose rows/cases where conditions are true. Unlike
base subsetting with <code>[</code>, rows where the condition evaluates to <code>NA</code> are
dropped.</p>
    </div>

    <pre class="usage"><span class='fu'>filter</span>(<span class='no'>.data</span>, <span class='no'>...</span>, <span class='kw'>.preserve</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>A tbl. All main verbs are S3 generics and provide methods
for <code><a href='tbl_df.html'>tbl_df()</a></code>, <code>dtplyr::tbl_dt()</code> and <code>dbplyr::tbl_dbi()</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Logical predicates defined in terms of the variables in <code>.data</code>.
Multiple conditions are combined with <code>&amp;</code>. Only rows where the
condition evaluates to <code>TRUE</code> are kept.</p>
<p>The arguments in <code>...</code> are automatically <a href='https://rlang.r-lib.org/reference/nse-defuse.html'>quoted</a> and
<a href='https://rlang.r-lib.org/reference/eval_tidy.html'>evaluated</a> in the context of the data
frame. They support <a href='https://rlang.r-lib.org/reference/nse-force.html'>unquoting</a> and
splicing. See <code><a href='../articles/programming.html'>vignette("programming")</a></code> for an introduction to
these concepts.</p></td>
    </tr>
    <tr>
      <th>.preserve</th>
      <td><p>when <code>FALSE</code> (the default), the grouping structure
is recalculated based on the resulting data, otherwise it is kept as is.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the same class as <code>.data</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Note that dplyr is not yet smart enough to optimise filtering optimisation
on grouped datasets that don't need grouped calculations. For this reason,
filtering is often considerably faster on <code><a href='group_by.html'>ungroup()</a></code>ed data.</p>
    <h2 class="hasAnchor" id="useful-filter-functions"><a class="anchor" href="#useful-filter-functions"></a>Useful filter functions</h2>

    

<ul>
<li><p><code><a href='https://rdrr.io/r/base/Comparison.html'>==</a></code>, <code>&gt;</code>, <code>&gt;=</code> etc</p></li>
<li><p><code>&amp;</code>, <code><a href='https://rdrr.io/r/base/Logic.html'>|</a></code>, <code><a href='https://rdrr.io/r/base/Logic.html'>!</a></code>, <code><a href='https://rdrr.io/r/base/Logic.html'>xor()</a></code></p></li>
<li><p><code><a href='https://rdrr.io/r/base/NA.html'>is.na()</a></code></p></li>
<li><p><code><a href='between.html'>between()</a></code>, <code><a href='near.html'>near()</a></code></p></li>
</ul>

    <h2 class="hasAnchor" id="grouped-tibbles"><a class="anchor" href="#grouped-tibbles"></a>Grouped tibbles</h2>

    


<p>Because filtering expressions are computed within groups, they may
yield different results on grouped tibbles. This will be the case
as soon as an aggregating, lagging, or ranking function is
involved. Compare this ungrouped filtering:</p><pre>starwars %&gt;% filter(mass &gt; mean(mass, na.rm = TRUE))
</pre>

<p>With the grouped equivalent:</p><pre>starwars %&gt;% group_by(gender) %&gt;% filter(mass &gt; mean(mass, na.rm = TRUE))
</pre>

<p>The former keeps rows with <code>mass</code> greater than the global average
whereas the latter keeps rows with <code>mass</code> greater than the gender
average.</p>
<p>It is valid to use grouping variables in filter expressions.</p>
<p>When applied on a grouped tibble, <code>filter()</code> automatically <a href='arrange.html'>rearranges</a>
the tibble by groups for performance reasons.</p>
    <h2 class="hasAnchor" id="tidy-data"><a class="anchor" href="#tidy-data"></a>Tidy data</h2>

    

<p>When applied to a data frame, row names are silently dropped. To preserve,
convert to an explicit variable with <code><a href='https://tibble.tidyverse.org/reference/rownames.html'>tibble::rownames_to_column()</a></code>.</p>
    <h2 class="hasAnchor" id="scoped-filtering"><a class="anchor" href="#scoped-filtering"></a>Scoped filtering</h2>

    

<p>The three <a href='scoped.html'>scoped</a> variants (<code><a href='filter_all.html'>filter_all()</a></code>, <code><a href='filter_all.html'>filter_if()</a></code> and
<code><a href='filter_all.html'>filter_at()</a></code>) make it easy to apply a filtering condition to a
selection of variables.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='filter_all.html'>filter_all()</a></code>, <code><a href='filter_all.html'>filter_if()</a></code> and <code><a href='filter_all.html'>filter_at()</a></code>.</p>
<p>Other single table verbs: <code><a href='arrange.html'>arrange</a></code>,
  <code><a href='mutate.html'>mutate</a></code>, <code><a href='select.html'>select</a></code>,
  <code><a href='slice.html'>slice</a></code>, <code><a href='summarise.html'>summarise</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>filter</span>(<span class='no'>starwars</span>, <span class='no'>species</span> <span class='kw'>==</span> <span class='st'>"Human"</span>)</div><div class='output co'>#&gt; # A tibble: 35 x 13
#&gt;    name  height  mass hair_color skin_color eye_color birth_year gender
#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
#&gt;  1 Luke…    172    77 blond      fair       blue            19   male  
#&gt;  2 Dart…    202   136 none       white      yellow          41.9 male  
#&gt;  3 Leia…    150    49 brown      light      brown           19   female
#&gt;  4 Owen…    178   120 brown, gr… light      blue            52   male  
#&gt;  5 Beru…    165    75 brown      light      blue            47   female
#&gt;  6 Bigg…    183    84 black      light      brown           24   male  
#&gt;  7 Obi-…    182    77 auburn, w… fair       blue-gray       57   male  
#&gt;  8 Anak…    188    84 blond      fair       blue            41.9 male  
#&gt;  9 Wilh…    180    NA auburn, g… fair       blue            64   male  
#&gt; 10 Han …    180    80 brown      fair       brown           29   male  
#&gt; # … with 25 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#&gt; #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</div><div class='input'><span class='fu'>filter</span>(<span class='no'>starwars</span>, <span class='no'>mass</span> <span class='kw'>&gt;</span> <span class='fl'>1000</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 13
#&gt;   name  height  mass hair_color skin_color eye_color birth_year gender homeworld
#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;    
#&gt; 1 Jabb…    175  1358 &lt;NA&gt;       green-tan… orange           600 herma… Nal Hutta
#&gt; # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;,
#&gt; #   starships &lt;list&gt;</div><div class='input'>
<span class='co'># Multiple criteria</span>
<span class='fu'>filter</span>(<span class='no'>starwars</span>, <span class='no'>hair_color</span> <span class='kw'>==</span> <span class='st'>"none"</span> <span class='kw'>&amp;</span> <span class='no'>eye_color</span> <span class='kw'>==</span> <span class='st'>"black"</span>)</div><div class='output co'>#&gt; # A tibble: 9 x 13
#&gt;   name  height  mass hair_color skin_color eye_color birth_year gender homeworld
#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;    
#&gt; 1 Nien…    160    68 none       grey       black             NA male   Sullust  
#&gt; 2 Gasg…    122    NA none       white, bl… black             NA male   Troiken  
#&gt; 3 Kit …    196    87 none       green      black             NA male   Glee Ans…
#&gt; 4 Plo …    188    80 none       orange     black             22 male   Dorin    
#&gt; 5 Lama…    229    88 none       grey       black             NA male   Kamino   
#&gt; 6 Taun…    213    NA none       grey       black             NA female Kamino   
#&gt; 7 Shaa…    178    57 none       red, blue… black             NA female Shili    
#&gt; 8 Tion…    206    80 none       grey       black             NA male   Utapau   
#&gt; 9 BB8       NA    NA none       none       black             NA none   &lt;NA&gt;     
#&gt; # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;,
#&gt; #   starships &lt;list&gt;</div><div class='input'><span class='fu'>filter</span>(<span class='no'>starwars</span>, <span class='no'>hair_color</span> <span class='kw'>==</span> <span class='st'>"none"</span> <span class='kw'>|</span> <span class='no'>eye_color</span> <span class='kw'>==</span> <span class='st'>"black"</span>)</div><div class='output co'>#&gt; # A tibble: 38 x 13
#&gt;    name  height  mass hair_color skin_color eye_color birth_year gender
#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
#&gt;  1 Dart…    202   136 none       white      yellow          41.9 male  
#&gt;  2 Gree…    173    74 &lt;NA&gt;       green      black           44   male  
#&gt;  3 IG-88    200   140 none       metal      red             15   none  
#&gt;  4 Bossk    190   113 none       green      red             53   male  
#&gt;  5 Lobot    175    79 none       light      blue            37   male  
#&gt;  6 Ackb…    180    83 none       brown mot… orange          41   male  
#&gt;  7 Nien…    160    68 none       grey       black           NA   male  
#&gt;  8 Nute…    191    90 none       mottled g… red             NA   male  
#&gt;  9 Jar …    196    66 none       orange     orange          52   male  
#&gt; 10 Roos…    224    82 none       grey       orange          NA   male  
#&gt; # … with 28 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#&gt; #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</div><div class='input'>
<span class='co'># Multiple arguments are equivalent to and</span>
<span class='fu'>filter</span>(<span class='no'>starwars</span>, <span class='no'>hair_color</span> <span class='kw'>==</span> <span class='st'>"none"</span>, <span class='no'>eye_color</span> <span class='kw'>==</span> <span class='st'>"black"</span>)</div><div class='output co'>#&gt; # A tibble: 9 x 13
#&gt;   name  height  mass hair_color skin_color eye_color birth_year gender homeworld
#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;    
#&gt; 1 Nien…    160    68 none       grey       black             NA male   Sullust  
#&gt; 2 Gasg…    122    NA none       white, bl… black             NA male   Troiken  
#&gt; 3 Kit …    196    87 none       green      black             NA male   Glee Ans…
#&gt; 4 Plo …    188    80 none       orange     black             22 male   Dorin    
#&gt; 5 Lama…    229    88 none       grey       black             NA male   Kamino   
#&gt; 6 Taun…    213    NA none       grey       black             NA female Kamino   
#&gt; 7 Shaa…    178    57 none       red, blue… black             NA female Shili    
#&gt; 8 Tion…    206    80 none       grey       black             NA male   Utapau   
#&gt; 9 BB8       NA    NA none       none       black             NA none   &lt;NA&gt;     
#&gt; # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;,
#&gt; #   starships &lt;list&gt;</div><div class='input'>

<span class='co'># The filtering operation may yield different results on grouped</span>
<span class='co'># tibbles because the expressions are computed within groups.</span>
<span class='co'>#</span>
<span class='co'># The following filters rows where `mass` is greater than the</span>
<span class='co'># global average:</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span> <span class='fu'>filter</span>(<span class='no'>mass</span> <span class='kw'>&gt;</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>mass</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; # A tibble: 10 x 13
#&gt;    name  height  mass hair_color skin_color eye_color birth_year gender
#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
#&gt;  1 Dart…    202   136 none       white      yellow          41.9 male  
#&gt;  2 Owen…    178   120 brown, gr… light      blue            52   male  
#&gt;  3 Chew…    228   112 brown      unknown    blue           200   male  
#&gt;  4 Jabb…    175  1358 &lt;NA&gt;       green-tan… orange         600   herma…
#&gt;  5 Jek …    180   110 brown      fair       blue            NA   male  
#&gt;  6 IG-88    200   140 none       metal      red             15   none  
#&gt;  7 Bossk    190   113 none       green      red             53   male  
#&gt;  8 Dext…    198   102 none       brown      yellow          NA   male  
#&gt;  9 Grie…    216   159 none       brown, wh… green, y…       NA   male  
#&gt; 10 Tarf…    234   136 brown      brown      blue            NA   male  
#&gt; # … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#&gt; #   vehicles &lt;list&gt;, starships &lt;list&gt;</div><div class='input'>
<span class='co'># Whereas this keeps rows with `mass` greater than the gender</span>
<span class='co'># average:</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='group_by.html'>group_by</a></span>(<span class='no'>gender</span>) <span class='kw'>%&gt;%</span> <span class='fu'>filter</span>(<span class='no'>mass</span> <span class='kw'>&gt;</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>mass</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; # A tibble: 25 x 13
#&gt; # Groups:   gender [3]
#&gt;    name  height  mass hair_color skin_color eye_color birth_year gender
#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
#&gt;  1 C-3PO    167    75 &lt;NA&gt;       gold       yellow         112   &lt;NA&gt;  
#&gt;  2 Dart…    202   136 none       white      yellow          41.9 male  
#&gt;  3 Owen…    178   120 brown, gr… light      blue            52   male  
#&gt;  4 Beru…    165    75 brown      light      blue            47   female
#&gt;  5 Bigg…    183    84 black      light      brown           24   male  
#&gt;  6 Anak…    188    84 blond      fair       blue            41.9 male  
#&gt;  7 Chew…    228   112 brown      unknown    blue           200   male  
#&gt;  8 Jek …    180   110 brown      fair       blue            NA   male  
#&gt;  9 Bossk    190   113 none       green      red             53   male  
#&gt; 10 Ackb…    180    83 none       brown mot… orange          41   male  
#&gt; # … with 15 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#&gt; #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</div><div class='input'>

<span class='co'># Refer to column names stored as strings with the `.data` pronoun:</span>
<span class='no'>vars</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"mass"</span>, <span class='st'>"height"</span>)
<span class='no'>cond</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>80</span>, <span class='fl'>150</span>)
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>filter</span>(
    <span class='no'>.data</span><span class='kw'>[[</span><span class='no'>vars</span><span class='kw'>[[</span><span class='fl'>1</span>]]]] <span class='kw'>&gt;</span> <span class='no'>cond</span><span class='kw'>[[</span><span class='fl'>1</span>]],
    <span class='no'>.data</span><span class='kw'>[[</span><span class='no'>vars</span><span class='kw'>[[</span><span class='fl'>2</span>]]]] <span class='kw'>&gt;</span> <span class='no'>cond</span><span class='kw'>[[</span><span class='fl'>2</span>]]
  )</div><div class='output co'>#&gt; # A tibble: 21 x 13
#&gt;    name  height  mass hair_color skin_color eye_color birth_year gender
#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
#&gt;  1 Dart…    202   136 none       white      yellow          41.9 male  
#&gt;  2 Owen…    178   120 brown, gr… light      blue            52   male  
#&gt;  3 Bigg…    183    84 black      light      brown           24   male  
#&gt;  4 Anak…    188    84 blond      fair       blue            41.9 male  
#&gt;  5 Chew…    228   112 brown      unknown    blue           200   male  
#&gt;  6 Jabb…    175  1358 &lt;NA&gt;       green-tan… orange         600   herma…
#&gt;  7 Jek …    180   110 brown      fair       blue            NA   male  
#&gt;  8 IG-88    200   140 none       metal      red             15   none  
#&gt;  9 Bossk    190   113 none       green      red             53   male  
#&gt; 10 Ackb…    180    83 none       brown mot… orange          41   male  
#&gt; # … with 11 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#&gt; #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</div><div class='input'>
<span class='co'># For more complex cases, knowledge of tidy evaluation and the</span>
<span class='co'># unquote operator `!!` is required. See https://tidyeval.tidyverse.org/</span>
<span class='co'>#</span>
<span class='co'># One useful and simple tidy eval technique is to use `!!` to bypass</span>
<span class='co'># the data frame and its columns. Here is how to filter the columns</span>
<span class='co'># `mass` and `height` relative to objects of the same names:</span>
<span class='no'>mass</span> <span class='kw'>&lt;-</span> <span class='fl'>80</span>
<span class='no'>height</span> <span class='kw'>&lt;-</span> <span class='fl'>150</span>
<span class='fu'>filter</span>(<span class='no'>starwars</span>, <span class='no'>mass</span> <span class='kw'>&gt;</span> !!<span class='no'>mass</span>, <span class='no'>height</span> <span class='kw'>&gt;</span> !!<span class='no'>height</span>)</div><div class='output co'>#&gt; # A tibble: 21 x 13
#&gt;    name  height  mass hair_color skin_color eye_color birth_year gender
#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
#&gt;  1 Dart…    202   136 none       white      yellow          41.9 male  
#&gt;  2 Owen…    178   120 brown, gr… light      blue            52   male  
#&gt;  3 Bigg…    183    84 black      light      brown           24   male  
#&gt;  4 Anak…    188    84 blond      fair       blue            41.9 male  
#&gt;  5 Chew…    228   112 brown      unknown    blue           200   male  
#&gt;  6 Jabb…    175  1358 &lt;NA&gt;       green-tan… orange         600   herma…
#&gt;  7 Jek …    180   110 brown      fair       blue            NA   male  
#&gt;  8 IG-88    200   140 none       metal      red             15   none  
#&gt;  9 Bossk    190   113 none       green      red             53   male  
#&gt; 10 Ackb…    180    83 none       brown mot… orange          41   male  
#&gt; # … with 11 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#&gt; #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#useful-filter-functions">Useful filter functions</a></li>
      <li><a href="#grouped-tibbles">Grouped tibbles</a></li>
      <li><a href="#tidy-data">Tidy data</a></li>
      <li><a href="#scoped-filtering">Scoped filtering</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Romain François, Lionel Henry, Kirill Müller, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


