<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Grouping Set aggregation for data tables — groupingsets • data.table</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Grouping Set aggregation for data tables — groupingsets" />
<meta property="og:description" content="Calculate aggregates at various levels of groupings producing multiple (sub-)totals. Reflects SQLs GROUPING SETS operations." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">data.table</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.12.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/datatable-benchmarking.html">Benchmarking data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-faq.html">Frequently Asked Questions about data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-importing.html">Importing data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-intro.html">Introduction to data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-keys-fast-subset.html">Keys and fast binary search based subset</a>
    </li>
    <li>
      <a href="../articles/datatable-reference-semantics.html">Reference semantics</a>
    </li>
    <li>
      <a href="../articles/datatable-reshape.html">Efficient reshaping using data.tables</a>
    </li>
    <li>
      <a href="../articles/datatable-sd-usage.html">Using .SD for Data Analysis</a>
    </li>
    <li>
      <a href="../articles/datatable-secondary-indices-and-auto-indexing.html">Secondary indices and auto indexing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Rdatatable/data.table">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Grouping Set aggregation for data tables</h1>
    
    <div class="hidden name"><code>groupingsets.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate aggregates at various levels of groupings producing multiple (sub-)totals. Reflects SQLs <em>GROUPING SETS</em> operations.</p>
    </div>

    <pre class="usage"><span class='fu'>rollup</span>(<span class='no'>x</span>, <span class='no'>...</span>)
<span class='co'># S3 method for data.table</span>
<span class='fu'>rollup</span>(<span class='no'>x</span>, <span class='no'>j</span>, <span class='no'>by</span>, <span class='no'>.SDcols</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)
<span class='fu'>cube</span>(<span class='no'>x</span>, <span class='no'>...</span>)
<span class='co'># S3 method for data.table</span>
<span class='fu'>cube</span>(<span class='no'>x</span>, <span class='no'>j</span>, <span class='no'>by</span>, <span class='no'>.SDcols</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)
<span class='fu'>groupingsets</span>(<span class='no'>x</span>, <span class='no'>...</span>)
<span class='co'># S3 method for data.table</span>
<span class='fu'>groupingsets</span>(<span class='no'>x</span>, <span class='no'>j</span>, <span class='no'>by</span>, <span class='no'>sets</span>, <span class='no'>.SDcols</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>jj</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>data.table</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>argument passed to custom user methods. Ignored for <code>data.table</code> methods.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>expression passed to data.table <code>j</code>.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>character column names by which we are grouping.</p></td>
    </tr>
    <tr>
      <th>sets</th>
      <td><p>list of character vector reflecting grouping sets, used in <code>groupingsets</code> for flexibility.</p></td>
    </tr>
    <tr>
      <th>.SDcols</th>
      <td><p>columns to be used in <code>j</code> expression in <code>.SD</code> object.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>logical default <code>FALSE</code>. If <code>TRUE</code> it will add leading column with bit mask of grouping sets.</p></td>
    </tr>
    <tr>
      <th>jj</th>
      <td><p>quoted version of <code>j</code> argument, for convenience. When provided function will ignore <code>j</code> argument.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All three functions <code>rollup, cube, groupingsets</code> are generic methods, <code>data.table</code> methods are provided.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data.table with various aggregates.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='data.table.html'>data.table</a></code>, <code><a href='rbindlist.html'>rbindlist</a></code></p></div>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='http://www.postgresql.org/docs/9.5/static/queries-table-expressions.html#QUERIES-GROUPING-SETS'>http://www.postgresql.org/docs/9.5/static/queries-table-expressions.html#QUERIES-GROUPING-SETS</a>
<a href='http://www.postgresql.org/docs/9.5/static/functions-aggregate.html#FUNCTIONS-GROUPING-TABLE'>http://www.postgresql.org/docs/9.5/static/functions-aggregate.html#FUNCTIONS-GROUPING-TABLE</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>n</span> <span class='kw'>=</span> <span class='fl'>24L</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>25</span>)
<span class='no'>DT</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(
    <span class='kw'>color</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"green"</span>,<span class='st'>"yellow"</span>,<span class='st'>"red"</span>), <span class='no'>n</span>, <span class='fl'>TRUE</span>),
    <span class='kw'>year</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='fl'>2011</span>:<span class='fl'>2015</span>,<span class='st'>"-01-01"</span>), <span class='no'>n</span>, <span class='fl'>TRUE</span>)),
    <span class='kw'>status</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"removed"</span>,<span class='st'>"active"</span>,<span class='st'>"inactive"</span>,<span class='st'>"archived"</span>), <span class='no'>n</span>, <span class='fl'>TRUE</span>)),
    <span class='kw'>amount</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='no'>n</span>, <span class='fl'>TRUE</span>),
    <span class='kw'>value</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>3.5</span>, <span class='fl'>2.5</span>, <span class='fl'>2</span>), <span class='no'>n</span>, <span class='fl'>TRUE</span>)
)

<span class='co'># rollup</span>
<span class='fu'>rollup</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>value</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>)) <span class='co'># default id=FALSE</span></div><div class='output co'>#&gt;      color       year   status   V1
#&gt;  1:    red 2015-01-01   active  3.5
#&gt;  2:  green 2015-01-01 inactive  5.5
#&gt;  3:  green 2014-01-01 archived  3.5
#&gt;  4:  green 2015-01-01 archived  2.0
#&gt;  5: yellow 2014-01-01   active  4.5
#&gt;  6:    red 2013-01-01 inactive  2.0
#&gt;  7:  green 2011-01-01   active  6.0
#&gt;  8:    red 2014-01-01 inactive  2.5
#&gt;  9:  green 2011-01-01 archived  2.5
#&gt; 10: yellow 2015-01-01   active  2.0
#&gt; 11:    red 2012-01-01 archived  2.0
#&gt; 12:    red 2011-01-01  removed  3.5
#&gt; 13:  green 2014-01-01 inactive  8.0
#&gt; 14:  green 2011-01-01  removed  2.0
#&gt; 15: yellow 2012-01-01 archived  2.5
#&gt; 16:    red 2013-01-01  removed  3.5
#&gt; 17:  green 2013-01-01   active  3.0
#&gt; 18:  green 2014-01-01  removed  2.5
#&gt; 19:    red 2011-01-01 archived  3.0
#&gt; 20:    red 2015-01-01     &lt;NA&gt;  3.5
#&gt; 21:  green 2015-01-01     &lt;NA&gt;  7.5
#&gt; 22:  green 2014-01-01     &lt;NA&gt; 14.0
#&gt; 23: yellow 2014-01-01     &lt;NA&gt;  4.5
#&gt; 24:    red 2013-01-01     &lt;NA&gt;  5.5
#&gt; 25:  green 2011-01-01     &lt;NA&gt; 10.5
#&gt; 26:    red 2014-01-01     &lt;NA&gt;  2.5
#&gt; 27: yellow 2015-01-01     &lt;NA&gt;  2.0
#&gt; 28:    red 2012-01-01     &lt;NA&gt;  2.0
#&gt; 29:    red 2011-01-01     &lt;NA&gt;  6.5
#&gt; 30: yellow 2012-01-01     &lt;NA&gt;  2.5
#&gt; 31:  green 2013-01-01     &lt;NA&gt;  3.0
#&gt; 32:    red       &lt;NA&gt;     &lt;NA&gt; 20.0
#&gt; 33:  green       &lt;NA&gt;     &lt;NA&gt; 35.0
#&gt; 34: yellow       &lt;NA&gt;     &lt;NA&gt;  9.0
#&gt; 35:   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt; 64.0
#&gt;      color       year   status   V1</div><div class='input'><span class='fu'>rollup</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>value</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>), <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     grouping  color       year   status   V1
#&gt;  1:        0    red 2015-01-01   active  3.5
#&gt;  2:        0  green 2015-01-01 inactive  5.5
#&gt;  3:        0  green 2014-01-01 archived  3.5
#&gt;  4:        0  green 2015-01-01 archived  2.0
#&gt;  5:        0 yellow 2014-01-01   active  4.5
#&gt;  6:        0    red 2013-01-01 inactive  2.0
#&gt;  7:        0  green 2011-01-01   active  6.0
#&gt;  8:        0    red 2014-01-01 inactive  2.5
#&gt;  9:        0  green 2011-01-01 archived  2.5
#&gt; 10:        0 yellow 2015-01-01   active  2.0
#&gt; 11:        0    red 2012-01-01 archived  2.0
#&gt; 12:        0    red 2011-01-01  removed  3.5
#&gt; 13:        0  green 2014-01-01 inactive  8.0
#&gt; 14:        0  green 2011-01-01  removed  2.0
#&gt; 15:        0 yellow 2012-01-01 archived  2.5
#&gt; 16:        0    red 2013-01-01  removed  3.5
#&gt; 17:        0  green 2013-01-01   active  3.0
#&gt; 18:        0  green 2014-01-01  removed  2.5
#&gt; 19:        0    red 2011-01-01 archived  3.0
#&gt; 20:        1    red 2015-01-01     &lt;NA&gt;  3.5
#&gt; 21:        1  green 2015-01-01     &lt;NA&gt;  7.5
#&gt; 22:        1  green 2014-01-01     &lt;NA&gt; 14.0
#&gt; 23:        1 yellow 2014-01-01     &lt;NA&gt;  4.5
#&gt; 24:        1    red 2013-01-01     &lt;NA&gt;  5.5
#&gt; 25:        1  green 2011-01-01     &lt;NA&gt; 10.5
#&gt; 26:        1    red 2014-01-01     &lt;NA&gt;  2.5
#&gt; 27:        1 yellow 2015-01-01     &lt;NA&gt;  2.0
#&gt; 28:        1    red 2012-01-01     &lt;NA&gt;  2.0
#&gt; 29:        1    red 2011-01-01     &lt;NA&gt;  6.5
#&gt; 30:        1 yellow 2012-01-01     &lt;NA&gt;  2.5
#&gt; 31:        1  green 2013-01-01     &lt;NA&gt;  3.0
#&gt; 32:        3    red       &lt;NA&gt;     &lt;NA&gt; 20.0
#&gt; 33:        3  green       &lt;NA&gt;     &lt;NA&gt; 35.0
#&gt; 34:        3 yellow       &lt;NA&gt;     &lt;NA&gt;  9.0
#&gt; 35:        7   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt; 64.0
#&gt;     grouping  color       year   status   V1</div><div class='input'><span class='fu'>rollup</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>sum</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>), <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>.SDcols</span><span class='kw'>=</span><span class='st'>"value"</span>)</div><div class='output co'>#&gt;     grouping  color       year   status value
#&gt;  1:        0    red 2015-01-01   active   3.5
#&gt;  2:        0  green 2015-01-01 inactive   5.5
#&gt;  3:        0  green 2014-01-01 archived   3.5
#&gt;  4:        0  green 2015-01-01 archived   2.0
#&gt;  5:        0 yellow 2014-01-01   active   4.5
#&gt;  6:        0    red 2013-01-01 inactive   2.0
#&gt;  7:        0  green 2011-01-01   active   6.0
#&gt;  8:        0    red 2014-01-01 inactive   2.5
#&gt;  9:        0  green 2011-01-01 archived   2.5
#&gt; 10:        0 yellow 2015-01-01   active   2.0
#&gt; 11:        0    red 2012-01-01 archived   2.0
#&gt; 12:        0    red 2011-01-01  removed   3.5
#&gt; 13:        0  green 2014-01-01 inactive   8.0
#&gt; 14:        0  green 2011-01-01  removed   2.0
#&gt; 15:        0 yellow 2012-01-01 archived   2.5
#&gt; 16:        0    red 2013-01-01  removed   3.5
#&gt; 17:        0  green 2013-01-01   active   3.0
#&gt; 18:        0  green 2014-01-01  removed   2.5
#&gt; 19:        0    red 2011-01-01 archived   3.0
#&gt; 20:        1    red 2015-01-01     &lt;NA&gt;   3.5
#&gt; 21:        1  green 2015-01-01     &lt;NA&gt;   7.5
#&gt; 22:        1  green 2014-01-01     &lt;NA&gt;  14.0
#&gt; 23:        1 yellow 2014-01-01     &lt;NA&gt;   4.5
#&gt; 24:        1    red 2013-01-01     &lt;NA&gt;   5.5
#&gt; 25:        1  green 2011-01-01     &lt;NA&gt;  10.5
#&gt; 26:        1    red 2014-01-01     &lt;NA&gt;   2.5
#&gt; 27:        1 yellow 2015-01-01     &lt;NA&gt;   2.0
#&gt; 28:        1    red 2012-01-01     &lt;NA&gt;   2.0
#&gt; 29:        1    red 2011-01-01     &lt;NA&gt;   6.5
#&gt; 30:        1 yellow 2012-01-01     &lt;NA&gt;   2.5
#&gt; 31:        1  green 2013-01-01     &lt;NA&gt;   3.0
#&gt; 32:        3    red       &lt;NA&gt;     &lt;NA&gt;  20.0
#&gt; 33:        3  green       &lt;NA&gt;     &lt;NA&gt;  35.0
#&gt; 34:        3 yellow       &lt;NA&gt;     &lt;NA&gt;   9.0
#&gt; 35:        7   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;  64.0
#&gt;     grouping  color       year   status value</div><div class='input'><span class='fu'>rollup</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>count</span><span class='kw'>=</span><span class='no'>.N</span>), <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>sum</span>)), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>), <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     grouping  color       year   status count amount value
#&gt;  1:        0    red 2015-01-01   active     1      4   3.5
#&gt;  2:        0  green 2015-01-01 inactive     2      5   5.5
#&gt;  3:        0  green 2014-01-01 archived     1      3   3.5
#&gt;  4:        0  green 2015-01-01 archived     1      4   2.0
#&gt;  5:        0 yellow 2014-01-01   active     2      5   4.5
#&gt;  6:        0    red 2013-01-01 inactive     1      1   2.0
#&gt;  7:        0  green 2011-01-01   active     2      9   6.0
#&gt;  8:        0    red 2014-01-01 inactive     1      5   2.5
#&gt;  9:        0  green 2011-01-01 archived     1      4   2.5
#&gt; 10:        0 yellow 2015-01-01   active     1      4   2.0
#&gt; 11:        0    red 2012-01-01 archived     1      4   2.0
#&gt; 12:        0    red 2011-01-01  removed     1      1   3.5
#&gt; 13:        0  green 2014-01-01 inactive     3      7   8.0
#&gt; 14:        0  green 2011-01-01  removed     1      4   2.0
#&gt; 15:        0 yellow 2012-01-01 archived     1      1   2.5
#&gt; 16:        0    red 2013-01-01  removed     1      3   3.5
#&gt; 17:        0  green 2013-01-01   active     1      2   3.0
#&gt; 18:        0  green 2014-01-01  removed     1      5   2.5
#&gt; 19:        0    red 2011-01-01 archived     1      1   3.0
#&gt; 20:        1    red 2015-01-01     &lt;NA&gt;     1      4   3.5
#&gt; 21:        1  green 2015-01-01     &lt;NA&gt;     3      9   7.5
#&gt; 22:        1  green 2014-01-01     &lt;NA&gt;     5     15  14.0
#&gt; 23:        1 yellow 2014-01-01     &lt;NA&gt;     2      5   4.5
#&gt; 24:        1    red 2013-01-01     &lt;NA&gt;     2      4   5.5
#&gt; 25:        1  green 2011-01-01     &lt;NA&gt;     4     17  10.5
#&gt; 26:        1    red 2014-01-01     &lt;NA&gt;     1      5   2.5
#&gt; 27:        1 yellow 2015-01-01     &lt;NA&gt;     1      4   2.0
#&gt; 28:        1    red 2012-01-01     &lt;NA&gt;     1      4   2.0
#&gt; 29:        1    red 2011-01-01     &lt;NA&gt;     2      2   6.5
#&gt; 30:        1 yellow 2012-01-01     &lt;NA&gt;     1      1   2.5
#&gt; 31:        1  green 2013-01-01     &lt;NA&gt;     1      2   3.0
#&gt; 32:        3    red       &lt;NA&gt;     &lt;NA&gt;     7     19  20.0
#&gt; 33:        3  green       &lt;NA&gt;     &lt;NA&gt;    13     43  35.0
#&gt; 34:        3 yellow       &lt;NA&gt;     &lt;NA&gt;     4     10   9.0
#&gt; 35:        7   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;    24     72  64.0
#&gt;     grouping  color       year   status count amount value</div><div class='input'>
<span class='co'># cube</span>
<span class='fu'>cube</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>value</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>), <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     grouping  color       year   status   V1
#&gt;  1:        0    red 2015-01-01   active  3.5
#&gt;  2:        0  green 2015-01-01 inactive  5.5
#&gt;  3:        0  green 2014-01-01 archived  3.5
#&gt;  4:        0  green 2015-01-01 archived  2.0
#&gt;  5:        0 yellow 2014-01-01   active  4.5
#&gt;  6:        0    red 2013-01-01 inactive  2.0
#&gt;  7:        0  green 2011-01-01   active  6.0
#&gt;  8:        0    red 2014-01-01 inactive  2.5
#&gt;  9:        0  green 2011-01-01 archived  2.5
#&gt; 10:        0 yellow 2015-01-01   active  2.0
#&gt; 11:        0    red 2012-01-01 archived  2.0
#&gt; 12:        0    red 2011-01-01  removed  3.5
#&gt; 13:        0  green 2014-01-01 inactive  8.0
#&gt; 14:        0  green 2011-01-01  removed  2.0
#&gt; 15:        0 yellow 2012-01-01 archived  2.5
#&gt; 16:        0    red 2013-01-01  removed  3.5
#&gt; 17:        0  green 2013-01-01   active  3.0
#&gt; 18:        0  green 2014-01-01  removed  2.5
#&gt; 19:        0    red 2011-01-01 archived  3.0
#&gt; 20:        1    red 2015-01-01     &lt;NA&gt;  3.5
#&gt; 21:        1  green 2015-01-01     &lt;NA&gt;  7.5
#&gt; 22:        1  green 2014-01-01     &lt;NA&gt; 14.0
#&gt; 23:        1 yellow 2014-01-01     &lt;NA&gt;  4.5
#&gt; 24:        1    red 2013-01-01     &lt;NA&gt;  5.5
#&gt; 25:        1  green 2011-01-01     &lt;NA&gt; 10.5
#&gt; 26:        1    red 2014-01-01     &lt;NA&gt;  2.5
#&gt; 27:        1 yellow 2015-01-01     &lt;NA&gt;  2.0
#&gt; 28:        1    red 2012-01-01     &lt;NA&gt;  2.0
#&gt; 29:        1    red 2011-01-01     &lt;NA&gt;  6.5
#&gt; 30:        1 yellow 2012-01-01     &lt;NA&gt;  2.5
#&gt; 31:        1  green 2013-01-01     &lt;NA&gt;  3.0
#&gt; 32:        2    red       &lt;NA&gt;   active  3.5
#&gt; 33:        2  green       &lt;NA&gt; inactive 13.5
#&gt; 34:        2  green       &lt;NA&gt; archived  8.0
#&gt; 35:        2 yellow       &lt;NA&gt;   active  6.5
#&gt; 36:        2    red       &lt;NA&gt; inactive  4.5
#&gt; 37:        2  green       &lt;NA&gt;   active  9.0
#&gt; 38:        2    red       &lt;NA&gt; archived  5.0
#&gt; 39:        2    red       &lt;NA&gt;  removed  7.0
#&gt; 40:        2  green       &lt;NA&gt;  removed  4.5
#&gt; 41:        2 yellow       &lt;NA&gt; archived  2.5
#&gt; 42:        3    red       &lt;NA&gt;     &lt;NA&gt; 20.0
#&gt; 43:        3  green       &lt;NA&gt;     &lt;NA&gt; 35.0
#&gt; 44:        3 yellow       &lt;NA&gt;     &lt;NA&gt;  9.0
#&gt; 45:        4   &lt;NA&gt; 2015-01-01   active  5.5
#&gt; 46:        4   &lt;NA&gt; 2015-01-01 inactive  5.5
#&gt; 47:        4   &lt;NA&gt; 2014-01-01 archived  3.5
#&gt; 48:        4   &lt;NA&gt; 2015-01-01 archived  2.0
#&gt; 49:        4   &lt;NA&gt; 2014-01-01   active  4.5
#&gt; 50:        4   &lt;NA&gt; 2013-01-01 inactive  2.0
#&gt; 51:        4   &lt;NA&gt; 2011-01-01   active  6.0
#&gt; 52:        4   &lt;NA&gt; 2014-01-01 inactive 10.5
#&gt; 53:        4   &lt;NA&gt; 2011-01-01 archived  5.5
#&gt; 54:        4   &lt;NA&gt; 2012-01-01 archived  4.5
#&gt; 55:        4   &lt;NA&gt; 2011-01-01  removed  5.5
#&gt; 56:        4   &lt;NA&gt; 2013-01-01  removed  3.5
#&gt; 57:        4   &lt;NA&gt; 2013-01-01   active  3.0
#&gt; 58:        4   &lt;NA&gt; 2014-01-01  removed  2.5
#&gt; 59:        5   &lt;NA&gt; 2015-01-01     &lt;NA&gt; 13.0
#&gt; 60:        5   &lt;NA&gt; 2014-01-01     &lt;NA&gt; 21.0
#&gt; 61:        5   &lt;NA&gt; 2013-01-01     &lt;NA&gt;  8.5
#&gt; 62:        5   &lt;NA&gt; 2011-01-01     &lt;NA&gt; 17.0
#&gt; 63:        5   &lt;NA&gt; 2012-01-01     &lt;NA&gt;  4.5
#&gt; 64:        6   &lt;NA&gt;       &lt;NA&gt;   active 19.0
#&gt; 65:        6   &lt;NA&gt;       &lt;NA&gt; inactive 18.0
#&gt; 66:        6   &lt;NA&gt;       &lt;NA&gt; archived 15.5
#&gt; 67:        6   &lt;NA&gt;       &lt;NA&gt;  removed 11.5
#&gt; 68:        7   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt; 64.0
#&gt;     grouping  color       year   status   V1</div><div class='input'><span class='fu'>cube</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>sum</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>), <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>.SDcols</span><span class='kw'>=</span><span class='st'>"value"</span>)</div><div class='output co'>#&gt;     grouping  color       year   status value
#&gt;  1:        0    red 2015-01-01   active   3.5
#&gt;  2:        0  green 2015-01-01 inactive   5.5
#&gt;  3:        0  green 2014-01-01 archived   3.5
#&gt;  4:        0  green 2015-01-01 archived   2.0
#&gt;  5:        0 yellow 2014-01-01   active   4.5
#&gt;  6:        0    red 2013-01-01 inactive   2.0
#&gt;  7:        0  green 2011-01-01   active   6.0
#&gt;  8:        0    red 2014-01-01 inactive   2.5
#&gt;  9:        0  green 2011-01-01 archived   2.5
#&gt; 10:        0 yellow 2015-01-01   active   2.0
#&gt; 11:        0    red 2012-01-01 archived   2.0
#&gt; 12:        0    red 2011-01-01  removed   3.5
#&gt; 13:        0  green 2014-01-01 inactive   8.0
#&gt; 14:        0  green 2011-01-01  removed   2.0
#&gt; 15:        0 yellow 2012-01-01 archived   2.5
#&gt; 16:        0    red 2013-01-01  removed   3.5
#&gt; 17:        0  green 2013-01-01   active   3.0
#&gt; 18:        0  green 2014-01-01  removed   2.5
#&gt; 19:        0    red 2011-01-01 archived   3.0
#&gt; 20:        1    red 2015-01-01     &lt;NA&gt;   3.5
#&gt; 21:        1  green 2015-01-01     &lt;NA&gt;   7.5
#&gt; 22:        1  green 2014-01-01     &lt;NA&gt;  14.0
#&gt; 23:        1 yellow 2014-01-01     &lt;NA&gt;   4.5
#&gt; 24:        1    red 2013-01-01     &lt;NA&gt;   5.5
#&gt; 25:        1  green 2011-01-01     &lt;NA&gt;  10.5
#&gt; 26:        1    red 2014-01-01     &lt;NA&gt;   2.5
#&gt; 27:        1 yellow 2015-01-01     &lt;NA&gt;   2.0
#&gt; 28:        1    red 2012-01-01     &lt;NA&gt;   2.0
#&gt; 29:        1    red 2011-01-01     &lt;NA&gt;   6.5
#&gt; 30:        1 yellow 2012-01-01     &lt;NA&gt;   2.5
#&gt; 31:        1  green 2013-01-01     &lt;NA&gt;   3.0
#&gt; 32:        2    red       &lt;NA&gt;   active   3.5
#&gt; 33:        2  green       &lt;NA&gt; inactive  13.5
#&gt; 34:        2  green       &lt;NA&gt; archived   8.0
#&gt; 35:        2 yellow       &lt;NA&gt;   active   6.5
#&gt; 36:        2    red       &lt;NA&gt; inactive   4.5
#&gt; 37:        2  green       &lt;NA&gt;   active   9.0
#&gt; 38:        2    red       &lt;NA&gt; archived   5.0
#&gt; 39:        2    red       &lt;NA&gt;  removed   7.0
#&gt; 40:        2  green       &lt;NA&gt;  removed   4.5
#&gt; 41:        2 yellow       &lt;NA&gt; archived   2.5
#&gt; 42:        3    red       &lt;NA&gt;     &lt;NA&gt;  20.0
#&gt; 43:        3  green       &lt;NA&gt;     &lt;NA&gt;  35.0
#&gt; 44:        3 yellow       &lt;NA&gt;     &lt;NA&gt;   9.0
#&gt; 45:        4   &lt;NA&gt; 2015-01-01   active   5.5
#&gt; 46:        4   &lt;NA&gt; 2015-01-01 inactive   5.5
#&gt; 47:        4   &lt;NA&gt; 2014-01-01 archived   3.5
#&gt; 48:        4   &lt;NA&gt; 2015-01-01 archived   2.0
#&gt; 49:        4   &lt;NA&gt; 2014-01-01   active   4.5
#&gt; 50:        4   &lt;NA&gt; 2013-01-01 inactive   2.0
#&gt; 51:        4   &lt;NA&gt; 2011-01-01   active   6.0
#&gt; 52:        4   &lt;NA&gt; 2014-01-01 inactive  10.5
#&gt; 53:        4   &lt;NA&gt; 2011-01-01 archived   5.5
#&gt; 54:        4   &lt;NA&gt; 2012-01-01 archived   4.5
#&gt; 55:        4   &lt;NA&gt; 2011-01-01  removed   5.5
#&gt; 56:        4   &lt;NA&gt; 2013-01-01  removed   3.5
#&gt; 57:        4   &lt;NA&gt; 2013-01-01   active   3.0
#&gt; 58:        4   &lt;NA&gt; 2014-01-01  removed   2.5
#&gt; 59:        5   &lt;NA&gt; 2015-01-01     &lt;NA&gt;  13.0
#&gt; 60:        5   &lt;NA&gt; 2014-01-01     &lt;NA&gt;  21.0
#&gt; 61:        5   &lt;NA&gt; 2013-01-01     &lt;NA&gt;   8.5
#&gt; 62:        5   &lt;NA&gt; 2011-01-01     &lt;NA&gt;  17.0
#&gt; 63:        5   &lt;NA&gt; 2012-01-01     &lt;NA&gt;   4.5
#&gt; 64:        6   &lt;NA&gt;       &lt;NA&gt;   active  19.0
#&gt; 65:        6   &lt;NA&gt;       &lt;NA&gt; inactive  18.0
#&gt; 66:        6   &lt;NA&gt;       &lt;NA&gt; archived  15.5
#&gt; 67:        6   &lt;NA&gt;       &lt;NA&gt;  removed  11.5
#&gt; 68:        7   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;  64.0
#&gt;     grouping  color       year   status value</div><div class='input'><span class='fu'>cube</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>count</span><span class='kw'>=</span><span class='no'>.N</span>), <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>sum</span>)), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>), <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     grouping  color       year   status count amount value
#&gt;  1:        0    red 2015-01-01   active     1      4   3.5
#&gt;  2:        0  green 2015-01-01 inactive     2      5   5.5
#&gt;  3:        0  green 2014-01-01 archived     1      3   3.5
#&gt;  4:        0  green 2015-01-01 archived     1      4   2.0
#&gt;  5:        0 yellow 2014-01-01   active     2      5   4.5
#&gt;  6:        0    red 2013-01-01 inactive     1      1   2.0
#&gt;  7:        0  green 2011-01-01   active     2      9   6.0
#&gt;  8:        0    red 2014-01-01 inactive     1      5   2.5
#&gt;  9:        0  green 2011-01-01 archived     1      4   2.5
#&gt; 10:        0 yellow 2015-01-01   active     1      4   2.0
#&gt; 11:        0    red 2012-01-01 archived     1      4   2.0
#&gt; 12:        0    red 2011-01-01  removed     1      1   3.5
#&gt; 13:        0  green 2014-01-01 inactive     3      7   8.0
#&gt; 14:        0  green 2011-01-01  removed     1      4   2.0
#&gt; 15:        0 yellow 2012-01-01 archived     1      1   2.5
#&gt; 16:        0    red 2013-01-01  removed     1      3   3.5
#&gt; 17:        0  green 2013-01-01   active     1      2   3.0
#&gt; 18:        0  green 2014-01-01  removed     1      5   2.5
#&gt; 19:        0    red 2011-01-01 archived     1      1   3.0
#&gt; 20:        1    red 2015-01-01     &lt;NA&gt;     1      4   3.5
#&gt; 21:        1  green 2015-01-01     &lt;NA&gt;     3      9   7.5
#&gt; 22:        1  green 2014-01-01     &lt;NA&gt;     5     15  14.0
#&gt; 23:        1 yellow 2014-01-01     &lt;NA&gt;     2      5   4.5
#&gt; 24:        1    red 2013-01-01     &lt;NA&gt;     2      4   5.5
#&gt; 25:        1  green 2011-01-01     &lt;NA&gt;     4     17  10.5
#&gt; 26:        1    red 2014-01-01     &lt;NA&gt;     1      5   2.5
#&gt; 27:        1 yellow 2015-01-01     &lt;NA&gt;     1      4   2.0
#&gt; 28:        1    red 2012-01-01     &lt;NA&gt;     1      4   2.0
#&gt; 29:        1    red 2011-01-01     &lt;NA&gt;     2      2   6.5
#&gt; 30:        1 yellow 2012-01-01     &lt;NA&gt;     1      1   2.5
#&gt; 31:        1  green 2013-01-01     &lt;NA&gt;     1      2   3.0
#&gt; 32:        2    red       &lt;NA&gt;   active     1      4   3.5
#&gt; 33:        2  green       &lt;NA&gt; inactive     5     12  13.5
#&gt; 34:        2  green       &lt;NA&gt; archived     3     11   8.0
#&gt; 35:        2 yellow       &lt;NA&gt;   active     3      9   6.5
#&gt; 36:        2    red       &lt;NA&gt; inactive     2      6   4.5
#&gt; 37:        2  green       &lt;NA&gt;   active     3     11   9.0
#&gt; 38:        2    red       &lt;NA&gt; archived     2      5   5.0
#&gt; 39:        2    red       &lt;NA&gt;  removed     2      4   7.0
#&gt; 40:        2  green       &lt;NA&gt;  removed     2      9   4.5
#&gt; 41:        2 yellow       &lt;NA&gt; archived     1      1   2.5
#&gt; 42:        3    red       &lt;NA&gt;     &lt;NA&gt;     7     19  20.0
#&gt; 43:        3  green       &lt;NA&gt;     &lt;NA&gt;    13     43  35.0
#&gt; 44:        3 yellow       &lt;NA&gt;     &lt;NA&gt;     4     10   9.0
#&gt; 45:        4   &lt;NA&gt; 2015-01-01   active     2      8   5.5
#&gt; 46:        4   &lt;NA&gt; 2015-01-01 inactive     2      5   5.5
#&gt; 47:        4   &lt;NA&gt; 2014-01-01 archived     1      3   3.5
#&gt; 48:        4   &lt;NA&gt; 2015-01-01 archived     1      4   2.0
#&gt; 49:        4   &lt;NA&gt; 2014-01-01   active     2      5   4.5
#&gt; 50:        4   &lt;NA&gt; 2013-01-01 inactive     1      1   2.0
#&gt; 51:        4   &lt;NA&gt; 2011-01-01   active     2      9   6.0
#&gt; 52:        4   &lt;NA&gt; 2014-01-01 inactive     4     12  10.5
#&gt; 53:        4   &lt;NA&gt; 2011-01-01 archived     2      5   5.5
#&gt; 54:        4   &lt;NA&gt; 2012-01-01 archived     2      5   4.5
#&gt; 55:        4   &lt;NA&gt; 2011-01-01  removed     2      5   5.5
#&gt; 56:        4   &lt;NA&gt; 2013-01-01  removed     1      3   3.5
#&gt; 57:        4   &lt;NA&gt; 2013-01-01   active     1      2   3.0
#&gt; 58:        4   &lt;NA&gt; 2014-01-01  removed     1      5   2.5
#&gt; 59:        5   &lt;NA&gt; 2015-01-01     &lt;NA&gt;     5     17  13.0
#&gt; 60:        5   &lt;NA&gt; 2014-01-01     &lt;NA&gt;     8     25  21.0
#&gt; 61:        5   &lt;NA&gt; 2013-01-01     &lt;NA&gt;     3      6   8.5
#&gt; 62:        5   &lt;NA&gt; 2011-01-01     &lt;NA&gt;     6     19  17.0
#&gt; 63:        5   &lt;NA&gt; 2012-01-01     &lt;NA&gt;     2      5   4.5
#&gt; 64:        6   &lt;NA&gt;       &lt;NA&gt;   active     7     24  19.0
#&gt; 65:        6   &lt;NA&gt;       &lt;NA&gt; inactive     7     18  18.0
#&gt; 66:        6   &lt;NA&gt;       &lt;NA&gt; archived     6     17  15.5
#&gt; 67:        6   &lt;NA&gt;       &lt;NA&gt;  removed     4     13  11.5
#&gt; 68:        7   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;    24     72  64.0
#&gt;     grouping  color       year   status count amount value</div><div class='input'>
<span class='co'># groupingsets</span>
<span class='fu'>groupingsets</span>(<span class='no'>DT</span>, <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>count</span><span class='kw'>=</span><span class='no'>.N</span>), <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>sum</span>)), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"color"</span>,<span class='st'>"year"</span>,<span class='st'>"status"</span>),
             <span class='kw'>sets</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='st'>"color"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"year"</span>,<span class='st'>"status"</span>), <span class='fu'><a href='https://rdrr.io/r/base/character.html'>character</a></span>()), <span class='kw'>id</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     grouping  color       year   status count amount value
#&gt;  1:        3    red       &lt;NA&gt;     &lt;NA&gt;     7     19  20.0
#&gt;  2:        3  green       &lt;NA&gt;     &lt;NA&gt;    13     43  35.0
#&gt;  3:        3 yellow       &lt;NA&gt;     &lt;NA&gt;     4     10   9.0
#&gt;  4:        4   &lt;NA&gt; 2015-01-01   active     2      8   5.5
#&gt;  5:        4   &lt;NA&gt; 2015-01-01 inactive     2      5   5.5
#&gt;  6:        4   &lt;NA&gt; 2014-01-01 archived     1      3   3.5
#&gt;  7:        4   &lt;NA&gt; 2015-01-01 archived     1      4   2.0
#&gt;  8:        4   &lt;NA&gt; 2014-01-01   active     2      5   4.5
#&gt;  9:        4   &lt;NA&gt; 2013-01-01 inactive     1      1   2.0
#&gt; 10:        4   &lt;NA&gt; 2011-01-01   active     2      9   6.0
#&gt; 11:        4   &lt;NA&gt; 2014-01-01 inactive     4     12  10.5
#&gt; 12:        4   &lt;NA&gt; 2011-01-01 archived     2      5   5.5
#&gt; 13:        4   &lt;NA&gt; 2012-01-01 archived     2      5   4.5
#&gt; 14:        4   &lt;NA&gt; 2011-01-01  removed     2      5   5.5
#&gt; 15:        4   &lt;NA&gt; 2013-01-01  removed     1      3   3.5
#&gt; 16:        4   &lt;NA&gt; 2013-01-01   active     1      2   3.0
#&gt; 17:        4   &lt;NA&gt; 2014-01-01  removed     1      5   2.5
#&gt; 18:        7   &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;    24     72  64.0</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matt Dowle, Arun Srinivasan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


