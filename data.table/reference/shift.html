<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fast lead/lag for vectors and lists — shift • data.table</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fast lead/lag for vectors and lists — shift" />
<meta property="og:description" content="lead or lag vectors, lists, data.frames or data.tables implemented in C for speed.
bit64::integer64 is also supported." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">data.table</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.12.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/datatable-benchmarking.html">Benchmarking data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-faq.html">Frequently Asked Questions about data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-importing.html">Importing data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-intro.html">Introduction to data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-keys-fast-subset.html">Keys and fast binary search based subset</a>
    </li>
    <li>
      <a href="../articles/datatable-reference-semantics.html">Reference semantics</a>
    </li>
    <li>
      <a href="../articles/datatable-reshape.html">Efficient reshaping using data.tables</a>
    </li>
    <li>
      <a href="../articles/datatable-sd-usage.html">Using .SD for Data Analysis</a>
    </li>
    <li>
      <a href="../articles/datatable-secondary-indices-and-auto-indexing.html">Secondary indices and auto indexing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Rdatatable/data.table">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast lead/lag for vectors and lists</h1>
    
    <div class="hidden name"><code>shift.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>lead</code> or <code>lag</code> vectors, lists, data.frames or data.tables implemented in C for speed.</p>
<p><code>bit64::integer64</code> is also supported.</p>
    </div>

    <pre class="usage"><span class='fu'>shift</span>(<span class='no'>x</span>, <span class='kw'>n</span><span class='kw'>=</span><span class='fl'>1L</span>, <span class='kw'>fill</span><span class='kw'>=</span><span class='fl'>NA</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"lag"</span>, <span class='st'>"lead"</span>, <span class='st'>"shift"</span>), <span class='kw'>give.names</span><span class='kw'>=</span><span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A vector, list, data.frame or data.table.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>integer vector denoting the offset by which to lead or lag the input. To create multiple lead/lag vectors, provide multiple values to <code>n</code>; negative values of <code>n</code> will "flip" the value of <code>type</code>, i.e., <code>n=-1</code> and <code>type='lead'</code> is the same as <code>n=1</code> and <code>type='lag'</code>.</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>Value to use for padding when the window goes beyond the input length.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>default is <code>"lag"</code> (look "backwards"). The other possible values <code>"lead"</code> (look "forwards") and <code>"shift"</code> (behave same as <code>"lag"</code> except given names).</p></td>
    </tr>
    <tr>
      <th>give.names</th>
      <td><p>default is <code>FALSE</code> which returns an unnamed list. When <code>TRUE</code>, names are automatically generated corresponding to <code>type</code> and <code>n</code>. If answer is an atomic vector, then the argument is ignored.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>shift</code> accepts vectors, lists, data.frames or data.tables. It always returns a list except when the input is a <code>vector</code> and <code>length(n) == 1</code> in which case a <code>vector</code> is returned, for convenience. This is so that it can be used conveniently within data.table's syntax. For example, <code>DT[, (cols) := shift(.SD, 1L), by=id]</code> would lag every column of <code>.SD</code> by 1 for each group and <code>DT[, newcol := colA + shift(colB)]</code> would assign the sum of two <em>vectors</em> to <code>newcol</code>.</p>
<p>Argument <code>n</code> allows multiple values. For example, <code>DT[, (cols) := shift(.SD, 1:2), by=id]</code> would lag every column of <code>.SD</code> by <code>1</code> and <code>2</code> for each group. If <code>.SD</code> contained four columns, the first two elements of the list would correspond to <code>lag=1</code> and <code>lag=2</code> for the first column of <code>.SD</code>, the next two for second column of <code>.SD</code> and so on. Please see examples for more.</p>
<p><code>shift</code> is designed mainly for use in data.tables along with <code>:=</code> or <code>set</code>. Therefore, it returns an unnamed list by default as assigning names for each group over and over can be quite time consuming with many groups. It may be useful to set names automatically in other cases, which can be done by setting <code>give.names</code> to <code>TRUE</code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing the lead/lag of input <code>x</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='data.table.html'>data.table</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># on vectors, returns a vector as long as length(n) == 1, #1127</span>
<span class='no'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>
<span class='co'># lag with n=1 and pad with NA (returns vector)</span>
<span class='fu'>shift</span>(<span class='no'>x</span>, <span class='kw'>n</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>fill</span><span class='kw'>=</span><span class='fl'>NA</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"lag"</span>)</div><div class='output co'>#&gt; [1] NA  1  2  3  4</div><div class='input'><span class='co'># lag with n=1 and 2, and pad with 0 (returns list)</span>
<span class='fu'>shift</span>(<span class='no'>x</span>, <span class='kw'>n</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>fill</span><span class='kw'>=</span><span class='fl'>0</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"lag"</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 0 1 2 3 4
#&gt; 
#&gt; [[2]]
#&gt; [1] 0 0 1 2 3
#&gt; </div><div class='input'><span class='co'># getting a window by using positive and negative n:</span>
<span class='fu'>shift</span>(<span class='no'>x</span>, <span class='kw'>n</span> <span class='kw'>=</span> -<span class='fl'>1</span>:<span class='fl'>1</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1]  2  3  4  5 NA
#&gt; 
#&gt; [[2]]
#&gt; [1] 1 2 3 4 5
#&gt; 
#&gt; [[3]]
#&gt; [1] NA  1  2  3  4
#&gt; </div><div class='input'><span class='fu'>shift</span>(<span class='no'>x</span>, <span class='kw'>n</span> <span class='kw'>=</span> -<span class='fl'>1</span>:<span class='fl'>1</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"shift"</span>, <span class='kw'>give.names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; $`x_shift_-1`
#&gt; [1]  2  3  4  5 NA
#&gt; 
#&gt; $x_shift_0
#&gt; [1] 1 2 3 4 5
#&gt; 
#&gt; $x_shift_1
#&gt; [1] NA  1  2  3  4
#&gt; </div><div class='input'>
<span class='co'># on data.tables</span>
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>year</span><span class='kw'>=</span><span class='fl'>2010</span>:<span class='fl'>2014</span>, <span class='kw'>v1</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span>(<span class='fl'>5</span>), <span class='kw'>v2</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>v3</span><span class='kw'>=</span><span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])
<span class='co'># lag columns 'v1,v2,v3' DT by 1 and fill with 0</span>
<span class='no'>cols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"v1"</span>,<span class='st'>"v2"</span>,<span class='st'>"v3"</span>)
<span class='no'>anscols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='st'>"lead"</span>, <span class='no'>cols</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"_"</span>)
<span class='no'>DT</span>[, (<span class='no'>anscols</span>) <span class='kw'>:=</span> <span class='fu'>shift</span>(<span class='no'>.SD</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='st'>"lead"</span>), <span class='kw'>.SDcols</span><span class='kw'>=</span><span class='no'>cols</span>]</div><div class='output co'>#&gt;    year        v1 v2 v3   lead_v1 lead_v2 lead_v3
#&gt; 1: 2010 0.5409554  1  a 0.4272740       2       b
#&gt; 2: 2011 0.4272740  2  b 0.5762478       3       c
#&gt; 3: 2012 0.5762478  3  c 0.3396133       4       d
#&gt; 4: 2013 0.3396133  4  d 0.8779946       5       e
#&gt; 5: 2014 0.8779946  5  e 0.0000000       0       0</div><div class='input'>
<span class='co'># return a new data.table instead of updating</span>
<span class='co'># with names automatically set</span>
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>year</span><span class='kw'>=</span><span class='fl'>2010</span>:<span class='fl'>2014</span>, <span class='kw'>v1</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span>(<span class='fl'>5</span>), <span class='kw'>v2</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>v3</span><span class='kw'>=</span><span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])
<span class='no'>DT</span>[, <span class='fu'>shift</span>(<span class='no'>.SD</span>, <span class='fl'>1</span>:<span class='fl'>2</span>, <span class='fl'>NA</span>, <span class='st'>"lead"</span>, <span class='fl'>TRUE</span>), <span class='kw'>.SDcols</span><span class='kw'>=</span><span class='fl'>2</span>:<span class='fl'>4</span>]</div><div class='output co'>#&gt;    v1_lead_1 v1_lead_2 v2_lead_1 v2_lead_2 v3_lead_1 v3_lead_2
#&gt; 1: 0.4284258 0.4895551         2         3         b         c
#&gt; 2: 0.4895551 0.6322988         3         4         c         d
#&gt; 3: 0.6322988 0.1949402         4         5         d         e
#&gt; 4: 0.1949402        NA         5        NA         e      &lt;NA&gt;
#&gt; 5:        NA        NA        NA        NA      &lt;NA&gt;      &lt;NA&gt;</div><div class='input'>
<span class='co'># lag/lead in the right order</span>
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>year</span><span class='kw'>=</span><span class='fl'>2010</span>:<span class='fl'>2014</span>, <span class='kw'>v1</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span>(<span class='fl'>5</span>), <span class='kw'>v2</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>v3</span><span class='kw'>=</span><span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])
<span class='no'>DT</span> <span class='kw'>=</span> <span class='no'>DT</span>[<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>DT</span>))]
<span class='co'># add lag=1 for columns 'v1,v2,v3' in increasing order of 'year'</span>
<span class='no'>cols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"v1"</span>,<span class='st'>"v2"</span>,<span class='st'>"v3"</span>)
<span class='no'>anscols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='st'>"lag"</span>, <span class='no'>cols</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"_"</span>)
<span class='no'>DT</span>[<span class='fu'><a href='setorder.html'>order</a></span>(<span class='no'>year</span>), (<span class='no'>cols</span>) <span class='kw'>:=</span> <span class='fu'>shift</span>(<span class='no'>.SD</span>, <span class='fl'>1</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"lag"</span>), <span class='kw'>.SDcols</span><span class='kw'>=</span><span class='no'>cols</span>]</div><div class='output co'>#&gt;    year        v1 v2   v3
#&gt; 1: 2010        NA NA &lt;NA&gt;
#&gt; 2: 2013 0.4586280  3    c
#&gt; 3: 2011 0.5328050  1    a
#&gt; 4: 2014 0.9299597  4    d
#&gt; 5: 2012 0.5661358  2    b</div><div class='input'><span class='no'>DT</span>[<span class='fu'><a href='setorder.html'>order</a></span>(<span class='no'>year</span>)]</div><div class='output co'>#&gt;    year        v1 v2   v3
#&gt; 1: 2010        NA NA &lt;NA&gt;
#&gt; 2: 2011 0.5328050  1    a
#&gt; 3: 2012 0.5661358  2    b
#&gt; 4: 2013 0.4586280  3    c
#&gt; 5: 2014 0.9299597  4    d</div><div class='input'>
<span class='co'># while grouping</span>
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>year</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>2010</span>:<span class='fl'>2011</span>, <span class='kw'>each</span><span class='kw'>=</span><span class='fl'>3</span>), <span class='kw'>v1</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>6</span>)
<span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"lag1"</span>, <span class='st'>"lag2"</span>) <span class='kw'>:=</span> <span class='fu'>shift</span>(<span class='no'>.SD</span>, <span class='fl'>1</span>:<span class='fl'>2</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>year</span>]</div><div class='output co'>#&gt;    year v1 lag1 lag2
#&gt; 1: 2010  1   NA   NA
#&gt; 2: 2010  2    1   NA
#&gt; 3: 2010  3    2    1
#&gt; 4: 2011  4   NA   NA
#&gt; 5: 2011  5    4   NA
#&gt; 6: 2011  6    5    4</div><div class='input'>
<span class='co'># on lists</span>
<span class='no'>ll</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fl'>1</span>:<span class='fl'>3</span>, <span class='no'>letters</span>[<span class='fl'>4</span>:<span class='fl'>1</span>], <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span>(<span class='fl'>2</span>))
<span class='fu'>shift</span>(<span class='no'>ll</span>, <span class='fl'>1</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"lead"</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1]  2  3 NA
#&gt; 
#&gt; [[2]]
#&gt; [1] "c" "b" "a" NA 
#&gt; 
#&gt; [[3]]
#&gt; [1] 0.2298821        NA
#&gt; </div><div class='input'><span class='fu'>shift</span>(<span class='no'>ll</span>, <span class='fl'>1</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"lead"</span>, <span class='kw'>give.names</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; $V1_lead_1
#&gt; [1]  2  3 NA
#&gt; 
#&gt; $V2_lead_1
#&gt; [1] "c" "b" "a" NA 
#&gt; 
#&gt; $V3_lead_1
#&gt; [1] 0.2298821        NA
#&gt; </div><div class='input'><span class='fu'>shift</span>(<span class='no'>ll</span>, <span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"lead"</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1]  2  3 NA
#&gt; 
#&gt; [[2]]
#&gt; [1]  3 NA NA
#&gt; 
#&gt; [[3]]
#&gt; [1] "c" "b" "a" NA 
#&gt; 
#&gt; [[4]]
#&gt; [1] "b" "a" NA  NA 
#&gt; 
#&gt; [[5]]
#&gt; [1] 0.2298821        NA
#&gt; 
#&gt; [[6]]
#&gt; [1] NA NA
#&gt; </div><div class='input'>
<span class='co'># fill using first or last by group</span>
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>x</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>6</span>, <span class='kw'>g</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>each</span><span class='kw'>=</span><span class='fl'>3</span>))
<span class='no'>DT</span>[ , <span class='fu'>shift</span>(<span class='no'>x</span>, <span class='kw'>fill</span><span class='kw'>=</span><span class='no'>x</span>[<span class='fl'>1L</span>]), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>g</span>]</div><div class='output co'>#&gt;    g V1
#&gt; 1: 1  1
#&gt; 2: 1  1
#&gt; 3: 1  2
#&gt; 4: 2  4
#&gt; 5: 2  4
#&gt; 6: 2  5</div><div class='input'><span class='no'>DT</span>[ , <span class='fu'>shift</span>(<span class='no'>x</span>, <span class='kw'>fill</span><span class='kw'>=</span><span class='no'>x</span>[<span class='no'>.N</span>], <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"lead"</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>g</span>]</div><div class='output co'>#&gt;    g V1
#&gt; 1: 1  2
#&gt; 2: 1  3
#&gt; 3: 1  3
#&gt; 4: 2  5
#&gt; 5: 2  6
#&gt; 6: 2  6</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matt Dowle, Arun Srinivasan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


