<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Merge two data.tables — merge • data.table</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Merge two data.tables — merge" />
<meta property="og:description" content="Fast merge of two data.tables. The data.table method behaves
very similarly to that of data.frames except that, by default, it attempts to merge

at first based on the shared key columns, and if there are none,
then based on key columns of the first argument x, and if there
  are none,
then based on the common columns between the two data.tables.


Set the by, or by.x and by.y arguments explicitly to override this default." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">data.table</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.12.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/datatable-benchmarking.html">Benchmarking data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-faq.html">Frequently Asked Questions about data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-importing.html">Importing data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-intro.html">Introduction to data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-keys-fast-subset.html">Keys and fast binary search based subset</a>
    </li>
    <li>
      <a href="../articles/datatable-reference-semantics.html">Reference semantics</a>
    </li>
    <li>
      <a href="../articles/datatable-reshape.html">Efficient reshaping using data.tables</a>
    </li>
    <li>
      <a href="../articles/datatable-sd-usage.html">Using .SD for Data Analysis</a>
    </li>
    <li>
      <a href="../articles/datatable-secondary-indices-and-auto-indexing.html">Secondary indices and auto indexing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Rdatatable/data.table">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merge two data.tables</h1>
    
    <div class="hidden name"><code>merge.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fast merge of two <code>data.table</code>s. The <code>data.table</code> method behaves
very similarly to that of <code>data.frame</code>s except that, by default, it attempts to merge</p>
<ul>
<li><p>at first based on the shared key columns, and if there are none,</p></li>
<li><p>then based on key columns of the first argument <code>x</code>, and if there
  are none,</p></li>
<li><p>then based on the common columns between the two <code>data.table</code>s.</p></li>
</ul>

<p>Set the <code>by</code>, or <code>by.x</code> and <code>by.y</code> arguments explicitly to override this default.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for data.table</span>
<span class='fu'>merge</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>by.x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>by.y</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
<span class='kw'>all.x</span> <span class='kw'>=</span> <span class='no'>all</span>, <span class='kw'>all.y</span> <span class='kw'>=</span> <span class='no'>all</span>, <span class='kw'>sort</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>suffixes</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>".x"</span>, <span class='st'>".y"</span>), <span class='kw'>no.dups</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
<span class='kw'>allow.cartesian</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"datatable.allow.cartesian"</span>),  <span class='co'># default FALSE</span>
<span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x, y</th>
      <td><p><code>data table</code>s. <code>y</code> is coerced to a <code>data.table</code> if
it isn't one already.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>A vector of shared column names in <code>x</code> and <code>y</code> to merge on.
This defaults to the shared key columns between the two tables.
If <code>y</code> has no key columns, this defaults to the key of <code>x</code>.</p></td>
    </tr>
    <tr>
      <th>by.x, by.y</th>
      <td><p>Vectors of column names in <code>x</code> and <code>y</code> to merge on.</p></td>
    </tr>
    <tr>
      <th>all</th>
      <td><p>logical; <code>all = TRUE</code> is shorthand to save setting both
<code>all.x = TRUE</code> and <code>all.y = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>all.x</th>
      <td><p>logical; if <code>TRUE</code>, then extra rows will be added to the
output, one for each row in <code>x</code> that has no matching row in <code>y</code>.
These rows will have 'NA's in those columns that are usually filled with values
from <code>y</code>.  The default is <code>FALSE</code>, so that only rows with data from both
<code>x</code> and <code>y</code> are included in the output.</p></td>
    </tr>
    <tr>
      <th>all.y</th>
      <td><p>logical; analogous to <code>all.x</code> above.</p></td>
    </tr>
    <tr>
      <th>sort</th>
      <td><p>logical. If <code>TRUE</code> (default), the merged <code>data.table</code> is
sorted by setting the key to the <code>by / by.x</code> columns. If <code>FALSE</code>, the
result is not sorted.</p></td>
    </tr>
    <tr>
      <th>suffixes</th>
      <td><p>A <code><a href='https://rdrr.io/r/base/character.html'>character(2)</a></code> specifying the suffixes to be used for
making non-<code>by</code> column names unique. The suffix behaviour works in a similar
fashion as the <code><a href='https://rdrr.io/r/base/merge.html'>merge.data.frame</a></code> method does.</p></td>
    </tr>
    <tr>
      <th>no.dups</th>
      <td><p>logical indicating that <code>suffixes</code> are also appended to
non-<code>by.y</code> column names in <code>y</code> when they have the same column name
as any <code>by.x</code>.</p></td>
    </tr>
    <tr>
      <th>allow.cartesian</th>
      <td><p>See <code>allow.cartesian</code> in <code><a href='data.table.html'>[.data.table</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Not used at this time.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>merge</code> is a generic function in base R. It dispatches to either the
<code>merge.data.frame</code> method or <code>merge.data.table</code> method depending on
the class of its first argument. Note that, unlike <code>SQL</code>, <code>NA</code> is
matched against <code>NA</code> (and <code>NaN</code> against <code>NaN</code>) while merging.</p>
<p>In versions <code>&lt;= v1.9.4</code>, if the specified columns in <code>by</code> were not the
key (or head of the key) of <code>x</code> or <code>y</code>, then a <code><a href='copy.html'>copy</a></code> is
first re-keyed prior to performing the merge. This was less performant as well as memory
inefficient. The concept of secondary keys (implemented in <code>v1.9.4</code>) was
used to overcome this limitation from <code>v1.9.6</code>+. No deep copies are made
any more, thereby improving performance and memory efficiency. Also, there is better
control for providing the columns to merge on with the help of the newly implemented
<code>by.x</code> and <code>by.y</code> arguments.</p>
<p>For a more <code>data.table</code>-centric way of merging two <code>data.table</code>s, see
<code><a href='data.table.html'>[.data.table</a></code>; e.g., <code>x[y, ...]</code>. See FAQ 1.11 for a detailed
comparison of <code>merge</code> and <code>x[y, ...]</code>.</p>
<p>If any column names provided to <code>by.x</code> also occur in <code><a href='https://rdrr.io/r/base/names.html'>names(y)</a></code> but not in <code>by.y</code>,
then this <code>data.table</code> method will add the <code>suffixes</code> to those column names. As of
R v3.4.3, the <code>data.frame</code> method will not (leading to duplicate column names in the result) but a patch has
been proposed (see r-devel thread <a href='http://r.789695.n4.nabble.com/Duplicate-column-names-created-by-base-merge-when-by-x-has-the-same-name-as-a-column-in-y-td4748345.html'>here</a>)
which is looking likely to be accepted for a future version of R.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A new <code>data.table</code> based on the merged <code>data table</code>s, and sorted by the
columns set (or inferred for) the <code>by</code> argument if argument <code>sort</code> is
set to <code>TRUE</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='data.table.html'>data.table</a></code>, <code><a href='as.data.table.html'>as.data.table</a></code>, <code><a href='data.table.html'>[.data.table</a></code>,
<code><a href='https://rdrr.io/r/base/merge.html'>merge.data.frame</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>(<span class='no'>dt1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>A</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>10</span>], <span class='kw'>X</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"A"</span>))</div><div class='output co'>#&gt;     A  X
#&gt;  1: a  1
#&gt;  2: b  2
#&gt;  3: c  3
#&gt;  4: d  4
#&gt;  5: e  5
#&gt;  6: f  6
#&gt;  7: g  7
#&gt;  8: h  8
#&gt;  9: i  9
#&gt; 10: j 10</div><div class='input'>(<span class='no'>dt2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>A</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>5</span>:<span class='fl'>14</span>], <span class='kw'>Y</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"A"</span>))</div><div class='output co'>#&gt;     A  Y
#&gt;  1: e  1
#&gt;  2: f  2
#&gt;  3: g  3
#&gt;  4: h  4
#&gt;  5: i  5
#&gt;  6: j  6
#&gt;  7: k  7
#&gt;  8: l  8
#&gt;  9: m  9
#&gt; 10: n 10</div><div class='input'><span class='fu'>merge</span>(<span class='no'>dt1</span>, <span class='no'>dt2</span>)</div><div class='output co'>#&gt;    A  X Y
#&gt; 1: e  5 1
#&gt; 2: f  6 2
#&gt; 3: g  7 3
#&gt; 4: h  8 4
#&gt; 5: i  9 5
#&gt; 6: j 10 6</div><div class='input'><span class='fu'>merge</span>(<span class='no'>dt1</span>, <span class='no'>dt2</span>, <span class='kw'>all</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     A  X  Y
#&gt;  1: a  1 NA
#&gt;  2: b  2 NA
#&gt;  3: c  3 NA
#&gt;  4: d  4 NA
#&gt;  5: e  5  1
#&gt;  6: f  6  2
#&gt;  7: g  7  3
#&gt;  8: h  8  4
#&gt;  9: i  9  5
#&gt; 10: j 10  6
#&gt; 11: k NA  7
#&gt; 12: l NA  8
#&gt; 13: m NA  9
#&gt; 14: n NA 10</div><div class='input'>
(<span class='no'>dt1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>A</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>3</span>, <span class='fl'>2</span>)], <span class='kw'>X</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>6</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"A"</span>))</div><div class='output co'>#&gt;    A X
#&gt; 1: a 1
#&gt; 2: a 4
#&gt; 3: b 2
#&gt; 4: b 5
#&gt; 5: c 3
#&gt; 6: c 6</div><div class='input'>(<span class='no'>dt2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>A</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>2</span>:<span class='fl'>4</span>, <span class='fl'>2</span>)], <span class='kw'>Y</span> <span class='kw'>=</span> <span class='fl'>6</span>:<span class='fl'>1</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"A"</span>))</div><div class='output co'>#&gt;    A Y
#&gt; 1: b 6
#&gt; 2: b 3
#&gt; 3: c 5
#&gt; 4: c 2
#&gt; 5: d 4
#&gt; 6: d 1</div><div class='input'><span class='fu'>merge</span>(<span class='no'>dt1</span>, <span class='no'>dt2</span>, <span class='kw'>allow.cartesian</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    A X Y
#&gt; 1: b 2 6
#&gt; 2: b 2 3
#&gt; 3: b 5 6
#&gt; 4: b 5 3
#&gt; 5: c 3 5
#&gt; 6: c 3 2
#&gt; 7: c 6 5
#&gt; 8: c 6 2</div><div class='input'>
(<span class='no'>dt1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>A</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1L</span>, <span class='fl'>5</span>), <span class='fl'>2L</span>), <span class='kw'>B</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>3</span>, <span class='fl'>2</span>)], <span class='kw'>X</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>6</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"A,B"</span>))</div><div class='output co'>#&gt;    A B X
#&gt; 1: 1 a 1
#&gt; 2: 1 a 4
#&gt; 3: 1 b 2
#&gt; 4: 1 b 5
#&gt; 5: 1 c 3
#&gt; 6: 2 c 6</div><div class='input'>(<span class='no'>dt2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>A</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1L</span>, <span class='fl'>5</span>), <span class='fl'>2L</span>), <span class='kw'>B</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>2</span>:<span class='fl'>4</span>, <span class='fl'>2</span>)], <span class='kw'>Y</span> <span class='kw'>=</span> <span class='fl'>6</span>:<span class='fl'>1</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"A,B"</span>))</div><div class='output co'>#&gt;    A B Y
#&gt; 1: 1 b 6
#&gt; 2: 1 b 3
#&gt; 3: 1 c 5
#&gt; 4: 1 c 2
#&gt; 5: 1 d 4
#&gt; 6: 2 d 1</div><div class='input'><span class='fu'>merge</span>(<span class='no'>dt1</span>, <span class='no'>dt2</span>)</div><div class='output co'>#&gt;    A B X Y
#&gt; 1: 1 b 2 6
#&gt; 2: 1 b 2 3
#&gt; 3: 1 b 5 6
#&gt; 4: 1 b 5 3
#&gt; 5: 1 c 3 5
#&gt; 6: 1 c 3 2</div><div class='input'><span class='fu'>merge</span>(<span class='no'>dt1</span>, <span class='no'>dt2</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='st'>"B"</span>, <span class='kw'>allow.cartesian</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    B A.x X A.y Y
#&gt; 1: b   1 2   1 6
#&gt; 2: b   1 2   1 3
#&gt; 3: b   1 5   1 6
#&gt; 4: b   1 5   1 3
#&gt; 5: c   1 3   1 5
#&gt; 6: c   1 3   1 2
#&gt; 7: c   2 6   1 5
#&gt; 8: c   2 6   1 2</div><div class='input'>
<span class='co'># test it more:</span>
<span class='no'>d1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>2</span>,<span class='kw'>each</span><span class='kw'>=</span><span class='fl'>3</span>), <span class='kw'>b</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>6</span>, <span class='kw'>key</span><span class='kw'>=</span><span class='st'>"a,b"</span>)
<span class='no'>d2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fl'>0</span>:<span class='fl'>1</span>, <span class='kw'>bb</span><span class='kw'>=</span><span class='fl'>10</span>:<span class='fl'>11</span>, <span class='kw'>key</span><span class='kw'>=</span><span class='st'>"a"</span>)
<span class='no'>d3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fl'>0</span>:<span class='fl'>1</span>, <span class='kw'>key</span><span class='kw'>=</span><span class='st'>"a"</span>)
<span class='no'>d4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fl'>0</span>:<span class='fl'>1</span>, <span class='kw'>b</span><span class='kw'>=</span><span class='fl'>0</span>:<span class='fl'>1</span>, <span class='kw'>key</span><span class='kw'>=</span><span class='st'>"a,b"</span>)

<span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d2</span>)</div><div class='output co'>#&gt;    a b bb
#&gt; 1: 1 1 11
#&gt; 2: 1 2 11
#&gt; 3: 1 3 11</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d2</span>, <span class='no'>d1</span>)</div><div class='output co'>#&gt;    a bb b
#&gt; 1: 1 11 1
#&gt; 2: 1 11 2
#&gt; 3: 1 11 3</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d2</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a  b bb
#&gt; 1: 0 NA 10
#&gt; 2: 1  1 11
#&gt; 3: 1  2 11
#&gt; 4: 1  3 11
#&gt; 5: 2  4 NA
#&gt; 6: 2  5 NA
#&gt; 7: 2  6 NA</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d2</span>, <span class='no'>d1</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a bb  b
#&gt; 1: 0 10 NA
#&gt; 2: 1 11  1
#&gt; 3: 1 11  2
#&gt; 4: 1 11  3
#&gt; 5: 2 NA  4
#&gt; 6: 2 NA  5
#&gt; 7: 2 NA  6</div><div class='input'>
<span class='fu'>merge</span>(<span class='no'>d3</span>, <span class='no'>d1</span>)</div><div class='output co'>#&gt;    a b
#&gt; 1: 1 1
#&gt; 2: 1 2
#&gt; 3: 1 3</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d3</span>)</div><div class='output co'>#&gt;    a b
#&gt; 1: 1 1
#&gt; 2: 1 2
#&gt; 3: 1 3</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d3</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a  b
#&gt; 1: 0 NA
#&gt; 2: 1  1
#&gt; 3: 1  2
#&gt; 4: 1  3
#&gt; 5: 2  4
#&gt; 6: 2  5
#&gt; 7: 2  6</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d3</span>, <span class='no'>d1</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a  b
#&gt; 1: 0 NA
#&gt; 2: 1  1
#&gt; 3: 1  2
#&gt; 4: 1  3
#&gt; 5: 2  4
#&gt; 6: 2  5
#&gt; 7: 2  6</div><div class='input'>
<span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d4</span>)</div><div class='output co'>#&gt;    a b
#&gt; 1: 1 1</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d4</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='st'>"a"</span>, <span class='kw'>suffixes</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>".d1"</span>, <span class='st'>".d4"</span>))</div><div class='output co'>#&gt;    a b.d1 b.d4
#&gt; 1: 1    1    1
#&gt; 2: 1    2    1
#&gt; 3: 1    3    1</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d4</span>, <span class='no'>d1</span>)</div><div class='output co'>#&gt;    a b
#&gt; 1: 1 1</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d4</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a b
#&gt; 1: 0 0
#&gt; 2: 1 1
#&gt; 3: 1 2
#&gt; 4: 1 3
#&gt; 5: 2 4
#&gt; 6: 2 5
#&gt; 7: 2 6</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d4</span>, <span class='no'>d1</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a b
#&gt; 1: 0 0
#&gt; 2: 1 1
#&gt; 3: 1 2
#&gt; 4: 1 3
#&gt; 5: 2 4
#&gt; 6: 2 5
#&gt; 7: 2 6</div><div class='input'>
<span class='co'># new feature, no need to set keys anymore</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>1L</span>)
<span class='no'>d1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>3</span>,<span class='kw'>each</span><span class='kw'>=</span><span class='fl'>2</span>)), <span class='kw'>z</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>6</span>)
<span class='no'>d2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fl'>2</span>:<span class='fl'>0</span>, <span class='kw'>z</span><span class='kw'>=</span><span class='fl'>10</span>:<span class='fl'>12</span>)
<span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d2</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='st'>"a"</span>)</div><div class='output co'>#&gt;    a z.x z.y
#&gt; 1: 1   1  11
#&gt; 2: 1   5  11
#&gt; 3: 2   2  10
#&gt; 4: 2   3  10</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d2</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='st'>"a"</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a z.x z.y
#&gt; 1: 0  NA  12
#&gt; 2: 1   1  11
#&gt; 3: 1   5  11
#&gt; 4: 2   2  10
#&gt; 5: 2   3  10
#&gt; 6: 3   4  NA
#&gt; 7: 3   6  NA</div><div class='input'>
<span class='co'># new feature, using by.x and by.y arguments</span>
<span class='fu'><a href='setattr.html'>setnames</a></span>(<span class='no'>d2</span>, <span class='st'>"a"</span>, <span class='st'>"b"</span>)
<span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d2</span>, <span class='kw'>by.x</span><span class='kw'>=</span><span class='st'>"a"</span>, <span class='kw'>by.y</span><span class='kw'>=</span><span class='st'>"b"</span>)</div><div class='output co'>#&gt;    a z.x z.y
#&gt; 1: 1   1  11
#&gt; 2: 1   5  11
#&gt; 3: 2   2  10
#&gt; 4: 2   3  10</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d1</span>, <span class='no'>d2</span>, <span class='kw'>by.x</span><span class='kw'>=</span><span class='st'>"a"</span>, <span class='kw'>by.y</span><span class='kw'>=</span><span class='st'>"b"</span>, <span class='kw'>all</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    a z.x z.y
#&gt; 1: 0  NA  12
#&gt; 2: 1   1  11
#&gt; 3: 1   5  11
#&gt; 4: 2   2  10
#&gt; 5: 2   3  10
#&gt; 6: 3   4  NA
#&gt; 7: 3   6  NA</div><div class='input'><span class='fu'>merge</span>(<span class='no'>d2</span>, <span class='no'>d1</span>, <span class='kw'>by.x</span><span class='kw'>=</span><span class='st'>"b"</span>, <span class='kw'>by.y</span><span class='kw'>=</span><span class='st'>"a"</span>)</div><div class='output co'>#&gt;    b z.x z.y
#&gt; 1: 1  11   1
#&gt; 2: 1  11   5
#&gt; 3: 2  10   2
#&gt; 4: 2  10   3</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matt Dowle, Arun Srinivasan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


