<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fast row reordering of a data.table by reference — setorder • data.table</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fast row reordering of a data.table by reference — setorder" />
<meta property="og:description" content="In data.table parlance, all set* functions change their input
by reference. That is, no copy is made at all, other than temporary
working memory, which is as large as one column. The only other
data.table operator that modifies input by reference is :=.
Check out the See Also section below for other set* function
data.table provides.
setorder (and setorderv) reorders the rows of a data.table
based on the columns (and column order) provided. It reorders the table
by reference and is therefore very memory efficient.
Note that queries like x[order(.)] are optimised internally to use data.table's fast order.
Also note that data.table always reorders in &quot;C-locale&quot; (see Details). To sort by session locale, use x[base::order(.)].
bit64::integer64 type is also supported for reordering rows of a data.table." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">data.table</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.12.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/datatable-benchmarking.html">Benchmarking data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-faq.html">Frequently Asked Questions about data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-importing.html">Importing data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-intro.html">Introduction to data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-keys-fast-subset.html">Keys and fast binary search based subset</a>
    </li>
    <li>
      <a href="../articles/datatable-reference-semantics.html">Reference semantics</a>
    </li>
    <li>
      <a href="../articles/datatable-reshape.html">Efficient reshaping using data.tables</a>
    </li>
    <li>
      <a href="../articles/datatable-sd-usage.html">Using .SD for Data Analysis</a>
    </li>
    <li>
      <a href="../articles/datatable-secondary-indices-and-auto-indexing.html">Secondary indices and auto indexing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Rdatatable/data.table">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast row reordering of a data.table by reference</h1>
    
    <div class="hidden name"><code>setorder.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>In <code>data.table</code> parlance, all <code>set*</code> functions change their input
<em>by reference</em>. That is, no copy is made at all, other than temporary
working memory, which is as large as one column. The only other
<code>data.table</code> operator that modifies input by reference is <code><a href='assign.html'>:=</a></code>.
Check out the <code>See Also</code> section below for other <code>set*</code> function
<code>data.table</code> provides.</p>
<p><code>setorder</code> (and <code>setorderv</code>) reorders the rows of a <code>data.table</code>
based on the columns (and column order) provided. It reorders the table
<em>by reference</em> and is therefore very memory efficient.</p>
<p>Note that queries like <code>x[order(.)]</code> are optimised internally to use <code>data.table</code>'s fast order.</p>
<p>Also note that <code>data.table</code> always reorders in "C-locale" (see Details). To sort by session locale, use <code>x[base::order(.)]</code>.</p>
<p><code>bit64::integer64</code> type is also supported for reordering rows of a <code>data.table</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>setorder</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>na.last</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
<span class='fu'>setorderv</span>(<span class='no'>x</span>, <span class='kw'>cols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>x</span>), <span class='kw'>order</span><span class='kw'>=</span><span class='fl'>1L</span>, <span class='kw'>na.last</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
<span class='co'># optimised to use data.table's internal fast order</span>
<span class='co'># x[order(., na.last=TRUE)]</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A <code>data.table</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>The columns to sort by. Do not quote column names. If <code>...</code>
is missing (ex: <code>setorder(x)</code>), <code>x</code> is rearranged based on all
columns in ascending order by default. To sort by a column in descending order
prefix the symbol <code><a href='https://rdrr.io/r/base/Arithmetic.html'>"-"</a></code> which means "descending" (<em>not</em> "negative", in this context), i.e., <code>setorder(x, a, -b, c)</code>. The <code>-b</code> works
when <code>b</code> is of type <code>character</code> as well.</p></td>
    </tr>
    <tr>
      <th>cols</th>
      <td><p>A character vector of column names of <code>x</code> by which to order. By default, sorts over all columns; <code>cols = NULL</code> will return <code>x</code> untouched. Do not add <code><a href='https://rdrr.io/r/base/Arithmetic.html'>"-"</a></code> here. Use <code>order</code> argument instead.</p></td>
    </tr>
    <tr>
      <th>order</th>
      <td><p>An integer vector with only possible values of <code>1</code> and
<code>-1</code>, corresponding to ascending and descending order. The length of
<code>order</code> must be either <code>1</code> or equal to that of <code>cols</code>. If
<code>length(order) == 1</code>, it is recycled to <code><a href='https://rdrr.io/r/base/length.html'>length(cols)</a></code>.</p></td>
    </tr>
    <tr>
      <th>na.last</th>
      <td><p><code>logical</code>. If <code>TRUE</code>, missing values in the data are placed last; if <code>FALSE</code>, they are placed first; if <code>NA</code> they are removed.
<code>na.last=NA</code> is valid only for <code>x[order(., na.last)]</code> and its
default is <code>TRUE</code>. <code>setorder</code> and <code>setorderv</code> only accept
<code>TRUE</code>/<code>FALSE</code> with default <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>data.table</code> implements its own fast radix-based ordering. See the references for some exposition on the concept of radix sort.</p>
<p><code>setorder</code> accepts unquoted column names (with names preceded with a
<code>-</code> sign for descending order) and reorders <code>data.table</code> rows
<em>by reference</em>, for e.g., <code>setorder(x, a, -b, c)</code>. We emphasize that
this means "descending" and not "negative" because the implementation simply
reverses the sort order, as opposed to sorting the opposite of the input
(which would be inefficient).</p>
<p>Note that <code>-b</code> also works with columns of type <code>character</code> unlike
<code><a href='https://rdrr.io/r/base/order.html'>order</a></code>, which requires <code>-xtfrm(y)</code> instead (which is slow).
<code>setorderv</code> in turn accepts a character vector of column names and an
integer vector of column order separately.</p>
<p>Note that <code><a href='setkey.html'>setkey</a></code> still requires and will always sort only in
ascending order, and is different from <code>setorder</code> in that it additionally
sets the <code>sorted</code> attribute.</p>
<p><code>na.last</code> argument, by default, is <code>FALSE</code> for <code>setorder</code> and
<code>setorderv</code> to be consistent with <code>data.table</code>'s <code>setkey</code> and
is <code>TRUE</code> for <code>x[order(.)]</code> to be consistent with <code><a href='https://rdrr.io/r/base/order.html'>base::order</a></code>.
Only <code>x[order(.)]</code> can have <code>na.last = NA</code> as it is a subset operation
as opposed to <code>setorder</code> or <code>setorderv</code> which reorders the data.table
by reference.</p>
<p><code>data.table</code> always reorders in "C-locale".
As a consequence, the ordering may be different to that obtained by <code><a href='https://rdrr.io/r/base/order.html'>base::order</a></code>.
In English locales, for example, sorting is case-sensitive in C-locale.
Thus, sorting <code><a href='https://rdrr.io/r/base/c.html'>c("c", "a", "B")</a></code> returns <code><a href='https://rdrr.io/r/base/c.html'>c("B", "a", "c")</a></code> in <code>data.table</code>
 but <code><a href='https://rdrr.io/r/base/c.html'>c("a", "B", "c")</a></code> in <code><a href='https://rdrr.io/r/base/order.html'>base::order</a></code>. Note this makes no difference in most cases
of data; both return identical results on ids where only upper-case or lower-case letters are present (<code>"AB123" &lt; "AC234"</code>
is true in both), or on country names and other proper nouns which are consistently capitalized.
For example, neither <code>"America" &lt; "Brazil"</code> nor
<code>"america" &lt; "brazil"</code> are affected since the first letter is consistently
capitalized.</p>
<p>Using C-locale makes the behaviour of sorting in <code>data.table</code> more consistent across sessions and locales.
The behaviour of <code><a href='https://rdrr.io/r/base/order.html'>base::order</a></code> depends on assumptions about the locale of the R session.
In English locales, <code>"america" &lt; "BRAZIL"</code> is true by default
but false if you either type <code><a href='https://rdrr.io/r/base/locales.html'>Sys.setlocale(locale="C")</a></code> or the R session has been started in a C locale
for you -- which can happen on servers/services since the locale comes from the environment the R session
was started in. By contrast, <code>"america" &lt; "BRAZIL"</code> is always <code>FALSE</code> in <code>data.table</code> regardless of the way your R session was started.</p>
<p>If <code>setorder</code> results in reordering of the rows of a keyed <code>data.table</code>,
then its key will be set to <code>NULL</code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The input is modified by reference, and returned (invisibly) so it can be used
in compound statements; e.g., <code>setorder(DT,a,-b)[, cumsum(c), by=list(a,b)]</code>.
If you require a copy, take a copy first (using <code>DT2 = copy(DT)</code>). See
<code><a href='copy.html'>copy</a></code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='https://en.wikipedia.org/wiki/Radix_sort'>https://en.wikipedia.org/wiki/Radix_sort</a><br />
  <a href='https://en.wikipedia.org/wiki/Counting_sort'>https://en.wikipedia.org/wiki/Counting_sort</a><br />
  <a href='http://stereopsis.com/radix.html'>http://stereopsis.com/radix.html</a><br />
  <a href='https://codercorner.com/RadixSortRevisited.htm'>https://codercorner.com/RadixSortRevisited.htm</a><br />
  <a href='https://medium.com/basecs/getting-to-the-root-of-sorting-with-radix-sort-f8e9240d4224'>https://medium.com/basecs/getting-to-the-root-of-sorting-with-radix-sort-f8e9240d4224</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='setkey.html'>setkey</a></code>, <code><a href='setcolorder.html'>setcolorder</a></code>, <code><a href='setattr.html'>setattr</a></code>,
  <code><a href='setattr.html'>setnames</a></code>, <code><a href='assign.html'>set</a></code>, <code><a href='assign.html'>:=</a></code>, <code><a href='setDT.html'>setDT</a></code>,
  <code><a href='setDF.html'>setDF</a></code>, <code><a href='copy.html'>copy</a></code>, <code><a href='setNumericRounding.html'>setNumericRounding</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>45L</span>)
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'><a href='data.table.html'>data.table</a></span>(<span class='kw'>A</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>3</span>, <span class='fl'>10</span>, <span class='fl'>TRUE</span>),
         <span class='kw'>B</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='fl'>10</span>, <span class='fl'>TRUE</span>), <span class='kw'>C</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>10</span>))

<span class='co'># setorder</span>
<span class='fu'>setorder</span>(<span class='no'>DT</span>, <span class='no'>A</span>, -<span class='no'>B</span>)

<span class='co'># same as above, but using setorderv</span>
<span class='fu'>setorderv</span>(<span class='no'>DT</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"A"</span>, <span class='st'>"B"</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, -<span class='fl'>1</span>))</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matt Dowle, Arun Srinivasan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


