<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Enhanced data.frame — data.table-package • data.table</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Enhanced data.frame — data.table-package" />
<meta property="og:description" content="data.table inherits from data.frame. It offers fast and memory efficient: file reader and writer, aggregations, updates, equi, non-equi, rolling, range and interval joins, in a short and flexible syntax, for faster development.
It is inspired by A[B] syntax in R where A is a matrix and B is a 2-column matrix. Since a data.table is a data.frame, it is compatible with R functions and packages that accept only data.frames.
Type vignette(package=&quot;data.table&quot;) to get started. The Introduction to data.table vignette introduces data.table's x[i, j, by] syntax and is a good place to start. If you have read the vignettes and the help page below, please read the data.table support guide.
Please check the homepage for up to the minute live NEWS.
Tip: one of the quickest ways to learn the features is to type example(data.table) and study the output at the prompt." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">data.table</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.12.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-archive fa-lg"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../boot/index.html">boot</a>
    </li>
    <li>
      <a href="../../broom/index.html">broom</a>
    </li>
    <li>
      <a href="../../caret/index.html">caret</a>
    </li>
    <li>
      <a href="../../cluster/index.html">cluster</a>
    </li>
    <li>
      <a href="../../coefplot/index.html">coefplot</a>
    </li>
    <li>
      <a href="../../data.table/index.html">data.table</a>
    </li>
    <li>
      <a href="../../devtools/index.html">devtools</a>
    </li>
    <li>
      <a href="../../dplyr/index.html">dplyr</a>
    </li>
    <li>
      <a href="../../e1071/index.html">e1071</a>
    </li>
    <li>
      <a href="../../forcats/index.html">forcats</a>
    </li>
    <li>
      <a href="../../gbm/index.html">gbm</a>
    </li>
    <li>
      <a href="../../ggplot2/index.html">ggplot2</a>
    </li>
    <li>
      <a href="../../glmnet/index.html">glmnet</a>
    </li>
    <li>
      <a href="../../gridExtra/index.html">gridExtra</a>
    </li>
    <li>
      <a href="../../ISLR/index.html">ISLR</a>
    </li>
    <li>
      <a href="../../MASS/index.html">MASS</a>
    </li>
    <li>
      <a href="../../pdp/index.html">pdp</a>
    </li>
    <li>
      <a href="../../pls/index.html">pls</a>
    </li>
    <li>
      <a href="../../plyr/index.html">plyr</a>
    </li>
    <li>
      <a href="../../pROC/index.html">pROC</a>
    </li>
    <li>
      <a href="../../purrr/index.html">purrr</a>
    </li>
    <li>
      <a href="../../randomForest/index.html">randomForest</a>
    </li>
    <li>
      <a href="../../readr/index.html">readr</a>
    </li>
    <li>
      <a href="../../rpart/index.html">rpart</a>
    </li>
    <li>
      <a href="../../rpart.plot/index.html">rpart.plot</a>
    </li>
    <li>
      <a href="../../stringr/index.html">stringr</a>
    </li>
    <li>
      <a href="../../tibble/index.html">tibble</a>
    </li>
    <li>
      <a href="../../tidyr/index.html">tidyr</a>
    </li>
    <li>
      <a href="../../xgboost/index.html">xgboost</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/datatable-benchmarking.html">Benchmarking data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-faq.html">Frequently Asked Questions about data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-importing.html">Importing data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-intro.html">Introduction to data.table</a>
    </li>
    <li>
      <a href="../articles/datatable-keys-fast-subset.html">Keys and fast binary search based subset</a>
    </li>
    <li>
      <a href="../articles/datatable-reference-semantics.html">Reference semantics</a>
    </li>
    <li>
      <a href="../articles/datatable-reshape.html">Efficient reshaping using data.tables</a>
    </li>
    <li>
      <a href="../articles/datatable-sd-usage.html">Using .SD for Data Analysis</a>
    </li>
    <li>
      <a href="../articles/datatable-secondary-indices-and-auto-indexing.html">Secondary indices and auto indexing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Rdatatable/data.table">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Enhanced data.frame</h1>
    
    <div class="hidden name"><code>data.table.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>data.table</code> <em>inherits</em> from <code>data.frame</code>. It offers fast and memory efficient: file reader and writer, aggregations, updates, equi, non-equi, rolling, range and interval joins, in a short and flexible syntax, for faster development.</p>
<p>It is inspired by <code>A[B]</code> syntax in <span style="R">R</span> where <code>A</code> is a matrix and <code>B</code> is a 2-column matrix. Since a <code>data.table</code> <em>is</em> a <code>data.frame</code>, it is compatible with <span style="R">R</span> functions and packages that accept <em>only</em> <code>data.frame</code>s.</p>
<p>Type <code>vignette(package="data.table")</code> to get started. The <a href='../doc/datatable-intro.html'>Introduction to data.table</a> vignette introduces <code>data.table</code>'s <code>x[i, j, by]</code> syntax and is a good place to start. If you have read the vignettes and the help page below, please read the <a href='https://github.com/Rdatatable/data.table/wiki/Support'>data.table support guide</a>.</p>
<p>Please check the <a href='https://github.com/Rdatatable/data.table/wiki'>homepage</a> for up to the minute live NEWS.</p>
<p>Tip: one of the <em>quickest</em> ways to learn the features is to type <code><a href='https://rdrr.io/r/utils/example.html'>example(data.table)</a></code> and study the output at the prompt.</p>
    </div>

    <pre class="usage">data.table(..., keep.rownames=FALSE, check.names=FALSE, key=NULL, stringsAsFactors=FALSE)

# S3 method for data.table
[(x, i, j, by, keyby, with = TRUE,
  nomatch = getOption("datatable.nomatch", NA),
  mult = "all",
  roll = FALSE,
  rollends = if (roll=="nearest") c(TRUE,TRUE)
             else if (roll>=0) c(FALSE,TRUE)
             else c(TRUE,FALSE),
  which = FALSE,
  .SDcols,
  verbose = getOption("datatable.verbose"),                   # default: FALSE
  allow.cartesian = getOption("datatable.allow.cartesian"),   # default: FALSE
  drop = NULL, on = NULL)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Just as <code>...</code> in <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code>. Usual recycling rules are applied to vectors of different lengths to create a list of equal length vectors.</p></td>
    </tr>
    <tr>
      <th>keep.rownames</th>
      <td><p>If <code>...</code> is a <code>matrix</code> or <code>data.frame</code>, <code>TRUE</code> will retain the rownames of that object in a column named <code>rn</code>.</p></td>
    </tr>
    <tr>
      <th>check.names</th>
      <td><p>Just as <code>check.names</code> in <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code>.</p></td>
    </tr>
    <tr>
      <th>key</th>
      <td><p>Character vector of one or more column names which is passed to <code><a href='setkey.html'>setkey</a></code>. It may be a single comma separated string such as <code>key="x,y,z"</code>, or a vector of names such as <code>key=c("x","y","z")</code>.</p></td>
    </tr>
    <tr>
      <th>stringsAsFactors</th>
      <td><p>Logical (default is <code>FALSE</code>). Convert all <code>character</code> columns to <code>factor</code>s?</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A <code>data.table</code>.</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>Integer, logical or character vector, single column numeric <code>matrix</code>, expression of column names, <code>list</code>, <code>data.frame</code> or <code>data.table</code>.</p>
<p><code>integer</code> and <code>logical</code> vectors work the same way they do in <code><a href='https://rdrr.io/r/base/Extract.data.frame.html'>[.data.frame</a></code> except logical <code>NA</code>s are treated as FALSE.</p>
<p><code>expression</code> is evaluated within the frame of the <code>data.table</code> (i.e. it sees column names as if they are variables) and can evaluate to any of the other types.</p>
<p><code>character</code>, <code>list</code> and <code>data.frame</code> input to <code>i</code> is converted into a <code>data.table</code> internally using <code><a href='as.data.table.html'>as.data.table</a></code>.</p>
<p>If <code>i</code> is a <code>data.table</code>, the columns in <code>i</code> to be matched against <code>x</code> can be specified using one of these ways:</p>
<p></p><ul>
<li><p><code>on</code> argument (see below). It allows for both <code>equi-</code> and the newly implemented <code>non-equi</code> joins.</p></li>
<li><p>If not, <code>x</code> <em>must be keyed</em>. Key can be set using <code><a href='setkey.html'>setkey</a></code>. If <code>i</code> is also keyed, then first <em>key</em> column of <code>i</code> is matched against first <em>key</em> column of <code>x</code>, second against second, etc..            If <code>i</code> is not keyed, then first column of <code>i</code> is matched against first <em>key</em> column of <code>x</code>, second column of <code>i</code> against second <em>key</em> column of <code>x</code>, etc...            This is summarised in code as <code><a href='https://rdrr.io/r/base/Extremes.html'>min(length(key(x)), if (haskey(i)) length(key(i)) else ncol(i))</a></code>.</p></li>
</ul><p>Using <code>on=</code> is recommended (even during keyed joins) as it helps understand the code better and also allows for <em>non-equi</em> joins.</p>
<p>When the binary operator <code>==</code> alone is used, an <em>equi</em> join is performed. In SQL terms, <code>x[i]</code> then performs a <em>right join</em> by default. <code>i</code> prefixed with <code>!</code> signals a <em>not-join</em> or <em>not-select</em>.</p>
<p>Support for <em>non-equi</em> join was recently implemented, which allows for other binary operators <code>&gt;=, &gt;, &lt;= and &lt;</code>.</p>
<p>See <a href='../doc/datatable-keys-fast-subset.html'><code><a href='../articles/datatable-keys-fast-subset.html'>vignette("datatable-keys-fast-subset")</a></code></a> and <a href='../doc/datatable-secondary-indices-and-auto-indexing.html'><code><a href='../articles/datatable-secondary-indices-and-auto-indexing.html'>vignette("datatable-secondary-indices-and-auto-indexing")</a></code></a>.</p>
<p><em>Advanced:</em> When <code>i</code> is a single variable name, it is not considered an expression of column names and is instead evaluated in calling scope.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>When <code>with=TRUE</code> (default), <code>j</code> is evaluated within the frame of the data.table; i.e., it sees column names as if they are variables. This allows to not just <em>select</em> columns in <code>j</code>, but also <code>compute</code> on them e.g., <code>x[, a]</code> and <code>x[, sum(a)]</code> returns <code>x$a</code> and <code><a href='https://rdrr.io/r/base/sum.html'>sum(x$a)</a></code> as a vector respectively. <code>x[, .(a, b)]</code> and <code>x[, .(sa=sum(a), sb=sum(b))]</code> returns a two column data.table each, the first simply <em>selecting</em> columns <code>a, b</code> and the second <em>computing</em> their sums.</p>
<p>As long as <code>j</code> returns a <code>list</code>, each element of the list becomes a column in the resulting <code>data.table</code>. When the output of <code>j</code> is not a <code>list</code>, the output is returned as-is (e.g. <code>x[ , a]</code> returns the column vector <code>a</code>), unless <code>by</code> is used, in which case it is implicitly wrapped in <code>list</code> for convenience (e.g. <code>x[ , sum(a), by=b]</code> will create a column named <code>V1</code> with value <code><a href='https://rdrr.io/r/base/sum.html'>sum(a)</a></code> for each group).</p>
<p>The expression `.()` is a <em>shorthand</em> alias to <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code>; they both mean the same. (An exception is made for the use of <code>.()</code> within a call to <code><a href='https://rdrr.io/r/base/bquote.html'>bquote</a></code>, where <code>.()</code> is left unchanged.)</p>
<p>When <code>j</code> is a vector of column names or positions to select (as in <code>data.frame</code>). There is no need to use <code>with=FALSE</code> anymore. Note that <code>with=FALSE</code> is still necessary when using a logical vector with length <code><a href='https://rdrr.io/r/base/nrow.html'>ncol(x)</a></code> to include/exclude columns. Note: if a logical vector with length <code>k &lt; ncol(x)</code> is passed, it will be filled to length <code><a href='https://rdrr.io/r/base/nrow.html'>ncol(x)</a></code> with <code>FALSE</code>, which is different from <code>data.frame</code>, where the vector is recycled.</p>
<p><em>Advanced:</em> <code>j</code> also allows the use of special <em>read-only</em> symbols: <code><a href='special-symbols.html'>.SD</a></code>, <code><a href='special-symbols.html'>.N</a></code>, <code><a href='special-symbols.html'>.I</a></code>, <code><a href='special-symbols.html'>.GRP</a></code>, <code><a href='special-symbols.html'>.BY</a></code>.</p>
<p><em>Advanced:</em> When <code>i</code> is a <code>data.table</code>, the columns of <code>i</code> can be referred to in <code>j</code> by using the prefix <code>i.</code>, e.g., <code>X[Y, .(val, i.val)]</code>. Here <code>val</code> refers to <code>X</code>'s column and <code>i.val</code> <code>Y</code>'s.</p>
<p><em>Advanced:</em> Columns of <code>x</code> can now be referred to using the prefix <code>x.</code> and is particularly useful during joining to refer to <code>x</code>'s <em>join</em> columns as they are otherwise masked by <code>i</code>'s. For example, <code>X[Y, .(x.a-i.a, b), on="a"]</code>.</p>
<p>See <a href='../doc/datatable-intro.html'><code><a href='../articles/datatable-intro.html'>vignette("datatable-intro")</a></code></a> and <code><a href='https://rdrr.io/r/utils/example.html'>example(data.table)</a></code>.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>Column names are seen as if they are variables (as in <code>j</code> when <code>with=TRUE</code>). The <code>data.table</code> is then grouped by the <code>by</code> and <code>j</code> is evaluated within each group. The order of the rows within each group is preserved, as is the order of the groups. <code>by</code> accepts:</p>
<p></p><ul>
<li><p>A single unquoted column name: e.g., <code>DT[, .(sa=sum(a)), by=x]</code></p></li>
<li><p>a <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code> of expressions of column names: e.g., <code>DT[, .(sa=sum(a)), by=.(x=x&gt;0, y)]</code></p></li>
<li><p>a single character string containing comma separated column names (where spaces are significant since column names may contain spaces even at the start or end): e.g., <code>DT[, sum(a), by="x,y,z"]</code></p></li>
<li><p>a character vector of column names: e.g., <code>DT[, sum(a), by=c("x", "y")]</code></p></li>
<li><p>or of the form <code>startcol:endcol</code>: e.g., <code>DT[, sum(a), by=x:z]</code></p></li>
</ul>

<p><em>Advanced:</em> When <code>i</code> is a <code>list</code> (or <code>data.frame</code> or <code>data.table</code>), <code>DT[i, j, by=.EACHI]</code> evaluates <code>j</code> for the groups in `DT` that each row in <code>i</code> joins to. That is, you can join (in <code>i</code>) and aggregate (in <code>j</code>) simultaneously. We call this <em>grouping by each i</em>. See <a href='http://stackoverflow.com/a/27004566/559784'>this StackOverflow answer</a> for a more detailed explanation until we <a href='https://github.com/Rdatatable/data.table/issues/944'>roll out vignettes</a>.</p>
<p><em>Advanced:</em> In the <code>X[Y, j]</code> form of grouping, the <code>j</code> expression sees variables in <code>X</code> first, then <code>Y</code>. We call this <em>join inherited scope</em>. If the variable is not in <code>X</code> or <code>Y</code> then the calling frame is searched, its calling frame, and so on in the usual way up to and including the global environment.</p></td>
    </tr>
    <tr>
      <th>keyby</th>
      <td><p>Same as <code>by</code>, but with an additional <code><a href='setkey.html'>setkey()</a></code> run on the <code>by</code> columns of the result, for convenience. It is common practice to use `keyby=` routinely when you wish the result to be sorted.</p></td>
    </tr>
    <tr>
      <th>with</th>
      <td><p>By default <code>with=TRUE</code> and <code>j</code> is evaluated within the frame of <code>x</code>; column names can be used as variables. In case of overlapping variables names inside dataset and in parent scope you can use double dot prefix <code>..cols</code> to explicitly refer to `<code>cols</code> variable parent scope and not from your dataset.</p>
<p>When <code>j</code> is a character vector of column names, a numeric vector of column positions to select or of the form <code>startcol:endcol</code>, and the value returned is always a <code>data.table</code>. <code>with=FALSE</code> is not necessary anymore to select columns dynamically. Note that <code>x[, cols]</code> is equivalent to <code>x[, ..cols]</code> and to <code>x[, cols, with=FALSE]</code> and to <code>x[, .SD, .SDcols=cols]</code>.</p></td>
    </tr>
    <tr>
      <th>nomatch</th>
      <td><p>When a row in <code>i</code> has no match to <code>x</code>, <code>nomatch=NA</code> (default) means <code>NA</code> is returned. <code>NULL</code> (or <code>0</code> for backward compatibility) means no rows will be returned for that row of <code>i</code>. Use <code><a href='https://rdrr.io/r/base/options.html'>options(datatable.nomatch=NULL)</a></code> to change the default value (used when <code>nomatch</code> is not supplied).</p></td>
    </tr>
    <tr>
      <th>mult</th>
      <td><p>When <code>i</code> is a <code>list</code> (or <code>data.frame</code> or <code>data.table</code>) and <em>multiple</em> rows in <code>x</code> match to the row in <code>i</code>, <code>mult</code> controls which are returned: <code>"all"</code> (default), <code>"first"</code> or <code>"last"</code>.</p></td>
    </tr>
    <tr>
      <th>roll</th>
      <td><p>When <code>i</code> is a <code>data.table</code> and its row matches to all but the last <code>x</code> join column, and its value in the last <code>i</code> join column falls in a gap (including after the last observation in <code>x</code> for that group), then:</p>
<p></p><ul>
<li><p><code>+Inf</code> (or <code>TRUE</code>) rolls the <em>prevailing</em> value in <code>x</code> forward. It is also known as last observation carried forward (LOCF).</p></li>
<li><p><code>-Inf</code> rolls backwards instead; i.e., next observation carried backward (NOCB).</p></li>
<li><p>finite positive or negative number limits how far values are carried forward or backward.</p></li>
<li><p>"nearest" rolls the nearest value instead.</p></li>
</ul><p>Rolling joins apply to the last join column, generally a date but can be any variable. It is particularly fast using a modified binary search.</p>
<p>A common idiom is to select a contemporaneous regular time series (<code>dts</code>) across a set of identifiers (<code>ids</code>):  <code>DT[CJ(ids,dts),roll=TRUE]</code> where <code>DT</code> has a 2-column key (id,date) and <code><a href='J.html'>CJ</a></code> stands for <em>cross join</em>.</p></td>
    </tr>
    <tr>
      <th>rollends</th>
      <td><p>A logical vector length 2 (a single logical is recycled) indicating whether values falling before the first value or after the last value for a group should be rolled as well.</p><ul>
<li><p>If <code>rollends[2]=TRUE</code>, it will roll the last value forward. <code>TRUE</code> by default for LOCF and <code>FALSE</code> for NOCB rolls.</p></li>
<li><p>If <code>rollends[1]=TRUE</code>, it will roll the first value backward. <code>TRUE</code> by default for NOCB and <code>FALSE</code> for LOCF rolls.</p></li>
</ul><p>When <code>roll</code> is a finite number, that limit is also applied when rolling the ends.</p></td>
    </tr>
    <tr>
      <th>which</th>
      <td><p><code>TRUE</code> returns the row numbers of <code>x</code> that <code>i</code> matches to. If <code>NA</code>, returns the row numbers of <code>i</code> that have no match in <code>x</code>. By default <code>FALSE</code> and the rows in <code>x</code> that match are returned.</p></td>
    </tr>
    <tr>
      <th>.SDcols</th>
      <td><p>Specifies the columns of <code>x</code> to be included in the special symbol <code><a href='special-symbols.html'>.SD</a></code> which stands for <code>Subset of data.table</code>. May be character column names or numeric positions. This is useful for speed when applying a function through a subset of (possible very many) columns; e.g., <code>DT[, lapply(.SD, sum), by="x,y", .SDcols=301:350]</code>.</p>
<p>For convenient interactive use, the form <code>startcol:endcol</code> is also allowed (as in <code>by</code>), e.g., <code>DT[, lapply(.SD, sum), by=x:y, .SDcols=a:f]</code>.</p>
<p>Inversion (column dropping instead of keeping) can be accomplished be prepending the argument with <code>!</code> or <code>-</code> (there's no difference between these), e.g. <code>.SDcols = !c('x', 'y')</code>.</p>
<p>Finally, you can filter columns to include in <code>.SD</code> according to regular expressions via <code>.SDcols=patterns(regex1, regex2, ...)</code>. The included columns will be the <em>intersection</em> of the columns identified by each pattern; pattern unions can easily be specified with <code>|</code> in a regex. You can also invert a pattern as usual with <code>.SDcols = !patterns(...)</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>TRUE</code> turns on status and information messages to the console. Turn this on by default using <code><a href='https://rdrr.io/r/base/options.html'>options(datatable.verbose=TRUE)</a></code>. The quantity and types of verbosity may be expanded in future.</p></td>
    </tr>
    <tr>
      <th>allow.cartesian</th>
      <td><p><code>FALSE</code> prevents joins that would result in more than <code>nrow(x)+nrow(i)</code> rows. This is usually caused by duplicate values in <code>i</code>'s join columns, each of which join to the same group in `x` over and over again: a <em>misspecified</em> join. Usually this was not intended and the join needs to be changed. The word 'cartesian' is used loosely in this context. The traditional cartesian join is (deliberately) difficult to achieve in <code>data.table</code>: where every row in <code>i</code> joins to every row in <code>x</code> (a <code>nrow(x)*nrow(i)</code> row result). 'cartesian' is just meant in a 'large multiplicative' sense, so FALSE does not always prevent a traditional cartesian join.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>Never used by <code>data.table</code>. Do not use. It needs to be here because <code>data.table</code> inherits from <code>data.frame</code>. See <a href='../doc/datatable-faq.html'><code><a href='../articles/datatable-faq.html'>vignette("datatable-faq")</a></code></a>.</p></td>
    </tr>
    <tr>
      <th>on</th>
      <td><p>Indicate which columns in <code>x</code> should be joined with which columns in <code>i</code> along with the type of binary operator to join with (see non-equi joins below on this). When specified, this overrides the keys set on <code>x</code> and <code>i</code>. When <code>.NATURAL</code> keyword provided then <em>natural join</em> is made (join on common columns). There are multiple ways of specifying the <code>on</code> argument:</p><ul>
<li><p>As an unnamed character vector, e.g., <code>X[Y, on=c("a", "b")]</code>, used when columns <code>a</code> and <code>b</code> are common to both <code>X</code> and <code>Y</code>.</p></li>
<li><p><em>Foreign key joins</em>: As a <em>named</em> character vector when the join columns have different names in <code>X</code> and <code>Y</code>.
            For example, <code>X[Y, on=c(x1="y1", x2="y2")]</code> joins <code>X</code> and <code>Y</code> by matching columns <code>x1</code> and <code>x2</code> in <code>X</code> with columns <code>y1</code> and <code>y2</code> in <code>Y</code>, respectively.            From v1.9.8, you can also express foreign key joins using the binary operator <code>==</code>, e.g. <code>X[Y, on=c("x1==y1", "x2==y2")]</code>.            NB: shorthand like <code>X[Y, on=c("a", V2="b")]</code> is also possible if, e.g., column <code>"a"</code> is common between the two tables.</p></li>
<li><p>For convenience during interactive scenarios, it is also possible to use <code>.()</code> syntax as <code>X[Y, on=.(a, b)]</code>.</p></li>
<li><p>From v1.9.8, (non-equi) joins using binary operators <code>&gt;=, &gt;, &lt;=, &lt;</code> are also possible, e.g., <code>X[Y, on=c("x&gt;=a", "y&lt;=b")]</code>, or for interactive use as <code>X[Y, on=.(x&gt;=a, y&lt;=b)]</code>.</p></li>
</ul><p>See examples as well as <a href='../doc/datatable-secondary-indices-and-auto-indexing.html'><code><a href='../articles/datatable-secondary-indices-and-auto-indexing.html'>vignette("datatable-secondary-indices-and-auto-indexing")</a></code></a>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>data.table</code> builds on base <span style="R">R</span> functionality to reduce 2 types of time:<br /></p>
<ol>
<li><p>programming time (easier to write, read, debug and maintain), and</p></li>
<li><p>compute time (fast and memory efficient).</p></li>
</ol>

<p>The general form of data.table syntax is:<br /></p>
<pre>
    DT[ i,  j,  by ] # + extra arguments
        |   |   |
        |   |    -------&gt; grouped by what?
        |    -------&gt; what to do?
         ---&gt; on which rows?
</pre>

<p>The way to read this out loud is: "Take <code>DT</code>, subset rows by <code>i</code>, <em>then</em> compute <code>j</code> grouped by <code>by</code>. Here are some basic usage examples expanding on this definition. See the vignette (and examples) for working examples.</p>
<pre>
    X[, a]                      # return col 'a' from X as vector. If not found, search in parent frame.
    X[, .(a)]                   # same as above, but return as a data.table.
    X[, sum(a)]                 # return sum(a) as a vector (with same scoping rules as above)
    X[, .(sum(a)), by=c]        # get sum(a) grouped by 'c'.
    X[, sum(a), by=c]           # same as above, .() can be omitted in j and by on single expression for convenience
    X[, sum(a), by=c:f]         # get sum(a) grouped by all columns in between 'c' and 'f' (both inclusive)

    X[, sum(a), keyby=b]        # get sum(a) grouped by 'b', and sort that result by the grouping column 'b'
    X[, sum(a), by=b][order(b)] # same order as above, but by chaining compound expressions
    X[c&gt;1, sum(a), by=c]        # get rows where c&gt;1 is TRUE, and on those rows, get sum(a) grouped by 'c'
    X[Y, .(a, b), on="c"]       # get rows where Y$c == X$c, and select columns 'X$a' and 'X$b' for those rows
    X[Y, .(a, i.a), on="c"]     # get rows where Y$c == X$c, and then select 'X$a' and 'Y$a' (=i.a)
    X[Y, sum(a*i.a), on="c" by=.EACHI] # for *each* 'Y$c', get sum(a*i.a) on matching rows in 'X$c'

    X[, plot(a, b), by=c]       # j accepts any expression, generates plot for each group and returns no data
    # see ?assign to add/update/delete columns by reference using the same consistent interface
</pre>

<p>A <code>data.table</code> is a <code>list</code> of vectors, just like a <code>data.frame</code>. However :</p><ol>
<li><p>it never has or uses rownames. Rownames based indexing can be done by setting a <em>key</em> of one or more columns or done <em>ad-hoc</em> using the <code>on</code> argument (now preferred).</p></li>
<li><p>it has enhanced functionality in <code>[.data.table</code> for fast joins of keyed tables, fast aggregation, fast last observation carried forward (LOCF) and fast add/modify/delete of columns by reference with no copy at all.</p></li>
</ol>

<p>See the <code>see also</code> section for the several other <em>methods</em> that are available for operating on data.tables efficiently.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='https://github.com/Rdatatable/data.table/wiki'>https://github.com/Rdatatable/data.table/wiki</a> (<code>data.table</code> homepage)<br />
<a href='http://en.wikipedia.org/wiki/Binary_search'>http://en.wikipedia.org/wiki/Binary_search</a></p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>If <code>keep.rownames</code> or <code>check.names</code> are supplied they must be written in full because <span style="R">R</span> does not allow partial argument names after `<code>...</code>`. For example, <code>data.table(DF, keep=TRUE)</code> will create a
column called <code>"keep"</code> containing <code>TRUE</code> and this is correct behaviour; <code>data.table(DF, keep.rownames=TRUE)</code> was intended.</p>
<p><code>POSIXlt</code> is not supported as a column type because it uses 40 bytes to store a single datetime. They are implicitly converted to <code>POSIXct</code> type with <em>warning</em>. You may also be interested in <code><a href='IDateTime.html'>IDateTime</a></code> instead; it has methods to convert to and from <code>POSIXlt</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='special-symbols.html'>special-symbols</a></code>, <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code>, <code><a href='https://rdrr.io/r/base/Extract.data.frame.html'>[.data.frame</a></code>, <code><a href='as.data.table.html'>as.data.table</a></code>, <code><a href='setkey.html'>setkey</a></code>, <code><a href='setorder.html'>setorder</a></code>, <code><a href='setDT.html'>setDT</a></code>, <code><a href='setDF.html'>setDF</a></code>, <code><a href='J.html'>J</a></code>, <code><a href='J.html'>SJ</a></code>, <code><a href='J.html'>CJ</a></code>, <code><a href='merge.html'>merge.data.table</a></code>, <code><a href='tables.html'>tables</a></code>, <code><a href='test.data.table.html'>test.data.table</a></code>, <code><a href='IDateTime.html'>IDateTime</a></code>, <code><a href='duplicated.html'>unique.data.table</a></code>, <code><a href='copy.html'>copy</a></code>, <code><a href='assign.html'>:=</a></code>, <code><a href='truelength.html'>setalloccol</a></code>, <code><a href='truelength.html'>truelength</a></code>, <code><a href='rbindlist.html'>rbindlist</a></code>, <code><a href='setNumericRounding.html'>setNumericRounding</a></code>, <code><a href='datatable-optimize.html'>datatable-optimize</a></code>, <code><a href='setops.html'>fsetdiff</a></code>, <code><a href='setops.html'>funion</a></code>, <code><a href='setops.html'>fintersect</a></code>, <code><a href='setops.html'>fsetequal</a></code>, <code><a href='duplicated.html'>anyDuplicated</a></code>, <code><a href='duplicated.html'>uniqueN</a></code>, <code><a href='rowid.html'>rowid</a></code>, <code><a href='rleid.html'>rleid</a></code>, <code><a href='na.omit.data.table.html'>na.omit</a></code>, <code><a href='frank.html'>frank</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='https://rdrr.io/r/utils/example.html'>example</a></span>(<span class='no'>data.table</span>)  <span class='co'># to run these examples at the prompt</span>
}
<span class='no'>DF</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>,<span class='st'>"a"</span>,<span class='st'>"c"</span>),<span class='kw'>each</span><span class='kw'>=</span><span class='fl'>3</span>), <span class='kw'>y</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>3</span>,<span class='fl'>6</span>), <span class='kw'>v</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>9</span>)
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'>data.table</span>(<span class='kw'>x</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>,<span class='st'>"a"</span>,<span class='st'>"c"</span>),<span class='kw'>each</span><span class='kw'>=</span><span class='fl'>3</span>), <span class='kw'>y</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>3</span>,<span class='fl'>6</span>), <span class='kw'>v</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>9</span>)
<span class='no'>DF</span></div><div class='output co'>#&gt;   x y v
#&gt; 1 b 1 1
#&gt; 2 b 3 2
#&gt; 3 b 6 3
#&gt; 4 a 1 4
#&gt; 5 a 3 5
#&gt; 6 a 6 6
#&gt; 7 c 1 7
#&gt; 8 c 3 8
#&gt; 9 c 6 9</div><div class='input'><span class='no'>DT</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: b 3 2
#&gt; 3: b 6 3
#&gt; 4: a 1 4
#&gt; 5: a 3 5
#&gt; 6: a 6 6
#&gt; 7: c 1 7
#&gt; 8: c 3 8
#&gt; 9: c 6 9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span>(<span class='no'>DT</span>), <span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span>(<span class='no'>DF</span>))    <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='no'>DF</span>$<span class='no'>a</span>, <span class='no'>DT</span>$<span class='no'>a</span>)          <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/list.html'>is.list</a></span>(<span class='no'>DF</span>)                    <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/list.html'>is.list</a></span>(<span class='no'>DT</span>)                    <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>is.data.frame</a></span>(<span class='no'>DT</span>)              <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='fu'><a href='tables.html'>tables</a></span>()</div><div class='output co'>#&gt;    NAME NROW NCOL MB  COLS KEY
#&gt; 1:   DT    9    3  0 x,y,v    
#&gt; Total: 0MB</div><div class='input'>
<span class='co'># basic row subset operations</span>
<span class='no'>DT</span>[<span class='fl'>2</span>]                          <span class='co'># 2nd row</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 3 2</div><div class='input'><span class='no'>DT</span>[<span class='fl'>3</span>:<span class='fl'>2</span>]                        <span class='co'># 3rd and 2nd row</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 6 3
#&gt; 2: b 3 2</div><div class='input'><span class='no'>DT</span>[<span class='fu'><a href='setorder.html'>order</a></span>(<span class='no'>x</span>)]                   <span class='co'># no need for order(DT$x)</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6
#&gt; 4: b 1 1
#&gt; 5: b 3 2
#&gt; 6: b 6 3
#&gt; 7: c 1 7
#&gt; 8: c 3 8
#&gt; 9: c 6 9</div><div class='input'><span class='no'>DT</span>[<span class='fu'><a href='setorder.html'>order</a></span>(<span class='no'>x</span>), ]                 <span class='co'># same as above. The ',' is optional</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6
#&gt; 4: b 1 1
#&gt; 5: b 3 2
#&gt; 6: b 6 3
#&gt; 7: c 1 7
#&gt; 8: c 3 8
#&gt; 9: c 6 9</div><div class='input'><span class='no'>DT</span>[<span class='no'>y</span><span class='kw'>&gt;</span><span class='fl'>2</span>]                        <span class='co'># all rows where DT$y &gt; 2</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 3 2
#&gt; 2: b 6 3
#&gt; 3: a 3 5
#&gt; 4: a 6 6
#&gt; 5: c 3 8
#&gt; 6: c 6 9</div><div class='input'><span class='no'>DT</span>[<span class='no'>y</span><span class='kw'>&gt;</span><span class='fl'>2</span> <span class='kw'>&amp;</span> <span class='no'>v</span><span class='kw'>&gt;</span><span class='fl'>5</span>]                  <span class='co'># compound logical expressions</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 6 6
#&gt; 2: c 3 8
#&gt; 3: c 6 9</div><div class='input'><span class='no'>DT</span>[!<span class='fl'>2</span>:<span class='fl'>4</span>]                       <span class='co'># all rows other than 2:4</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: a 3 5
#&gt; 3: a 6 6
#&gt; 4: c 1 7
#&gt; 5: c 3 8
#&gt; 6: c 6 9</div><div class='input'><span class='no'>DT</span>[-(<span class='fl'>2</span>:<span class='fl'>4</span>)]                     <span class='co'># same</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: a 3 5
#&gt; 3: a 6 6
#&gt; 4: c 1 7
#&gt; 5: c 3 8
#&gt; 6: c 6 9</div><div class='input'>
<span class='co'># select|compute columns data.table way</span>
<span class='no'>DT</span>[, <span class='no'>v</span>]                        <span class='co'># v column (as vector)</span></div><div class='output co'>#&gt; [1] 1 2 3 4 5 6 7 8 9</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='no'>v</span>)]                  <span class='co'># v column (as data.table)</span></div><div class='output co'>#&gt;    v
#&gt; 1: 1
#&gt; 2: 2
#&gt; 3: 3
#&gt; 4: 4
#&gt; 5: 5
#&gt; 6: 6
#&gt; 7: 7
#&gt; 8: 8
#&gt; 9: 9</div><div class='input'><span class='no'>DT</span>[, <span class='fu'>.</span>(<span class='no'>v</span>)]                     <span class='co'># same as above, .() is a shorthand alias to list()</span></div><div class='output co'>#&gt;    v
#&gt; 1: 1
#&gt; 2: 2
#&gt; 3: 3
#&gt; 4: 4
#&gt; 5: 5
#&gt; 6: 6
#&gt; 7: 7
#&gt; 8: 8
#&gt; 9: 9</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>)]                   <span class='co'># sum of column v, returned as vector</span></div><div class='output co'>#&gt; [1] 45</div><div class='input'><span class='no'>DT</span>[, <span class='fu'>.</span>(<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>))]                <span class='co'># same, but return data.table (column autonamed V1)</span></div><div class='output co'>#&gt;    V1
#&gt; 1: 45</div><div class='input'><span class='no'>DT</span>[, <span class='fu'>.</span>(<span class='kw'>sv</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>))]             <span class='co'># same, but column named "sv"</span></div><div class='output co'>#&gt;    sv
#&gt; 1: 45</div><div class='input'><span class='no'>DT</span>[, <span class='fu'>.</span>(<span class='no'>v</span>, <span class='no'>v</span>*<span class='fl'>2</span>)]                <span class='co'># return two column data.table, v and v*2</span></div><div class='output co'>#&gt;    v V2
#&gt; 1: 1  2
#&gt; 2: 2  4
#&gt; 3: 3  6
#&gt; 4: 4  8
#&gt; 5: 5 10
#&gt; 6: 6 12
#&gt; 7: 7 14
#&gt; 8: 8 16
#&gt; 9: 9 18</div><div class='input'>
<span class='co'># subset rows and select|compute data.table way</span>
<span class='no'>DT</span>[<span class='fl'>2</span>:<span class='fl'>3</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>)]                <span class='co'># sum(v) over rows 2 and 3, return vector</span></div><div class='output co'>#&gt; [1] 5</div><div class='input'><span class='no'>DT</span>[<span class='fl'>2</span>:<span class='fl'>3</span>, <span class='fu'>.</span>(<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>))]             <span class='co'># same, but return data.table with column V1</span></div><div class='output co'>#&gt;    V1
#&gt; 1:  5</div><div class='input'><span class='no'>DT</span>[<span class='fl'>2</span>:<span class='fl'>3</span>, <span class='fu'>.</span>(<span class='kw'>sv</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>))]          <span class='co'># same, but return data.table with column sv</span></div><div class='output co'>#&gt;    sv
#&gt; 1:  5</div><div class='input'><span class='no'>DT</span>[<span class='fl'>2</span>:<span class='fl'>5</span>, <span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='no'>v</span>, <span class='st'>"\n"</span>)]          <span class='co'># just for j's side effect</span></div><div class='output co'>#&gt; 2 3 4 5 </div><div class='output co'>#&gt; NULL</div><div class='input'>
<span class='co'># select columns the data.frame way</span>
<span class='no'>DT</span>[, <span class='fl'>2</span>]                        <span class='co'># 2nd column, returns a data.table always</span></div><div class='output co'>#&gt;    y
#&gt; 1: 1
#&gt; 2: 3
#&gt; 3: 6
#&gt; 4: 1
#&gt; 5: 3
#&gt; 6: 6
#&gt; 7: 1
#&gt; 8: 3
#&gt; 9: 6</div><div class='input'><span class='no'>colNum</span> <span class='kw'>=</span> <span class='fl'>2</span>                     <span class='co'># to refer vars in `j` from the outside of data use `..` prefix</span>
<span class='no'>DT</span>[, <span class='no'>..colNum</span>]                 <span class='co'># same, equivalent to DT[, .SD, .SDcols=colNum]</span></div><div class='output co'>#&gt;    y
#&gt; 1: 1
#&gt; 2: 3
#&gt; 3: 6
#&gt; 4: 1
#&gt; 5: 3
#&gt; 6: 6
#&gt; 7: 1
#&gt; 8: 3
#&gt; 9: 6</div><div class='input'><span class='no'>DT</span><span class='kw'>[[</span><span class='st'>"v"</span>]]                      <span class='co'># same as DT[, v] but much faster</span></div><div class='output co'>#&gt; [1] 1 2 3 4 5 6 7 8 9</div><div class='input'>
<span class='co'># grouping operations - j and by</span>
<span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]             <span class='co'># ad hoc by, order of groups preserved in result</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  6
#&gt; 2: a 15
#&gt; 3: c 24</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>keyby</span><span class='kw'>=</span><span class='no'>x</span>]          <span class='co'># same, but order the result on by cols</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: a 15
#&gt; 2: b  6
#&gt; 3: c 24</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>][<span class='fu'><a href='setorder.html'>order</a></span>(<span class='no'>x</span>)]   <span class='co'># same but by chaining expressions together</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: a 15
#&gt; 2: b  6
#&gt; 3: c 24</div><div class='input'>
<span class='co'># fast ad hoc row subsets (subsets as joins)</span>
<span class='no'>DT</span>[<span class='st'>"a"</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]                <span class='co'># same as x == "a" but uses binary search (fast)</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>DT</span>[<span class='st'>"a"</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>)]               <span class='co'># same, for convenience, no need to quote every column</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>DT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]             <span class='co'># same</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>DT</span>[<span class='no'>x</span><span class='kw'>==</span><span class='st'>"a"</span>]                     <span class='co'># same, single "==" internally optimised to use binary search (fast)</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>DT</span>[<span class='no'>x</span><span class='kw'>!=</span><span class='st'>"b"</span> <span class='kw'>|</span> <span class='no'>y</span><span class='kw'>!=</span><span class='fl'>3</span>]              <span class='co'># not yet optimized, currently vector scan subset</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: b 6 3
#&gt; 3: a 1 4
#&gt; 4: a 3 5
#&gt; 5: a 6 6
#&gt; 6: c 1 7
#&gt; 7: c 3 8
#&gt; 8: c 6 9</div><div class='input'><span class='no'>DT</span>[<span class='fu'>.</span>(<span class='st'>"b"</span>, <span class='fl'>3</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"x"</span>, <span class='st'>"y"</span>)]  <span class='co'># join on columns x,y of DT; uses binary search (fast)</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 3 2</div><div class='input'><span class='no'>DT</span>[<span class='fu'>.</span>(<span class='st'>"b"</span>, <span class='fl'>3</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>, <span class='no'>y</span>)]      <span class='co'># same, but using on=.()</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 3 2</div><div class='input'><span class='no'>DT</span>[<span class='fu'>.</span>(<span class='st'>"b"</span>, <span class='fl'>1</span>:<span class='fl'>2</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"x"</span>, <span class='st'>"y"</span>)]             <span class='co'># no match returns NA</span></div><div class='output co'>#&gt;    x y  v
#&gt; 1: b 1  1
#&gt; 2: b 2 NA</div><div class='input'><span class='no'>DT</span>[<span class='fu'>.</span>(<span class='st'>"b"</span>, <span class='fl'>1</span>:<span class='fl'>2</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>, <span class='no'>y</span>), <span class='kw'>nomatch</span><span class='kw'>=</span><span class='kw'>NULL</span>]   <span class='co'># no match row is not returned</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1</div><div class='input'><span class='no'>DT</span>[<span class='fu'>.</span>(<span class='st'>"b"</span>, <span class='fl'>1</span>:<span class='fl'>2</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"x"</span>, <span class='st'>"y"</span>), <span class='kw'>roll</span><span class='kw'>=</span><span class='fl'>Inf</span>]   <span class='co'># locf, nomatch row gets rolled by previous row</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: b 2 1</div><div class='input'><span class='no'>DT</span>[<span class='fu'>.</span>(<span class='st'>"b"</span>, <span class='fl'>1</span>:<span class='fl'>2</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>, <span class='no'>y</span>), <span class='kw'>roll</span><span class='kw'>=</span>-<span class='fl'>Inf</span>]      <span class='co'># nocb, nomatch row gets rolled by next row</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: b 2 2</div><div class='input'><span class='no'>DT</span>[<span class='st'>"b"</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>*<span class='no'>y</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]                   <span class='co'># on rows where DT$x=="b", calculate sum(v*y)</span></div><div class='output co'>#&gt; [1] 25</div><div class='input'>
<span class='co'># all together now</span>
<span class='no'>DT</span>[<span class='no'>x</span><span class='kw'>!=</span><span class='st'>"a"</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                    <span class='co'># get sum(v) by "x" for each i != "a"</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  6
#&gt; 2: c 24</div><div class='input'><span class='no'>DT</span>[!<span class='st'>"a"</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]         <span class='co'># same, but using subsets-as-joins</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  6
#&gt; 2: c 24</div><div class='input'><span class='no'>DT</span>[<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>,<span class='st'>"c"</span>), <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]   <span class='co'># same</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  6
#&gt; 2: c 24</div><div class='input'><span class='no'>DT</span>[<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>,<span class='st'>"c"</span>), <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>)]  <span class='co'># same, using on=.()</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  6
#&gt; 2: c 24</div><div class='input'>
<span class='co'># joins as subsets</span>
<span class='no'>X</span> <span class='kw'>=</span> <span class='fu'>data.table</span>(<span class='kw'>x</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"c"</span>,<span class='st'>"b"</span>), <span class='kw'>v</span><span class='kw'>=</span><span class='fl'>8</span>:<span class='fl'>7</span>, <span class='kw'>foo</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>4</span>,<span class='fl'>2</span>))
<span class='no'>X</span></div><div class='output co'>#&gt;    x v foo
#&gt; 1: c 8   4
#&gt; 2: b 7   2</div><div class='input'>
<span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]                         <span class='co'># right join</span></div><div class='output co'>#&gt;    x y v i.v foo
#&gt; 1: c 1 7   8   4
#&gt; 2: c 3 8   8   4
#&gt; 3: c 6 9   8   4
#&gt; 4: b 1 1   7   2
#&gt; 5: b 3 2   7   2
#&gt; 6: b 6 3   7   2</div><div class='input'><span class='no'>X</span>[<span class='no'>DT</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]                         <span class='co'># left join</span></div><div class='output co'>#&gt;    x  v foo y i.v
#&gt; 1: b  7   2 1   1
#&gt; 2: b  7   2 3   2
#&gt; 3: b  7   2 6   3
#&gt; 4: a NA  NA 1   4
#&gt; 5: a NA  NA 3   5
#&gt; 6: a NA  NA 6   6
#&gt; 7: c  8   4 1   7
#&gt; 8: c  8   4 3   8
#&gt; 9: c  8   4 6   9</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>, <span class='kw'>nomatch</span><span class='kw'>=</span><span class='kw'>NULL</span>]           <span class='co'># inner join</span></div><div class='output co'>#&gt;    x y v i.v foo
#&gt; 1: c 1 7   8   4
#&gt; 2: c 3 8   8   4
#&gt; 3: c 6 9   8   4
#&gt; 4: b 1 1   7   2
#&gt; 5: b 3 2   7   2
#&gt; 6: b 6 3   7   2</div><div class='input'><span class='no'>DT</span>[!<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]                        <span class='co'># not join</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>y</span><span class='kw'>=</span><span class='st'>"v"</span>)]                    <span class='co'># join using column "y" of DT with column "v" of X</span></div><div class='output co'>#&gt;       x y  v i.x foo
#&gt; 1: &lt;NA&gt; 8 NA   c   4
#&gt; 2: &lt;NA&gt; 7 NA   b   2</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"y==v"</span>]                      <span class='co'># same as above (v1.9.8+)</span></div><div class='output co'>#&gt;       x y  v i.x foo
#&gt; 1: &lt;NA&gt; 8 NA   c   4
#&gt; 2: &lt;NA&gt; 7 NA   b   2</div><div class='input'>
<span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>y</span><span class='kw'>&lt;=</span><span class='no'>foo</span>)]                   <span class='co'># NEW non-equi join (v1.9.8+)</span></div><div class='output co'>#&gt;    x y v i.x i.v
#&gt; 1: b 4 1   c   8
#&gt; 2: b 4 2   c   8
#&gt; 3: a 4 4   c   8
#&gt; 4: a 4 5   c   8
#&gt; 5: c 4 7   c   8
#&gt; 6: c 4 8   c   8
#&gt; 7: b 2 1   b   7
#&gt; 8: a 2 4   b   7
#&gt; 9: c 2 7   b   7</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"y&lt;=foo"</span>]                    <span class='co'># same as above</span></div><div class='output co'>#&gt;    x y v i.x i.v
#&gt; 1: b 4 1   c   8
#&gt; 2: b 4 2   c   8
#&gt; 3: a 4 4   c   8
#&gt; 4: a 4 5   c   8
#&gt; 5: c 4 7   c   8
#&gt; 6: c 4 8   c   8
#&gt; 7: b 2 1   b   7
#&gt; 8: a 2 4   b   7
#&gt; 9: c 2 7   b   7</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"y&lt;=foo"</span>)]                 <span class='co'># same as above</span></div><div class='output co'>#&gt;    x y v i.x i.v
#&gt; 1: b 4 1   c   8
#&gt; 2: b 4 2   c   8
#&gt; 3: a 4 4   c   8
#&gt; 4: a 4 5   c   8
#&gt; 5: c 4 7   c   8
#&gt; 6: c 4 8   c   8
#&gt; 7: b 2 1   b   7
#&gt; 8: a 2 4   b   7
#&gt; 9: c 2 7   b   7</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>y</span><span class='kw'>&gt;=</span><span class='no'>foo</span>)]                   <span class='co'># NEW non-equi join (v1.9.8+)</span></div><div class='output co'>#&gt;    x y v i.x i.v
#&gt; 1: b 4 3   c   8
#&gt; 2: a 4 6   c   8
#&gt; 3: c 4 9   c   8
#&gt; 4: b 2 2   b   7
#&gt; 5: b 2 3   b   7
#&gt; 6: a 2 5   b   7
#&gt; 7: a 2 6   b   7
#&gt; 8: c 2 8   b   7
#&gt; 9: c 2 9   b   7</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>, <span class='no'>y</span><span class='kw'>&lt;=</span><span class='no'>foo</span>)]                <span class='co'># NEW non-equi join (v1.9.8+)</span></div><div class='output co'>#&gt;    x y v i.v
#&gt; 1: c 4 7   8
#&gt; 2: c 4 8   8
#&gt; 3: b 2 1   7</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='fu'>.</span>(<span class='no'>x</span>,<span class='no'>y</span>,<span class='no'>x.y</span>,<span class='no'>v</span>), <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>, <span class='no'>y</span><span class='kw'>&gt;=</span><span class='no'>foo</span>)]  <span class='co'># Select x's join columns as well</span></div><div class='output co'>#&gt;    x y x.y v
#&gt; 1: c 4   6 9
#&gt; 2: b 2   3 2
#&gt; 3: b 2   6 3</div><div class='input'>
<span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>, <span class='kw'>mult</span><span class='kw'>=</span><span class='st'>"first"</span>]           <span class='co'># first row of each group</span></div><div class='output co'>#&gt;    x y v i.v foo
#&gt; 1: c 1 7   8   4
#&gt; 2: b 1 1   7   2</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>, <span class='kw'>mult</span><span class='kw'>=</span><span class='st'>"last"</span>]            <span class='co'># last row of each group</span></div><div class='output co'>#&gt;    x y v i.v foo
#&gt; 1: c 6 9   8   4
#&gt; 2: b 6 3   7   2</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]      <span class='co'># join and eval j for each row in i</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: c 24
#&gt; 2: b  6</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>)*<span class='no'>foo</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]  <span class='co'># join inherited scope</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: c 96
#&gt; 2: b 12</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>)*<span class='no'>i.v</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]  <span class='co'># 'i,v' refers to X's v column</span></div><div class='output co'>#&gt;    x  V1
#&gt; 1: c 192
#&gt; 2: b  42</div><div class='input'><span class='no'>DT</span>[<span class='no'>X</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>, <span class='no'>v</span><span class='kw'>&gt;=</span><span class='no'>v</span>), <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>y</span>)*<span class='no'>foo</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>] <span class='co'># NEW non-equi join with by=.EACHI (v1.9.8+)</span></div><div class='output co'>#&gt;    x v V1
#&gt; 1: c 8 36
#&gt; 2: b 7 NA</div><div class='input'>
<span class='co'># setting keys</span>
<span class='no'>kDT</span> <span class='kw'>=</span> <span class='fu'><a href='copy.html'>copy</a></span>(<span class='no'>DT</span>)                        <span class='co'># (deep) copy DT to kDT to work with it.</span>
<span class='fu'><a href='setkey.html'>setkey</a></span>(<span class='no'>kDT</span>,<span class='no'>x</span>)                         <span class='co'># set a 1-column key. No quotes, for convenience.</span>
<span class='fu'><a href='setkey.html'>setkeyv</a></span>(<span class='no'>kDT</span>,<span class='st'>"x"</span>)                      <span class='co'># same (v in setkeyv stands for vector)</span>
<span class='no'>v</span><span class='kw'>=</span><span class='st'>"x"</span>
<span class='fu'><a href='setkey.html'>setkeyv</a></span>(<span class='no'>kDT</span>,<span class='no'>v</span>)                        <span class='co'># same</span>
<span class='co'># key(kDT)&lt;-"x"                       # copies whole table, please use set* functions instead</span>
<span class='fu'><a href='setkey.html'>haskey</a></span>(<span class='no'>kDT</span>)                           <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'><a href='setkey.html'>key</a></span>(<span class='no'>kDT</span>)                              <span class='co'># "x"</span></div><div class='output co'>#&gt; [1] "x"</div><div class='input'>
<span class='co'># fast *keyed* subsets</span>
<span class='no'>kDT</span>[<span class='st'>"a"</span>]                              <span class='co'># subset-as-join on *key* column 'x'</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='st'>"a"</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]                      <span class='co'># same, being explicit using 'on=' (preferred)</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'>
<span class='co'># all together</span>
<span class='no'>kDT</span>[!<span class='st'>"a"</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>.EACHI</span>]          <span class='co'># get sum(v) for each i != "a"</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  6
#&gt; 2: c 24</div><div class='input'>
<span class='co'># multi-column key</span>
<span class='fu'><a href='setkey.html'>setkey</a></span>(<span class='no'>kDT</span>,<span class='no'>x</span>,<span class='no'>y</span>)                       <span class='co'># 2-column key</span>
<span class='fu'><a href='setkey.html'>setkeyv</a></span>(<span class='no'>kDT</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"x"</span>,<span class='st'>"y"</span>))               <span class='co'># same</span>

<span class='co'># fast *keyed* subsets on multi-column key</span>
<span class='no'>kDT</span>[<span class='st'>"a"</span>]                              <span class='co'># join to 1st column of key</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='st'>"a"</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>]                      <span class='co'># on= is optional, but is preferred</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>)]                           <span class='co'># same, .() is an alias for list()</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='st'>"a"</span>)]                        <span class='co'># same</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 1 4
#&gt; 2: a 3 5
#&gt; 3: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>, <span class='fl'>3</span>)]                        <span class='co'># join to 2 columns</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 3 5</div><div class='input'><span class='no'>kDT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>, <span class='fl'>3</span>:<span class='fl'>6</span>)]                      <span class='co'># join 4 rows (2 missing)</span></div><div class='output co'>#&gt;    x y  v
#&gt; 1: a 3  5
#&gt; 2: a 4 NA
#&gt; 3: a 5 NA
#&gt; 4: a 6  6</div><div class='input'><span class='no'>kDT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>, <span class='fl'>3</span>:<span class='fl'>6</span>), <span class='kw'>nomatch</span><span class='kw'>=</span><span class='kw'>NULL</span>]        <span class='co'># remove missing</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 3 5
#&gt; 2: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>, <span class='fl'>3</span>:<span class='fl'>6</span>), <span class='kw'>roll</span><span class='kw'>=</span><span class='fl'>TRUE</span>]           <span class='co'># locf rolling join</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 3 5
#&gt; 2: a 4 5
#&gt; 3: a 5 5
#&gt; 4: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>, <span class='fl'>3</span>:<span class='fl'>6</span>), <span class='kw'>roll</span><span class='kw'>=</span><span class='fl'>Inf</span>]            <span class='co'># same as above</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 3 5
#&gt; 2: a 4 5
#&gt; 3: a 5 5
#&gt; 4: a 6 6</div><div class='input'><span class='no'>kDT</span>[<span class='fu'>.</span>(<span class='st'>"a"</span>, <span class='fl'>3</span>:<span class='fl'>6</span>), <span class='kw'>roll</span><span class='kw'>=</span>-<span class='fl'>Inf</span>]           <span class='co'># nocb rolling join</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: a 3 5
#&gt; 2: a 4 6
#&gt; 3: a 5 6
#&gt; 4: a 6 6</div><div class='input'><span class='no'>kDT</span>[!<span class='fu'>.</span>(<span class='st'>"a"</span>)]                          <span class='co'># not join</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: b 3 2
#&gt; 3: b 6 3
#&gt; 4: c 1 7
#&gt; 5: c 3 8
#&gt; 6: c 6 9</div><div class='input'><span class='no'>kDT</span>[!<span class='st'>"a"</span>]                             <span class='co'># same</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: b 3 2
#&gt; 3: b 6 3
#&gt; 4: c 1 7
#&gt; 5: c 3 8
#&gt; 6: c 6 9</div><div class='input'>
<span class='co'># more on special symbols, see also ?"special-symbols"</span>
<span class='no'>DT</span>[<span class='no'>.N</span>]                                  <span class='co'># last row</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: c 6 9</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.N</span>]                                <span class='co'># total number of rows in DT</span></div><div class='output co'>#&gt; [1] 9</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.N</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                          <span class='co'># number of rows in each group</span></div><div class='output co'>#&gt;    x N
#&gt; 1: b 3
#&gt; 2: a 3
#&gt; 3: c 3</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.SD</span>, <span class='kw'>.SDcols</span><span class='kw'>=</span><span class='no'>x</span>:<span class='no'>y</span>]                  <span class='co'># select columns 'x' through 'y'</span></div><div class='output co'>#&gt;    x y
#&gt; 1: b 1
#&gt; 2: b 3
#&gt; 3: b 6
#&gt; 4: a 1
#&gt; 5: a 3
#&gt; 6: a 6
#&gt; 7: c 1
#&gt; 8: c 3
#&gt; 9: c 6</div><div class='input'><span class='no'>DT</span>[ , <span class='no'>.SD</span>, <span class='kw'>.SDcols</span> <span class='kw'>=</span> !<span class='no'>x</span>:<span class='no'>y</span>]              <span class='co'># drop columns 'x' through 'y'</span></div><div class='output co'>#&gt;    v
#&gt; 1: 1
#&gt; 2: 2
#&gt; 3: 3
#&gt; 4: 4
#&gt; 5: 5
#&gt; 6: 6
#&gt; 7: 7
#&gt; 8: 8
#&gt; 9: 9</div><div class='input'><span class='no'>DT</span>[ , <span class='no'>.SD</span>, <span class='kw'>.SDcols</span> <span class='kw'>=</span> <span class='fu'><a href='patterns.html'>patterns</a></span>(<span class='st'>'^[xv]'</span>)] <span class='co'># select columns matching '^x' or '^v'</span></div><div class='output co'>#&gt;    x v
#&gt; 1: b 1
#&gt; 2: b 2
#&gt; 3: b 3
#&gt; 4: a 4
#&gt; 5: a 5
#&gt; 6: a 6
#&gt; 7: c 7
#&gt; 8: c 8
#&gt; 9: c 9</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.SD</span>[<span class='fl'>1</span>]]                            <span class='co'># first row of all columns</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.SD</span>[<span class='fl'>1</span>], <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                      <span class='co'># first row of 'y' and 'v' for each group in 'x'</span></div><div class='output co'>#&gt;    x y v
#&gt; 1: b 1 1
#&gt; 2: a 1 4
#&gt; 3: c 1 7</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>.N</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>sum</span>)), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]     <span class='co'># get rows *and* sum columns 'v' and 'y' by group</span></div><div class='output co'>#&gt;    x N  y  v
#&gt; 1: b 3 10  6
#&gt; 2: a 3 10 15
#&gt; 3: c 3 10 24</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.I</span>[<span class='fl'>1</span>], <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                       <span class='co'># row number in DT corresponding to each group</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  1
#&gt; 2: a  4
#&gt; 3: c  7</div><div class='input'><span class='no'>DT</span>[, <span class='no'>grp</span> <span class='kw'>:=</span> <span class='no'>.GRP</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                 <span class='co'># add a group counter column</span></div><div class='output co'>#&gt;    x y v grp
#&gt; 1: b 1 1   1
#&gt; 2: b 3 2   1
#&gt; 3: b 6 3   1
#&gt; 4: a 1 4   2
#&gt; 5: a 3 5   2
#&gt; 6: a 6 6   2
#&gt; 7: c 1 7   3
#&gt; 8: c 3 8   3
#&gt; 9: c 6 9   3</div><div class='input'><span class='no'>X</span>[, <span class='no'>DT</span>[<span class='no'>.BY</span>, <span class='no'>y</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>], <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]           <span class='co'># join within each group</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: c  1
#&gt; 2: c  3
#&gt; 3: c  6
#&gt; 4: b  1
#&gt; 5: b  3
#&gt; 6: b  6</div><div class='input'>
<span class='co'># add/update/delete by reference (see ?assign)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>DT</span>[, <span class='no'>z</span><span class='kw'>:=</span><span class='fl'>42L</span>])                   <span class='co'># add new column by reference</span></div><div class='output co'>#&gt;    x y v grp  z
#&gt; 1: b 1 1   1 42
#&gt; 2: b 3 2   1 42
#&gt; 3: b 6 3   1 42
#&gt; 4: a 1 4   2 42
#&gt; 5: a 3 5   2 42
#&gt; 6: a 6 6   2 42
#&gt; 7: c 1 7   3 42
#&gt; 8: c 3 8   3 42
#&gt; 9: c 6 9   3 42</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>DT</span>[, <span class='no'>z</span><span class='kw'>:=</span><span class='kw'>NULL</span>])                  <span class='co'># remove column by reference</span></div><div class='output co'>#&gt;    x y v grp
#&gt; 1: b 1 1   1
#&gt; 2: b 3 2   1
#&gt; 3: b 6 3   1
#&gt; 4: a 1 4   2
#&gt; 5: a 3 5   2
#&gt; 6: a 6 6   2
#&gt; 7: c 1 7   3
#&gt; 8: c 3 8   3
#&gt; 9: c 6 9   3</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>DT</span>[<span class='st'>"a"</span>, <span class='no'>v</span><span class='kw'>:=</span><span class='fl'>42L</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>])        <span class='co'># subassign to existing v column by reference</span></div><div class='output co'>#&gt;    x y  v grp
#&gt; 1: b 1  1   1
#&gt; 2: b 3  2   1
#&gt; 3: b 6  3   1
#&gt; 4: a 1 42   2
#&gt; 5: a 3 42   2
#&gt; 6: a 6 42   2
#&gt; 7: c 1  7   3
#&gt; 8: c 3  8   3
#&gt; 9: c 6  9   3</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>DT</span>[<span class='st'>"b"</span>, <span class='no'>v2</span><span class='kw'>:=</span><span class='fl'>84L</span>, <span class='kw'>on</span><span class='kw'>=</span><span class='st'>"x"</span>])       <span class='co'># subassign to new column by reference (NA padded)</span></div><div class='output co'>#&gt;    x y  v grp v2
#&gt; 1: b 1  1   1 84
#&gt; 2: b 3  2   1 84
#&gt; 3: b 6  3   1 84
#&gt; 4: a 1 42   2 NA
#&gt; 5: a 3 42   2 NA
#&gt; 6: a 6 42   2 NA
#&gt; 7: c 1  7   3 NA
#&gt; 8: c 3  8   3 NA
#&gt; 9: c 6  9   3 NA</div><div class='input'>
<span class='no'>DT</span>[, <span class='no'>m</span><span class='kw'>:=</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>][]              <span class='co'># add new column by reference by group</span></div><div class='output co'>#&gt;    x y  v grp v2  m
#&gt; 1: b 1  1   1 84  2
#&gt; 2: b 3  2   1 84  2
#&gt; 3: b 6  3   1 84  2
#&gt; 4: a 1 42   2 NA 42
#&gt; 5: a 3 42   2 NA 42
#&gt; 6: a 6 42   2 NA 42
#&gt; 7: c 1  7   3 NA  8
#&gt; 8: c 3  8   3 NA  8
#&gt; 9: c 6  9   3 NA  8</div><div class='input'>                                      <span class='co'># NB: postfix [] is shortcut to print()</span>
<span class='co'># advanced usage</span>
<span class='no'>DT</span> <span class='kw'>=</span> <span class='fu'>data.table</span>(<span class='kw'>x</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>,<span class='st'>"a"</span>,<span class='st'>"c"</span>),<span class='kw'>each</span><span class='kw'>=</span><span class='fl'>3</span>), <span class='kw'>v</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>2</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>2</span>), <span class='kw'>y</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>3</span>,<span class='fl'>6</span>), <span class='kw'>a</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>9</span>, <span class='kw'>b</span><span class='kw'>=</span><span class='fl'>9</span>:<span class='fl'>1</span>)

<span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>y</span><span class='kw'>%%</span><span class='fl'>2</span>)]              <span class='co'># expressions in by</span></div><div class='output co'>#&gt;    y V1
#&gt; 1: 1  9
#&gt; 2: 0  4</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='kw'>bool</span> <span class='kw'>=</span> <span class='no'>y</span><span class='kw'>%%</span><span class='fl'>2</span>)]       <span class='co'># same, using a named list to change by column name</span></div><div class='output co'>#&gt;    bool V1
#&gt; 1:    1  9
#&gt; 2:    0  4</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.SD</span>[<span class='fl'>2</span>], <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                    <span class='co'># get 2nd row of each group</span></div><div class='output co'>#&gt;    x v y a b
#&gt; 1: b 1 3 2 8
#&gt; 2: a 2 3 5 5
#&gt; 3: c 2 3 8 2</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span>(<span class='no'>.SD</span>,<span class='fl'>2</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]               <span class='co'># last 2 rows of each group</span></div><div class='output co'>#&gt;    x v y a b
#&gt; 1: b 1 3 2 8
#&gt; 2: b 1 6 3 7
#&gt; 3: a 2 3 5 5
#&gt; 4: a 1 6 6 4
#&gt; 5: c 2 3 8 2
#&gt; 6: c 2 6 9 1</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>sum</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]          <span class='co'># sum of all (other) columns for each group</span></div><div class='output co'>#&gt;    x v  y  a  b
#&gt; 1: b 3 10  6 24
#&gt; 2: a 5 10 15 15
#&gt; 3: c 5 10 24  6</div><div class='input'><span class='no'>DT</span>[, <span class='no'>.SD</span>[<span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.min</a></span>(<span class='no'>v</span>)], <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]         <span class='co'># nested query by group</span></div><div class='output co'>#&gt;    x v y a b
#&gt; 1: b 1 1 1 9
#&gt; 2: a 1 6 6 4
#&gt; 3: c 1 1 7 3</div><div class='input'>
<span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>MySum</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>),
          <span class='kw'>MyMin</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>(<span class='no'>v</span>),
          <span class='kw'>MyMax</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>v</span>)),
    <span class='kw'>by</span><span class='kw'>=</span><span class='fu'>.</span>(<span class='no'>x</span>, <span class='no'>y</span><span class='kw'>%%</span><span class='fl'>2</span>)]                    <span class='co'># by 2 expressions</span></div><div class='output co'>#&gt;    x y MySum MyMin MyMax
#&gt; 1: b 1     2     1     1
#&gt; 2: b 0     1     1     1
#&gt; 3: a 1     4     2     2
#&gt; 4: a 0     1     1     1
#&gt; 5: c 1     3     1     2
#&gt; 6: c 0     2     2     2</div><div class='input'>
<span class='no'>DT</span>[, <span class='fu'>.</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fu'>.</span>(<span class='no'>a</span>), <span class='kw'>b</span> <span class='kw'>=</span> <span class='fu'>.</span>(<span class='no'>b</span>)), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]     <span class='co'># list columns</span></div><div class='output co'>#&gt;    x     a     b
#&gt; 1: b 1,2,3 9,8,7
#&gt; 2: a 4,5,6 6,5,4
#&gt; 3: c 7,8,9 3,2,1</div><div class='input'><span class='no'>DT</span>[, <span class='fu'>.</span>(<span class='kw'>seq</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>(<span class='no'>a</span>):<span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>b</span>)), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]    <span class='co'># j is not limited to just aggregations</span></div><div class='output co'>#&gt;     x seq
#&gt;  1: b   1
#&gt;  2: b   2
#&gt;  3: b   3
#&gt;  4: b   4
#&gt;  5: b   5
#&gt;  6: b   6
#&gt;  7: b   7
#&gt;  8: b   8
#&gt;  9: b   9
#&gt; 10: a   4
#&gt; 11: a   5
#&gt; 12: a   6
#&gt; 13: c   7
#&gt; 14: c   6
#&gt; 15: c   5
#&gt; 16: c   4
#&gt; 17: c   3</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>][<span class='no'>V1</span><span class='kw'>&lt;</span><span class='fl'>20</span>]             <span class='co'># compound query</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: b  3
#&gt; 2: a  5
#&gt; 3: c  5</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>v</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>][<span class='fu'><a href='setorder.html'>order</a></span>(-<span class='no'>V1</span>)]        <span class='co'># ordering results</span></div><div class='output co'>#&gt;    x V1
#&gt; 1: a  5
#&gt; 2: c  5
#&gt; 3: b  3</div><div class='input'><span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>.N</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>,<span class='no'>sum</span>)), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]    <span class='co'># get number of observations and sum per group</span></div><div class='output co'>#&gt;    x N v  y  a  b
#&gt; 1: b 3 3 10  6 24
#&gt; 2: a 3 5 10 15 15
#&gt; 3: c 3 5 10 24  6</div><div class='input'><span class='no'>DT</span>[, {<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>y</span>);
      <span class='fu'>.</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='no'>a</span>-<span class='no'>tmp</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='no'>b</span>-<span class='no'>tmp</span>)
      }, <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                        <span class='co'># anonymous lambda in 'j', j accepts any valid</span></div><div class='output co'>#&gt;    x          a          b
#&gt; 1: b -2.3333333  5.6666667
#&gt; 2: b -1.3333333  4.6666667
#&gt; 3: b -0.3333333  3.6666667
#&gt; 4: a  0.6666667  2.6666667
#&gt; 5: a  1.6666667  1.6666667
#&gt; 6: a  2.6666667  0.6666667
#&gt; 7: c  3.6666667 -0.3333333
#&gt; 8: c  4.6666667 -1.3333333
#&gt; 9: c  5.6666667 -2.3333333</div><div class='input'>                                      <span class='co'># expression. TO REMEMBER: every element of</span>
                                      <span class='co'># the list becomes a column in result.</span>
<span class='fu'><a href='https://rdrr.io/r/grDevices/pdf.html'>pdf</a></span>(<span class='st'>"new.pdf"</span>)
<span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>a</span>,<span class='no'>b</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='no'>x</span>]                 <span class='co'># can also plot in 'j'</span></div><div class='output co'>#&gt; Empty data.table (0 rows and 1 cols): x</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/grDevices/dev.html'>dev.off</a></span>()</div><div class='output co'>#&gt; pdf 
#&gt;   2 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.remove</a></span>(<span class='st'>"new.pdf"</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># using rleid, get max(y) and min of all cols in .SDcols for each consecutive run of 'v'</span>
<span class='no'>DT</span>[, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'>.</span>(<span class='kw'>y</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>y</span>)), <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>.SD</span>, <span class='no'>min</span>)), <span class='kw'>by</span><span class='kw'>=</span><span class='fu'><a href='rleid.html'>rleid</a></span>(<span class='no'>v</span>), <span class='kw'>.SDcols</span><span class='kw'>=</span><span class='no'>v</span>:<span class='no'>b</span>]</div><div class='output co'>#&gt;    rleid y v y a b
#&gt; 1:     1 6 1 1 1 7
#&gt; 2:     2 3 2 1 4 5
#&gt; 3:     3 6 1 1 6 3
#&gt; 4:     4 6 2 3 8 1</div><div class='input'>
<span class='co'># Support guide and links:</span>
<span class='co'># https://github.com/Rdatatable/data.table/wiki/Support</span>

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>()) {
  <span class='fu'><a href='https://rdrr.io/r/utils/vignette.html'>vignette</a></span>(<span class='kw'>package</span><span class='kw'>=</span><span class='st'>"data.table"</span>)  <span class='co'># 9 vignettes</span>

  <span class='fu'><a href='test.data.table.html'>test.data.table</a></span>()               <span class='co'># 6,000 tests</span>

  <span class='co'># keep up to date with latest stable version on CRAN</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/update.packages.html'>update.packages</a></span>()

  <span class='co'># get the latest devel version</span>
  <span class='fu'><a href='update.dev.pkg.html'>update.dev.pkg</a></span>()
  <span class='co'># read more at:</span>
  <span class='co'># https://github.com/Rdatatable/data.table/wiki/Installation</span>
}
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matt Dowle, Arun Srinivasan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


